(this["webpackJsonprawgraphs-frontend"]=this["webpackJsonprawgraphs-frontend"]||[]).push([[0],{127:function(e,a,t){e.exports={parsingOptions:"ParsingOptions_parsingOptions__K4kyV","refresh-button":"ParsingOptions_refresh-button__3TkLa","separator-preview":"ParsingOptions_separator-preview__1UuQv"}},133:function(e,a,t){e.exports={dropzone:"LoadProject_dropzone__6a5Ft",reject:"LoadProject_reject__1NjN5",accept:"LoadProject_accept__1a3qM","browse-button":"LoadProject_browse-button__Kvg8t"}},134:function(e,a,t){e.exports={dropzone:"UploadFile_dropzone__1h-vB",reject:"UploadFile_reject__2Kpgt",accept:"UploadFile_accept__3mK1X","browse-button":"UploadFile_browse-button__2AUZ1"}},135:function(e,a,t){e.exports={thumbnail:"ChartSelector_thumbnail__1xQ_-",currentChart:"ChartSelector_currentChart__NKILM",disabled:"ChartSelector_disabled__MRXKu"}},136:function(e,a,t){e.exports={swatch:"InlineColorPicker_swatch__11WDP",color:"InlineColorPicker_color__12j-E",popover:"InlineColorPicker_popover__3Hchl",cover:"InlineColorPicker_cover__2KTIs"}},319:function(e,a,t){e.exports={navbar:"Header_navbar__359Kr"}},32:function(e,a,t){e.exports={"chart-options":"ChartOptions_chart-options__3l80N","chart-option":"ChartOptions_chart-option__AxfdW","color-swatch":"ChartOptions_color-swatch__2yOSf","color-scale-item":"ChartOptions_color-scale-item__3Rhfd",ordinal:"ChartOptions_ordinal__2mFUI","not-ordinal":"ChartOptions_not-ordinal__3DrFs","color-swatches-list":"ChartOptions_color-swatches-list__2EQnZ","options-group":"ChartOptions_options-group__3Zauh","group-header":"ChartOptions_group-header__1X0bJ",collapsed:"ChartOptions_collapsed__pl7d6","collapse-button":"ChartOptions_collapse-button__rUqFX","color-scheme-dropdown-item":"ChartOptions_color-scheme-dropdown-item__1zRUD","scheme-preview":"ChartOptions_scheme-preview__f1lz2"}},320:function(e,a,t){e.exports={section:"Section_section__2mYr1"}},322:function(e,a,t){e.exports={footer:"Footer_footer__7dIj9"}},34:function(e,a,t){e.exports={"column-card":"DataMapping_column-card__2VBWp","column-title":"DataMapping_column-title__2yLXi","data-type-icon":"DataMapping_data-type-icon__fdfcN","chart-dimension":"DataMapping_chart-dimension__2tNga","chart-dimension-header":"DataMapping_chart-dimension-header__3FrwJ","accepted-type-icon":"DataMapping_accepted-type-icon__3XRr1","dimension-required":"DataMapping_dimension-required__1FreW","assigned-column":"DataMapping_assigned-column__3S8Vu","column-valid":"DataMapping_column-valid__1wlKa","column-invalid":"DataMapping_column-invalid__3g-BT","remove-assigned":"DataMapping_remove-assigned__3VE_f",dropzone:"DataMapping_dropzone__2L06t",active:"DataMapping_active__NdQHM"}},35:function(e,a,t){e.exports={"data-type-selector":"DataGrid_data-type-selector__2on-B","data-type-selector-item":"DataGrid_data-type-selector-item__3xB1K",selected:"DataGrid_selected__iVbJn","date-format-preview":"DataGrid_date-format-preview__f5V3s","data-type-selector-trigger":"DataGrid_data-type-selector-trigger__1yAyi","date-format-selector":"DataGrid_date-format-selector__19SHO","date-format-selector-entry":"DataGrid_date-format-selector-entry__3kPs-","parent-type-selector":"DataGrid_parent-type-selector__8RCk2","column-name":"DataGrid_column-name__q_QPq","has-error":"DataGrid_has-error__jgPR1","raw-col-header":"DataGrid_raw-col-header__2fXsy",unsorted:"DataGrid_unsorted__2dx3u",acs:"DataGrid_acs__-kgxx",desc:"DataGrid_desc__2WpaO"}},356:function(e,a,t){e.exports={"url-input":"UrlFetch_url-input__3vKK2"}},385:function(e,a,t){e.exports=t(678)},390:function(e,a,t){},395:function(e,a,t){},46:function(e,a,t){e.exports={"loading-option":"DataLoader_loading-option__Spa1h",disabled:"DataLoader_disabled__3RVvn",active:"DataLoader_active__-mHU8","start-over":"DataLoader_start-over__3fWNA",cancel:"DataLoader_cancel__22q8c","loading-component":"DataLoader_loading-component__1zOap","bg-animated":"DataLoader_bg-animated__1j4Qa","bg-animation":"DataLoader_bg-animation__12elS"}},678:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"VERSION",(function(){return Oa})),t.d(n,"serializeProject",(function(){return Ea})),t.d(n,"deserializeProject",(function(){return ya}));var r={};t.r(r),t.d(r,"VERSION",(function(){return ka})),t.d(r,"serializeProject",(function(){return wa})),t.d(r,"deserializeProject",(function(){return Na}));var l=t(1),c=t.n(l),o=t(43),s=t.n(o),i=(t(390),t(10)),u=t(4),m=t(8),p=[{label:"About",slug:"about",href:"https://rawgraphs.io/about"},{label:"GitHub",slug:"github",href:"https://github.com/rawgraphs/rawgraphs-app"}],d=t(319),g=t.n(d),b=t(743),f=t(741);function v(e){var a=e.menuItems;return c.a.createElement(b.a,{bg:"white",expand:"lg",sticky:"top",className:g.a.navbar},c.a.createElement(b.a.Brand,{href:"/"},c.a.createElement("b",null,"RAW"),c.a.createElement("span",{className:"text-primary"},"Graphs")," 2.0 beta"),c.a.createElement(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(b.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(f.a,{className:"ml-auto"},a.map((function(e,a){return c.a.createElement(f.a.Link,{key:"item"+a,href:e.href},e.label)})),c.a.createElement("a",{role:"button",href:"https://github.com/rawgraphs/rawgraphs-app/issues",target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-primary ml-2 d-flex flex-column align-items-center justify-content-center"},"Report issue"))))}var h=t(320),O=t.n(h),E=t(727),j=t(728),y=t(321),k=t(729);function w(e){return c.a.createElement(E.a,{fluid:!0,className:[O.a.section,e.className].join(" ")},c.a.createElement(j.a,null,c.a.createElement(y.a,null,c.a.createElement("div",{className:"d-flex align-items-center mb-3"},c.a.createElement("h1",null,e.title),e.loading&&c.a.createElement(k.a,{animation:"border",variant:"primary",style:{width:"2rem",height:"2rem",borderWidth:"2px",marginLeft:"2rem"}})),e.children)))}var C=t(322),N=t.n(C),_=t(21),S=t(241);function D(e){return c.a.createElement(E.a,{fluid:!0,style:{backgroundColor:"var(--dark)"}},c.a.createElement(E.a,{className:N.a.footer},c.a.createElement(j.a,null,c.a.createElement(y.a,{xs:6,sm:{span:5,order:1},lg:{span:3,order:1}},c.a.createElement("p",{className:"Xsmall"},"RAWGraphs is an open source project designed and developed by"," ",c.a.createElement("a",{href:"http://densitydesign.org/",target:"_blank",rel:"noopener noreferrer"},"DensityDesign"),","," ",c.a.createElement("a",{href:"https://calib.ro/",target:"_blank",rel:"noopener noreferrer"},"Calibro")," ","and"," ",c.a.createElement("a",{href:"https://inmagik.com/",target:"_blank",rel:"noopener noreferrer"},"Inmagik"),".",c.a.createElement("br",null),"\xa9 2013-2021"," ",c.a.createElement("a",{href:"https://raw.github.com/rawgraphs/rawgraphs-app/master/LICENSE"},"(Apache License 2.0)"))),c.a.createElement(y.a,{xs:6,sm:{span:5,order:3},lg:{span:3,order:1}},c.a.createElement("p",{className:"Xsmall"})),c.a.createElement(y.a,{xs:6,sm:{span:6,offset:1,order:2},md:{span:3},lg:{offset:0},xl:{span:2,offset:2}},c.a.createElement("p",null,c.a.createElement(_.j,null)," hello at rawgraphs.io"),c.a.createElement("p",null,c.a.createElement(S.b,null)," ",c.a.createElement("a",{href:"https://twitter.com/rawgraphs",target:"_blank",rel:"noopener noreferrer"},"@rawgraphs"))),c.a.createElement(y.a,{xs:6,sm:{span:6,offset:1,order:4},md:{span:2},lg:{offset:0},xl:{span:2,offset:0}},c.a.createElement("p",null,c.a.createElement(S.a,null)," ",c.a.createElement("a",{href:"https://github.com/rawgraphs",target:"_blank",rel:"noopener noreferrer"},"Github")),c.a.createElement("p",null,c.a.createElement(_.d,null)," ",c.a.createElement("a",{href:"https://old.rawgraphs.io",target:"_blank",rel:"noopener noreferrer"},"RAWGraphs v.1"))))))}var x=t(737),T=t(323);var R,I,L=function(){var e=function(){var e=Object(l.useState)({width:void 0,height:void 0}),a=Object(u.a)(e,2),t=a[0],n=a[1];return Object(l.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}(),a=Object(l.useState)(e.width<992),t=Object(u.a)(a,2),n=t[0],r=t[1],o=Object(l.useState)(!1),s=Object(u.a)(o,2),i=s[0],m=s[1],p=function(){r(!1),m(!0)};return Object(l.useEffect)((function(){!1===i&&r(e.width<992)}),[i,e]),c.a.createElement(x.a,{className:"raw-modal",show:n,onHide:p,backdrop:"static",keyboard:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},c.a.createElement(x.a.Header,{closeButton:!0},c.a.createElement(x.a.Title,{as:"h5"},c.a.createElement("span",{role:"img","aria-label":"Party icon"},"\ud83c\udf89")," ","Welcome to the new RAWGraphs!")),c.a.createElement(x.a.Body,null,c.a.createElement("p",{className:"big"},"RAWGraphs 2.0 is designed for ",e.width>=768?"slightly ":" ","bigger screens!"),c.a.createElement("p",null,"Resize your browser window or"," ",c.a.createElement("a",{href:"mailto:?subject=Visit+RAWGraphs+2.0&body=Hello%21%0D%0APlease+do+not+forget+to+take+a+look+at+the+new+version+of+RAWGraphs%21%0D%0A%0D%0AVisit%3A+https%3A%2F%2Fdev.rawgraphs.io%2F%0D%0A%0D%0ASee+you+later%2C%0D%0AThe+RAWGraphs+Team"},c.a.createElement(_.h,null)," send yourself a reminder")," ","to come back at a better time."),c.a.createElement("p",null,"Touch devices are not fully supported yet.")),c.a.createElement(x.a.Footer,null,c.a.createElement(T.a,{variant:"primary",onClick:p},"Got it!")))},M=t(20),A=t(324),F=t(325),P=t(326),V=t(327),U=t(328),B=t(329),q=t(330),z=t(331),G=t(332),W=t(333),H=t(334),K=t(335),J=t(336),X=t(337),Y=t(338),Q=t(339),Z=t(340),$=t(341),ee=t(342),ae=t(343),te=t(344),ne=t(345),re=t(346),le=t(347),ce=t(348),oe=t(349),se=t(350),ie=t(351),ue=t(352),me=t(353),pe=_.f,de=_.m,ge=_.q,be={date:pe,number:de,string:ge},fe={"ar-EG":A,"ca-ES":F,"cs-CZ":P,"da-DK":V,"de-CH":U,"de-DE":B,"en-CA":q,"en-GB":z,"en-US":G,"es-ES":W,"es-MX":H,"fa-IR":K,"fi-FI":J,"fr-CA":X,"fr-FR":Y,"he-IL":Q,"hu-HU":Z,"it-IT":$,"ja-JP":ee,"ko-KR":ae,"mk-MK":te,"nb-NO":ne,"nl-NL":re,"pl-PL":le,"pt-BR":ce,"ru-RU":oe,"sv-SE":se,"uk-UA":ie,"zh-CN":ue,"zh-TW":me},ve={"\\t":"Tab",";":"Semicolon",",":"Comma","|":"Pipe"},he=Object.keys(ve),Oe={count:"Count",mean:"Average",median:"Median",max:"Max",min:"Min",countDistinct:"Count unique",sum:"Sum",csv:"CSV",csvDistinct:"CSV (unique)"},Ee={sequential:"Sequential",diverging:"Diverging",ordinal:"Ordinal"},je={interpolateBlues:"Blue sequential",interpolateGreens:"Green sequential",interpolateReds:"Red sequential",interpolateRdBu:"RdBu diverging",interpolateBrBG:"BrBG diverging",interpolatePiYG:"PiYG diverging",schemeCategory10:"Categorical 10",interpolateTurbo:"Turbo discrete",interpolateSpectral:"Spectral discrete"},ye=t(242),ke=function(){return new Worker(t.p+"static/js/worker.1598e617.worker.js")};var we=t(3),Ce=t(2);var Ne=[{dataType:"json",parse:function(e){return[JSON.parse(e),{}]}},{dataType:"csv",parse:function(e,a){if(a.separator)return[Object(Ce.dsvFormat)(a.separator).parse(e),{separator:a.separator}];var t,n=[],r=Object(we.a)(he);try{for(r.s();!(t=r.n()).done;){var l=t.value.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\t/g,"\t");try{var c=Object(Ce.dsvFormat)(l).parse(e);(c.length>0&&Object.keys(c[0]).length>1||","===l)&&n.push({separator:l,score:Object.keys(c[0]).length,parsed:c})}catch(o){}}}catch(s){r.e(s)}finally{r.f()}return n.sort((function(e,a){return a.score-e.score})),[n[0].parsed,{separator:n[0].separator}]}}];function _e(e,a){var t=function(e,a){var t,n=e.trim().replace(/^(?=\n)$|^\s*|\s*$|\n\n+/gm,""),r=Object(we.a)(Ne);try{for(r.s();!(t=r.n()).done;){var l=t.value;try{var c=l.parse(n,a),o=Object(u.a)(c,2),s=o[0],i=o[1];return[l.dataType,s,i]}catch(m){}}}catch(p){r.e(p)}finally{r.f()}return[null,null]}(e,a),n=Object(u.a)(t,3),r=n[0],l=n[1],c=n[2];return null===r?[r,l,"Cannot parse dataset! (This should never happen)",{}]:"json"===r?["json",l,null,c]:l.length>0?[r,l,null,c]:[null,null,"We can't parse your data.",{}]}function Se(e){return["string","number","boolean"].includes(typeof e)}var De=t(13);function xe(e,a){return Object(M.flatMap)(e,(function(e){var t=e[a],n=Object(M.omit)(e,a);return Object(M.map)(n,(function(e,n){var r;return r={},Object(De.a)(r,a,t),Object(De.a)(r,"column",n),Object(De.a)(r,"value",e),r}))}))}var Te="direct",Re="replace",Ie={};function Le(){var e=Object(l.useState)(""),a=Object(u.a)(e,2),t=a[0],n=a[1],r=Object(l.useState)(null),c=Object(u.a)(r,2),o=c[0],s=c[1],p=Object(l.useState)(null),d=Object(u.a)(p,2),g=d[0],b=d[1],f=Object(l.useState)(null),v=Object(u.a)(f,2),h=v[0],O=v[1],E=Object(l.useState)(null),j=Object(u.a)(E,2),y=j[0],k=j[1],w=Object(l.useState)([null,null]),C=Object(u.a)(w,2),N=C[0],_=C[1],S=Object(l.useState)(","),D=Object(u.a)(S,2),x=D[0],T=D[1],I=Object(l.useState)(","),L=Object(u.a)(I,2),A=L[0],F=L[1],P=Object(l.useState)("."),V=Object(u.a)(P,2),U=V[0],B=V[1],q=Object(l.useState)(navigator.language||"en-US"),z=Object(u.a)(q,2),G=z[0],W=z[1],H=Object(l.useState)(),K=Object(u.a)(H,2),J=K[0],X=K[1],Y=Object(l.useState)(null),Q=Object(u.a)(Y,2),Z=Q[0],$=Q[1],ee=Object(u.a)(N,2),ae=ee[0],te=ee[1],ne=Object(l.useState)(!1),re=Object(u.a)(ne,2),le=re[0],ce=re[1],oe=Object(l.useState)(Te),se=Object(u.a)(oe,2),ie=se[0],ue=se[1],me=Object(l.useState)(void 0),pe=Object(u.a)(me,2),de=pe[0],ge=pe[1],be=null!==te&&void 0!==te?te:null===Z||void 0===Z?void 0:Z.dataTypes,ve=Object(l.useCallback)((function(e,a,t){return ce(!0),function(e,a,t){try{R.terminate()}catch(n){}return R=new ke,ye.a(R).parseDataset(e,a,t)}(e,a,Object(i.a)(Object(i.a)({},t),{},{dateLocale:Object(M.get)(fe,t.locale)})).then((function(e){return e})).catch((function(e){console.log("eee",e)})).finally((function(){ce(!1)}))}),[ce]),he=Object(l.useCallback)((function(e,a,t){return ce(!0),new Promise((function(n,r){try{n(Object(m.u)(e,a,Object(i.a)(Object(i.a)({},t),{},{dateLocale:Object(M.get)(fe,t.locale)})))}catch(l){r(l)}finally{ce(!1)}}))}),[ce]),Oe=Object(l.useCallback)((function(e,a,t){return ve(e,a,t)}),[ve,he]),Ee=Object(l.useCallback)((function(e,a,t){return Oe(e,a,t).then((function(e){return $(e)}))}),[Oe]),je=Object(l.useCallback)((function(){$(null),b(null),O(null),n(""),s(null),k(null),X(null),_([null,null])}),[]),we=Object(l.useCallback)((function(e){var a=e.userInput,t=e.userData,r=e.userDataType,l=e.parseError,c=e.unstackedColumns,o=e.unstackedData,i=e.dataTypes,u=e.separator,m=e.thousandsSeparator,p=e.decimalsSeparator,d=e.locale,g=e.stackDimension,f=e.dataSource;n(a),O(r),T(u),F(m),B(p),W(d),X(g),s(f),b(t),k(l),_([o,c]),Ee(t,i,{thousandsSeparator:m,decimalsSeparator:p,locale:d})}),[Ee]),Ce=Object(l.useCallback)((function(e){Oe(e,void 0,{locale:G,decimal:U,group:A}).then((function(a){if(a.errors.length>0)Ie.replacedData=a,ge("parse-error");else{var t=Object.keys(be),n=Object.keys(a.dataTypes),r=Object(M.difference)(t,n);if(r.length>0)Ie.replacedData=a,ge("missing-column:"+r[0]);else{var l=Object(i.a)(Object(i.a)({},a.dataTypes),be);Oe(e,l,{locale:G,decimal:U,group:A}).then((function(t){if(t.errors.length>0)Ie.replacedData=a,ge("type-mismatch");else if(J){_([e,t.dataTypes]);var n=xe(e,J);b(n),Oe(n,Z.dataTypes,{locale:G,decimal:U,group:A}).then((function(e){return $(e)}))}else $(t)}))}}}))}),[be,Z,U,G,Oe,J,A]),Ne=Object(l.useCallback)((function(e){b(e),ie===Te?Ee(e,void 0,{locale:G,decimal:U,group:A}):ie===Re?Ce(e):console.error("Unknown data loader mode!")}),[U,Ce,G,ie,Ee,A]);function De(e,a,t){var r=_e(e,{separator:Object(M.get)(t,"separator",null)}),l=Object(u.a)(r,4),c=l[0],o=l[1],i=l[2],m=l[3];n(e),s(a),O(c),k(i),m&&"object"===typeof m&&"separator"in m&&T(m.separator),"json"===c||i||Ne(o)}var Le=Object(l.useCallback)((function(e){var a=e.map((function(e){var a=e;if(Array.isArray(a)){var t={};a.forEach((function(e,a){t["Column ".concat(a+1)]=e})),a=t}(Se(a)||null===a)&&(a={value:a});var n={};for(var r in a){var l=a[r],c=typeof l;if(Array.isArray(l))n[r]=l.filter(Se).join(" ");else if("object"===c&&null!==c)for(var o in l){var s=l[o];Se(s)&&(n["".concat(r,".").concat(o)]=s)}else Se(l)&&(n[r]=l)}return n})).filter((function(e){return null!==e}));b(a),Ne(a)}),[Ne]);var Me=Object(l.useCallback)((function(){ue(Re),Ie.userInput=t,Ie.userDataType=h,Ie.dataSource=o,Ie.userData=g,n(null),O(null),s(null),b(null)}),[o,g,h,t]),Ae=Object(l.useCallback)((function(){ge(!1),ue(Te),n(Ie.userInput),O(Ie.userDataType),s(Ie.dataSource),b(Ie.userData)}),[]),Fe=Object(l.useCallback)((function(){ge(!1),$(Ie.replacedData),k(null),X(null),_([null,null])}),[]);return{userInput:t,setUserInput:De,userData:g,userDataType:h,parseError:y,unstackedData:ae,unstackedColumns:te,separator:x,setSeparator:function(e){var a=_e(t,{separator:e}),n=Object(u.a)(a,3),r=n[0],l=n[1],c=n[2];T(e),O(r),k(c),"json"!==r&&!c&&e&&(b(l),Ee(l,void 0,{locale:G,decimal:U,group:A}))},thousandsSeparator:A,setThousandsSeparator:function(e){var a=_e(t,{separator:x}),n=Object(u.a)(a,3),r=n[0],l=n[1],c=n[2];F(e),O(r),k(c),"json"===r||c||(b(l),Ee(l,void 0,{locale:G,decimal:U,group:e}))},decimalsSeparator:U,setDecimalsSeparator:function(e){var a=_e(t,{separator:x}),n=Object(u.a)(a,3),r=n[0],l=n[1],c=n[2];B(e),O(r),k(c),"json"===r||c||(b(l),ce(!0),Ee(l,void 0,{locale:G,decimal:e,group:A}))},locale:G,setLocale:function(e){Z&&(Ee(Z.dataset,Z.dataTypes,{locale:e,decimal:U,group:A}),W(e))},stackDimension:J,dataSource:o,data:Z,loading:le,coerceTypes:function(e){Ee(g,e,{locale:G,decimal:U,group:A})},loadSample:function(e,a){T(a),De(e,{type:"sample"},{separator:a})},handleInlineEdit:function(e){b(e),Ee(e,Z.dataTypes,{locale:G,decimal:U,group:A})},handleStackOperation:function(e){if(X(e),null!==e){null===ae&&_([g,Z.dataTypes]);var a=xe(ae||g,e);b(a),Ee(a,void 0,{locale:G,decimal:U,group:A})}else b(ae),Ee(ae,te,{locale:G,decimal:U,group:A}),_([null,null])},setJsonData:Le,resetDataLoader:je,hydrateFromSavedProject:we,dataLoaderMode:ie,startDataReplace:Me,cancelDataReplace:Ae,commitDataReplace:Fe,replaceRequiresConfirmation:de}}var Me=t(17),Ae=t(19),Fe=t(738),Pe=t(364),Ve=t(744),Ue=t(7),Be=t.n(Ue),qe=t(35),ze=t.n(qe),Ge=Object.keys(m.c),We=c.a.forwardRef((function(e,a){var t=e.currentFormat,n=e.onChange,r=e.className,l=Object(Ae.a)(e,["currentFormat","onChange","className"]);return c.a.createElement("div",Object.assign({className:Be()(r,ze.a["date-format-selector"]),ref:a},l),Ge.map((function(e){return c.a.createElement("div",{key:e,className:Be()(ze.a["date-format-selector-entry"],Object(De.a)({},ze.a.selected,Object(M.get)(t,"dateFormat","")===e)),onClick:function(a){a.stopPropagation(),a.preventDefault(),n&&n({type:"date",dateFormat:e})}},e)})))}));function He(e){var a=e.currentType,t=e.onTypeChange,n=e.currentTypeComplete,r=Object(l.useRef)(null),o=Object(l.useState)(!1),s=Object(u.a)(o,2),i=s[0],m=s[1],p=Object(M.get)(a,"type",a),d=Object(l.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var n=e.target.dataset.datatype;"function"!==typeof t||Object(M.isEqual)(n,a)||t(n),m(!1)}),[a,t]),g=Object(l.useCallback)((function(e){"function"!==typeof t||Object(M.isEqual)(e,a)||t(e),m(!1)}),[a,t]),b=Object(l.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),m(!i)}),[i]),f=be[p];return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{role:"button",className:ze.a["data-type-selector-trigger"],ref:r,onClick:b},c.a.createElement(f,null)),c.a.createElement(Pe.a,{target:r.current,show:i,placement:"bottom-start",rootClose:!0,rootCloseEvent:"click",onHide:function(){m(!1)},container:document.body},(function(e){e.placement,e.scheduleUpdate,e.arrowProps,e.outOfBoundaries,e.show;var t=Object(Ae.a)(e,["placement","scheduleUpdate","arrowProps","outOfBoundaries","show"]);return c.a.createElement("div",Object.assign({id:"data-type-selector",className:ze.a["data-type-selector"],onClick:function(e){return e.stopPropagation()}},t),c.a.createElement("div",{"data-datatype":"number",onClick:d,className:Be()(ze.a["data-type-selector-item"],Object(De.a)({},ze.a.selected,"number"===p))},c.a.createElement(de,null)," Number"),c.a.createElement(Ve.a,{placement:"right-start",overlay:c.a.createElement(We,{currentType:a,onChange:g}),trigger:"click"},(function(e){var a=e.ref,t=Object(Ae.a)(e,["ref"]);return c.a.createElement("div",Object.assign({ref:a,"data-datatype":"date"},t,{className:Be()(ze.a["data-type-selector-item"],ze.a["parent-type-selector"],Object(De.a)({},ze.a.selected,"date"===p))}),c.a.createElement("div",null,c.a.createElement(pe,null),"Date","date"===p&&c.a.createElement("span",{className:ze.a["date-format-preview"]}," ("+(n.dateFormat||"iso")+")  ")),c.a.createElement(_.i,{style:{marginRight:0,fill:"var(--gray-700)"}}))})),c.a.createElement("div",{"data-datatype":"string",onClick:d,className:Be()(ze.a["data-type-selector-item"],Object(De.a)({},ze.a.selected,"string"===p))},c.a.createElement(ge,null)," String"))})))}function Ke(e){var a=Object.assign({},e).column,t=a.key,n=a.sortColumn,r=a.sortDirection;return c.a.createElement("div",{className:Be()(Object(De.a)({},ze.a["raw-col-header"],!0),Object(De.a)({},ze.a.unsorted,t!==n||t===n&&"NONE"===r),Object(De.a)({},ze.a.acs,t===n&&"ASC"===r),Object(De.a)({},ze.a.desc,t===n&&"DESC"===r))},c.a.createElement(He,{currentType:a._raw_datatype,onTypeChange:a._raw_coerceType,currentTypeComplete:a._raw_datatype}),c.a.createElement("span",{className:Be()(ze.a["column-name"],"text-truncate","d-block"),title:a.name},a.name))}function Je(e){var a,t=e.userDataset,n=e.dataset,r=e.errors,o=e.dataTypes,s=e.coerceTypes,p=e.onDataUpdate,d=Object(l.useState)(["id","NONE"]),g=Object(u.a)(d,2),b=Object(u.a)(g[0],2),f=b[0],v=b[1],h=g[1],O=Object(l.useMemo)((function(){return Object(M.keyBy)(r,"row")}),[r]),E=Object(l.useRef)(),j=24+8*(Math.floor(Math.log10(t.length))+1),y=((null===(a=E.current)||void 0===a?void 0:a.getBoundingClientRect().width)-j-1)/Object.keys(o).length,k=y?Math.max(y,170):170,w=Object(l.useMemo)((function(){return t&&o?[{key:"_id",name:"",headerRenderer:function(){return null},frozen:!0,width:j,sortable:!0}].concat(Object(Me.a)(Object.keys(o).map((function(e,a){return{key:e,name:e,sortColumn:f,sortDirection:v,headerRenderer:Ke,editable:!0,formatter:function(a){var t,n,r=a.row;return c.a.createElement("div",{className:Be()(Object(De.a)({},ze.a["has-error"],null===r||void 0===r||null===(t=r._errors)||void 0===t?void 0:t[e]))},null===(n=r[e])||void 0===n?void 0:n.toString())},_raw_datatype:o[e],_raw_coerceType:function(a){return s(Object(i.a)(Object(i.a)({},o),{},Object(De.a)({},e,a)))},sortable:!0,resizable:!0,width:k}})))):[]}),[s,o,t,j,k,f,v]),C=Object(l.useMemo)((function(){var e=t.map((function(e,a){var t;return Object(i.a)(Object(i.a)({},e),{},{_id:a+1,_stage3:n[a],_errors:null===(t=O[a])||void 0===t?void 0:t.error})}));if("NONE"===v)return e;var a=Object(m.q)(o[f]);if("number"===a)e=e.sort((function(e,a){return e._stage3[f]-a._stage3[f]}));else if("date"===a){var r;e=null!==(r=e.sort((function(e,a){var t,n,r;return null!==(t=null===(n=e._stage3[f])||void 0===n?void 0:n.valueOf())&&void 0!==t?t:0-(null===(r=a._stage3[f])||void 0===r?void 0:r.valueOf())})))&&void 0!==r?r:0}else e=e.sort((function(e,a){var t;return null===(t=e._stage3[f])||void 0===t?void 0:t.toString().localeCompare(a._stage3[f].toString())}));return"DESC"===v?e.reverse():e}),[t,v,o,f,n,O]),N=Object(l.useCallback)((function(e,a){h([e,a])}),[]);return c.a.createElement("div",{ref:E},c.a.createElement(Fe.a,{minColumnWidth:j,columns:w,rows:C,rowHeight:48,sortColumn:f,sortDirection:v,onSort:N,height:432,onColumnResize:function(){},onRowsUpdate:function(e){if("CELL_UPDATE"===e.action){var a=Object(Me.a)(t);a[e.fromRow]=Object(i.a)(Object(i.a)({},a[e.fromRow]),{},Object(De.a)({},e.cellKey,e.updated[e.cellKey])),p&&p(a)}}}))}var Xe=t(15),Ye=t.n(Xe),Qe=t(102),Ze=t(747),$e=[{name:"Highest grossing movies in history",category:"Bubble chart, convex hull diagram",url:"./sample-datasets/Bubble Chart - TOP 50 Groossing Movies.tsv",delimiter:"\t"},{name:"US Presidential Elections (1976-2016)",category:"Line Graph",url:"./sample-datasets/Line Graph - US Presidential Elections.tsv",delimiter:"\t"},{name:"Letter Frequency by Language",category:"Matrix plot (Heatmap)",url:"./sample-datasets/Matrix Plot - Letters frequencies by language.tsv",delimiter:"\t"},{name:"Aromas of wine and frequency",category:"Sunburst Diagram",url:"./sample-datasets/Sunburst - Wine Aromas.tsv",delimiter:"\t"},{name:"Orchestras by musical instrument",category:"Treemap, Circle packing",url:"./sample-datasets/Treemap - Orchestra.tsv",delimiter:"\t"},{name:"Animal kingdom classification",category:"Dendrogram",url:"./sample-datasets/Dendrogram - animal kingdom.tsv",delimiter:"\t"},{name:"Most populated cities per continent",category:"Boxplot, Violin plot",url:"./sample-datasets/Boxplot - biggest-cities.tsv",delimiter:"\t"},{name:"FIFA playes statistics",category:"Radar Chart",url:"./sample-datasets/Radar Chart - Fifa players.tsv",delimiter:"\t"},{name:"Olympics Medals",category:"Streamgraph, Bumpchart",url:"./sample-datasets/Streamgraph - Olympics Medals.tsv",delimiter:"\t"},{name:"Basketball shots",category:"Hexagonal Binning",url:"./sample-datasets/Hexbin - basketball shots.tsv",delimiter:"\t"},{name:"Energy flows",category:"Sankey diagram, Arc diagram",url:"./sample-datasets/Sankey - Energy flows.csv",delimiter:","},{name:"New York mean wage per occupation",category:"Beeswarm plot",url:"./sample-datasets/Beeswarm plot - NY mean wages.tsv",delimiter:"\t"},{name:"RIAA - Revenues per Music format",category:"Bar chart",url:"./sample-datasets/Bar chart - RIAA Music format revenues.tsv",delimiter:"\t"}];function ea(e){var a=e.onSampleReady,t=e.setLoadingError,n=function(){var e=Object(Qe.a)(Ye.a.mark((function e(n){var r,l,c,o;return Ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.delimiter,l=n.url,e.prev=1,e.next=4,fetch(l);case 4:c=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),t("Loading error. "+e.t0.message),e.abrupt("return");case 11:return e.next=13,c.text();case 13:o=e.sent,a(o,r),t(null);case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement(j.a,null,$e.sort((function(e,a){return e.name.localeCompare(a.name)})).map((function(e,a){return c.a.createElement(y.a,{xs:6,lg:4,xl:3,key:a,style:{marginBottom:15}},c.a.createElement(Ze.a,{onClick:function(){n(e)},className:"cursor-pointer"},c.a.createElement(Ze.a.Body,{className:""},c.a.createElement(Ze.a.Title,{className:""},c.a.createElement("h2",{className:""},e.name)),c.a.createElement(Ze.a.Subtitle,{className:""},c.a.createElement("h4",{className:"m-0"},e.category)))))})))}t(395);var aa=function e(a){var t=a.contextName,n=a.nestingLevel,r=a.context,o=a.selectFilter,s=a.onSelect,i=o(r),m=typeof r,p=Object(l.useState)(!1),d=Object(u.a)(p,2),g=d[0],b=d[1],f=["json-nested",i?"selectable":null,g?"hover":null].filter((function(e){return null!==e})).join(" "),v=Object(l.useCallback)((function(e){i&&(e.stopPropagation(),e.preventDefault(),s&&s(r))}),[r,i,s]),h=Object(l.useCallback)((function(e){i&&(e.stopPropagation(),e.preventDefault(),b(!0))}),[i]),O=Object(l.useCallback)((function(e){i&&(e.stopPropagation(),e.preventDefault(),b(!1))}),[i]);return"object"===m&&null!==m?c.a.createElement("div",{className:f,onClick:v,onMouseOver:h,onMouseOut:O},t&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"property-name"},t),c.a.createElement("span",{className:"colon"},": ")),!Array.isArray(r)&&c.a.createElement("span",{className:"curly-bracket open-bracket"},"{"),Array.isArray(r)&&c.a.createElement("span",{className:"square-bracket open-bracket"},"["),Object(M.map)(r,(function(a,t){return c.a.createElement(e,{key:t,contextName:Array.isArray(r)?null:t,nestingLevel:n+1,context:a,selectFilter:o,onSelect:s})})),!Array.isArray(r)&&c.a.createElement("span",{className:"curly-bracket close-bracket"},"}"),Array.isArray(r)&&c.a.createElement("span",{className:"square-bracket close-bracket"},"]")):c.a.createElement("div",{className:f,onClick:v,onMouseOver:h,onMouseOut:O},t&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"property-name"},t),c.a.createElement("span",{className:"colon"},": ")),null===r&&c.a.createElement("span",{className:"scalar-value"},"null"),null!==r&&c.a.createElement(c.a.Fragment,null,("bigint"===m||"number"===m)&&c.a.createElement("span",{className:"scalar-value scalar-value-numeric"},r.toString()),"string"===m&&c.a.createElement("span",{className:"scalar-value scalar-value-string"},'"',r.toString(),'"'),"boolean"===m&&c.a.createElement("span",{className:"scalar-value scalar-value-bool"},'"',r?"true":"false",'"'),"undefined"===m&&c.a.createElement("span",{className:"scalar-value scalar-value-undefined"},"undefined")))},ta=function(e){var a=e.context,t=e.selectFilter,n=e.onSelect;return c.a.createElement("pre",{className:"json-viewer"},c.a.createElement(aa,{contextName:null,nestingLevel:0,context:a,selectFilter:t,onSelect:n}))},na=t(363),ra=t(127),la=t.n(ra);function ca(e){var a=e.title,t=e.value,n=e.onChange,r=(Object(Ae.a)(e,["title","value","onChange"]),t.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")),o=Object(l.useCallback)((function(e){if(n){var a=e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\t/g,"\t");n(a)}}),[n]),s=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:["small",la.a["separator-preview"]].join(" ")},e)," ",c.a.createElement("span",null,ve[e]))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"option"},a,c.a.createElement(na.a,{className:"d-inline-block raw-dropdown"},c.a.createElement(na.a.Toggle,{variant:"white",className:"d-flex justify-content-start align-items-center text-truncate"},s(r)),c.a.createElement(na.a.Menu,null,Object.keys(ve).map((function(e){return c.a.createElement(na.a.Item,{key:ve[e],onSelect:function(){return o(e)}},s(e))}))))))}function oa(e){var a=e.title,t=e.value,n=e.onChange,r=Object(Ae.a)(e,["title","value","onChange"]),o=t,s=Object(l.useCallback)((function(e){if(n){var a=e.target.value;n(a)}}),[n]);return c.a.createElement("div",{className:"option"},a,c.a.createElement("input",Object.assign({type:"text",className:"form-control text-field d-inline-block",value:o,onChange:s},r)))}function sa(e){var a=e.title,t=e.value,n=e.onChange,r=Object(Ae.a)(e,["title","value","onChange"]),o=t,s=Object(l.useCallback)((function(e){if(n){var a=e.target.value;n(a)}}),[n]);return c.a.createElement("div",{className:"option"},a,c.a.createElement("input",Object.assign({type:"text",className:"form-control text-field d-inline-block",value:o,onChange:s},r)))}function ia(e){var a=e.title,t=e.value,n=e.onChange,r=(Object(Ae.a)(e,["title","value","onChange"]),Object(l.useCallback)((function(e){n&&n(e)}),[n]));return c.a.createElement("div",{className:"option"},a,c.a.createElement(na.a,{className:"d-inline-block raw-dropdown"},c.a.createElement(na.a.Toggle,{variant:"white",className:""},t),c.a.createElement(na.a.Menu,null,c.a.createElement(na.a.Header,null,c.a.createElement("span",null,"from"," ",c.a.createElement("a",{href:"https://github.com/d3/d3-time-format/tree/master/locale",target:"_blank",rel:"noopener noreferrer"},"d3-time-format"))),Object.keys(fe).map((function(e){return c.a.createElement(na.a.Item,{key:e,onSelect:function(){return r(e)}},e)})))))}function ua(e){var a=e.title,t=e.value,n=e.list,r=e.onChange,o=(Object(Ae.a)(e,["title","value","list","onChange"]),Object(l.useCallback)((function(e){r&&r(e)}),[r]));return c.a.createElement("div",{className:"option"},a,c.a.createElement(na.a,{className:"d-inline-block raw-dropdown"},c.a.createElement(na.a.Toggle,{variant:"white",className:"truncate-160px",disabled:0===n.length},t||"Column"),c.a.createElement(na.a.Menu,null,t&&c.a.createElement(na.a.Item,{onSelect:function(){return o(null)}},"Do not stack"),Object.keys(n).map((function(e){return c.a.createElement(na.a.Item,{key:e,onSelect:function(){return o(e)}},e)})))))}function ma(e){var a=function(){var a=Object(Qe.a)(Ye.a.mark((function a(){var t;return Ye.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(e.dataSource.url);case 2:return t=a.sent,a.t0=e,a.next=6,t.text();case 6:a.t1=a.sent,a.t0.onDataRefreshed.call(a.t0,a.t1);case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return c.a.createElement(j.a,null,c.a.createElement(y.a,{className:la.a.parsingOptions},c.a.createElement("b",null,"DATA PARSING OPTIONS"),"csv"===e.userDataType&&c.a.createElement(ca,{title:"Column separator",value:e.separator,onChange:function(a){return e.setSeparator(a)}}),c.a.createElement(oa,{title:"Thousands separator",value:e.thousandsSeparator,onChange:function(a){return e.setThousandsSeparator(a)}}),c.a.createElement(sa,{title:"Decimals separator",value:e.decimalsSeparator,onChange:function(a){return e.setDecimalsSeparator(a)}}),c.a.createElement(ia,{title:"Date Locale",value:e.locale,onChange:function(a){return e.setLocale(a)}}),"url"===Object(M.get)(e.dataSource,"type","")&&c.a.createElement(T.a,{color:"primary",className:la.a["refresh-button"],onClick:function(){return a()}},c.a.createElement(_.c,{className:"mr-2"}),"Refresh data from url"),c.a.createElement("div",{className:"divider mb-3 mt-0"}),c.a.createElement("b",null,"DATA TRANSFORMATION"),c.a.createElement(ua,{title:"Stack on",value:e.stackDimension,list:e.dimensions,onChange:function(a){return e.setStackDimension(a)}})))}var pa=t(46),da=t.n(pa),ga=t(183),ba=t(133),fa=t.n(ba),va=t(26),ha=[va.a,va.b,va.c,va.d,va.e,va.f,va.g,va.h,va.i,va.j,va.k,va.l,va.m,va.n,va.o,va.p,va.q,va.r,va.s,va.t,va.u,va.v,va.w],Oa="1";function Ea(e,a,t,n,r,l,c,o,s,i,u,m,p,d,g,b){var f,v,h={version:"1"};return h.userInput=e,h.userInputFormat=t,h.dataSource=p,h.rawData=(f=a,v=Object.keys(c.dataTypes),f.map((function(e){return v.map((function(a){return e[a]}))}))),h.parseError=n,h.parseOptions={separator:o,thousandsSeparator:s,decimalsSeparator:i,locale:u,stackDimension:m,unstackedData:r,unstackedColumns:l},h.dataTypes=c.dataTypes,h.chart=d.metadata.name,h.mapping=g,h.visualOptions=b,h}function ja(e,a){if(!Object(M.has)(e,a))throw console.log("IMPORT ERROR",e,a),new Error("Selected project is not valid");return Object(M.get)(e,a)}function ya(e){if("1"!==e.version)throw new Error("Invalid version number, please use a suitable deserializer");var a,t,n=ja(e,"chart"),r=ha.find((function(e){return e.metadata.name===n}));if(!r)throw new Error("Unknown chart!");return{userInput:ja(e,"userInput"),userData:(a=ja(e,"rawData"),t=Object.keys(ja(e,"dataTypes")),a.map((function(e){for(var a={},n=0;n<t.length;n++)a[t[n]]=e[n];return a}))),userDataType:ja(e,"userInputFormat"),parseError:ja(e,"parseError"),unstackedData:ja(e,"parseOptions.unstackedData"),unstackedColumns:ja(e,"parseOptions.unstackedColumns"),dataTypes:ja(e,"dataTypes"),separator:ja(e,"parseOptions.separator"),thousandsSeparator:ja(e,"parseOptions.thousandsSeparator"),decimalsSeparator:ja(e,"parseOptions.decimalsSeparator"),locale:ja(e,"parseOptions.locale"),stackDimension:Object(M.get)(e,"parseOptions.stackDimension",void 0),dataSource:ja(e,"dataSource"),currentChart:r,mapping:ja(e,"mapping"),visualOptions:ja(e,"visualOptions")}}var ka="1.1";function wa(e,a,t,n,r,l,c,o,s,i,u,m,p,d,g,b){var f,v,h={version:ka};return h.userInput=e,h.userInputFormat=t,h.dataSource=p,h.rawData=(f=a,v=Object.keys(c.dataTypes),f.map((function(e){return v.map((function(a){return e[a]}))}))),h.parseError=n,h.parseOptions={separator:o,thousandsSeparator:s,decimalsSeparator:i,locale:u,stackDimension:m,unstackedData:r,unstackedColumns:l},h.dataTypes=c.dataTypes,h.chart=d.metadata.id,h.mapping=g,h.visualOptions=b,h}function Ca(e,a){if(!Object(M.has)(e,a))throw console.log("IMPORT ERROR",e,a),new Error("Selected project is not valid");return Object(M.get)(e,a)}function Na(e){if(e.version!==ka)throw new Error("Invalid version number, please use a suitable deserializer");var a,t,n=Ca(e,"chart"),r=ha.find((function(e){return e.metadata.id===n}));if(!r)throw new Error("Unknown chart!");return{userInput:Ca(e,"userInput"),userData:(a=Ca(e,"rawData"),t=Object.keys(Ca(e,"dataTypes")),a.map((function(e){for(var a={},n=0;n<t.length;n++)a[t[n]]=e[n];return a}))),userDataType:Ca(e,"userInputFormat"),parseError:Ca(e,"parseError"),unstackedData:Ca(e,"parseOptions.unstackedData"),unstackedColumns:Ca(e,"parseOptions.unstackedColumns"),dataTypes:Ca(e,"dataTypes"),separator:Ca(e,"parseOptions.separator"),thousandsSeparator:Ca(e,"parseOptions.thousandsSeparator"),decimalsSeparator:Ca(e,"parseOptions.decimalsSeparator"),locale:Ca(e,"parseOptions.locale"),stackDimension:Object(M.get)(e,"parseOptions.stackDimension",void 0),dataSource:Ca(e,"dataSource"),currentChart:r,mapping:Ca(e,"mapping"),visualOptions:Ca(e,"visualOptions")}}var _a=Object(M.keyBy)([n,r],"VERSION");function Sa(e){var a,t=e.onProjectSelected,n=e.setLoadingError,r=Object(l.useCallback)((function(e){var a=new FileReader;a.addEventListener("load",(function(e){try{var a=JSON.parse(e.target.result),r=Object(M.get)(a,"version","unknown");if(_a[r])try{t(_a[r].deserializeProject(a)),n(null)}catch(e){n("Can't open your project. "+e.message)}else n("Can't open your project. Invalid file")}catch(e){n("Can't open your project. "+e.message)}})),e.length&&a.readAsText(e[0])}),[t,n]),o=Object(ga.a)({onDrop:r,accept:".rawgraphs",maxFiles:1}),s=o.getRootProps,i=o.getInputProps,u=o.isDragReject,m=o.isDragAccept;return c.a.createElement("div",Object.assign({className:Be()(fa.a.dropzone,(a={},Object(De.a)(a,fa.a.reject,u),Object(De.a)(a,fa.a.accept,m),a))},s()),c.a.createElement("input",i()),c.a.createElement("span",null,"Drag a file here or "),c.a.createElement(T.a,{className:fa.a["browse-button"],color:"primary"},"Browse"),c.a.createElement("span",null,"a file from your computer"),m&&c.a.createElement("p",null,"All files will be accepted"),u&&c.a.createElement("p",null,"Some files will be rejected"))}function Da(e){var a=e.userInput,t=e.setUserInput,n=e.setLoadingError;return c.a.createElement("textarea",{value:a,onChange:function(e){var a=e.target.value;t(a),n(null)},style:{backgroundColor:"white",border:"1px solid lightgrey",borderRadius:4,width:"100%",padding:"1rem",minHeight:"250px",height:"40vh"}})}var xa=t(134),Ta=t.n(xa);function Ra(e){var a,t=e.setUserInput,n=e.setLoadingError,r=Object(l.useCallback)((function(e){var a=new FileReader;a.addEventListener("load",(function(e){t(e.target.result),n(null)})),e.length&&a.readAsText(e[0])}),[n,t]),o=Object(ga.a)({onDrop:r,accept:"text/csv,text/plain,application/json,application/vnd.ms-excel,text/tsv,text/tab-separated-values",maxFiles:1}),s=o.getRootProps,i=o.getInputProps,u=o.isDragReject,m=o.isDragAccept;return c.a.createElement("div",Object.assign({className:Be()(Ta.a.dropzone,(a={},Object(De.a)(a,Ta.a.reject,u),Object(De.a)(a,Ta.a.accept,m),a))},s()),c.a.createElement("input",i()),c.a.createElement("span",null,"Drag a file here or "),c.a.createElement(T.a,{className:Ta.a["browse-button"],color:"primary"},"Browse"),c.a.createElement("span",null,"a file from your computer"),m&&c.a.createElement("p",null,"All files will be accepted"),u&&c.a.createElement("p",null,"Some files will be rejected"))}var Ia=t(356),La=t.n(Ia);function Ma(e){e.userInput;var a=e.setUserInput,t=e.setLoadingError,n=Object(l.useState)(""),r=Object(u.a)(n,2),o=r[0],s=r[1],i=function(){var e=Object(Qe.a)(Ye.a.mark((function e(n){var r,l;return Ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:r=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),t("Loading error. "+e.t0.message),e.abrupt("return");case 10:return e.next=12,r.text();case 12:l=e.sent,a(l,{type:"url",url:n}),t(null);case 15:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement("input",{className:Be()("w-100",La.a["url-input"]),value:o,onChange:function(e){s(e.target.value),i(e.target.value)}})}function Aa(){return c.a.createElement("div",{className:da.a["loading-component"]},c.a.createElement("div",{className:da.a["bg-animated"]}),c.a.createElement("p",null,"loading..."))}var Fa=t(732);var Pa=function(e){var a=e.variant,t=void 0===a?"warning":a,n=e.message,r=void 0===n?"A default warning message.":n;return c.a.createElement(Fa.a,{variant:t,className:"my-2"},r)};var Va=function(e){var a=e.replaceRequiresConfirmation,t=e.commitDataReplace,n=e.cancelDataReplace,r=Object(l.useState)(!0),o=Object(u.a)(r,2),s=o[0],i=o[1];return c.a.createElement(x.a,{className:"raw-modal",show:s,onHide:function(){i(!1)},backdrop:"static",keyboard:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},c.a.createElement(x.a.Header,null,c.a.createElement(x.a.Title,{as:"h5"},"Warning:"," ","parse-error"===a&&c.a.createElement(c.a.Fragment,null,"parsing error"),a.startsWith("missing-column:")&&c.a.createElement(c.a.Fragment,null,"missing column"),"type-mismatch"===a&&c.a.createElement(c.a.Fragment,null,"data-type mismatch"))),c.a.createElement(x.a.Body,null,"parse-error"===a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"There was an error while parsing new data."),c.a.createElement("p",null,"You can load the new data and try to fix the error or return to the data previously loaded.")),a.startsWith("missing-column:")&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"The data mapping of this project requires the dimension"," ",c.a.createElement("span",{className:"font-weight-bold"},a.split(":")[1]),", that we can't find in the new data."),c.a.createElement("p",null,"You can create a new data mapping with the new data or return to the data previously loaded.")),"type-mismatch"===a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"The data-types previously set for this project can't be applied to the new data."),c.a.createElement("p",null,"You can use the new data and re-set data-types or return to the data previously loaded."))),c.a.createElement(x.a.Footer,null,c.a.createElement(T.a,{variant:"warning",onClick:function(){t()}},"Load new data"),c.a.createElement(T.a,{variant:"secondary",onClick:function(){n()}},"Cancel")))};var Ua=c.a.memo((function(e){var a,t=e.userInput,n=e.setUserInput,r=e.userData,o=e.userDataType,s=e.parseError,i=e.unstackedColumns,m=e.separator,p=e.setSeparator,d=e.thousandsSeparator,g=e.setThousandsSeparator,b=e.decimalsSeparator,f=e.setDecimalsSeparator,v=e.locale,h=e.setLocale,O=e.stackDimension,E=e.dataSource,k=e.data,w=e.loading,C=e.coerceTypes,N=e.loadSample,S=e.handleInlineEdit,D=e.handleStackOperation,x=e.setJsonData,T=(e.resetDataLoader,e.dataLoaderMode),R=e.startDataReplace,I=e.cancelDataReplace,L=e.commitDataReplace,A=e.replaceRequiresConfirmation,F=e.hydrateFromProject,P=Object(l.useState)(),V=Object(u.a)(P,2),U=V[0],B=V[1],q=[{id:"paste",name:"Paste your data",loader:c.a.createElement(Da,{userInput:t,setUserInput:function(e){return n(e,{type:"paste"})},setLoadingError:B}),message:"Copy and paste your data from other applications or websites. You can use tabular (TSV, CSV, DSV) or JSON data.",icon:_.e,allowedForReplace:!0},{id:"upload",name:"Upload your data",loader:c.a.createElement(Ra,{userInput:t,setUserInput:function(e){return n(e,{type:"file"})},setLoadingError:B}),message:"You can load tabular (TSV, CSV, DSV) or JSON data.",icon:_.s,allowedForReplace:!0},{id:"samples",name:"Try our data samples",message:"",loader:c.a.createElement(ea,{onSampleReady:N,setLoadingError:B}),icon:_.l,allowedForReplace:!0},{id:"sparql",name:"SPARQL query SOON!",message:"Load data from a query address.",loader:c.a.createElement(ea,{onSampleReady:N}),icon:_.g,disabled:!0,allowedForReplace:!0},{id:"url",name:"From URL",message:"Enter a web address (URL) pointing to the data (e.g. a public Dropbox file, a public API, ...). Please, be sure the server is CORS-enabled.",loader:c.a.createElement(Ma,{userInput:t,setUserInput:function(e,a){return n(e,a)},setLoadingError:B}),icon:_.p,disabled:!1,allowedForReplace:!0},{id:"project",name:"Open your project",message:"Load a .rawgraphs project.",loader:c.a.createElement(Sa,{onProjectSelected:F,setLoadingError:B}),icon:_.k,allowedForReplace:!1}],z=Object(l.useState)(0),G=Object(u.a)(z,2),W=G[0],H=G[1],K=q[W];a=r&&k?c.a.createElement(Je,{userDataset:r,dataset:k.dataset,errors:k.errors,dataTypes:k.dataTypes,coerceTypes:C,onDataUpdate:S}):"json"===o&&null===r?c.a.createElement(ta,{context:JSON.parse(t),selectFilter:function(e){return Array.isArray(e)},onSelect:function(e){x(e)}}):w&&!k?c.a.createElement(Aa,null):c.a.createElement(c.a.Fragment,null,K.loader,c.a.createElement("p",{className:"mt-3"},K.message));var J=Object(l.useCallback)((function(){window.location.replace(window.location.pathname)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,null,!r&&c.a.createElement(y.a,{xs:3,lg:2,className:"d-flex flex-column justify-content-start pl-3 pr-0 options"},q.filter((function(e){return T!==Re||e.allowedForReplace})).map((function(e,a){var t=["w-100","d-flex","align-items-center","user-select-none","cursor-pointer",da.a["loading-option"],e.disabled?da.a.disabled:null,e.id!==K.id||o?null:da.a.active,o?da.a.disabled:null].filter((function(e){return null!==e})).join(" ");return c.a.createElement("div",{key:e.id,className:t,onClick:function(){return H(a)}},c.a.createElement(e.icon,{className:"w-25"}),c.a.createElement("h4",{className:"m-0 d-inline-block"},e.name))})),T===Re&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"divider mb-3 mt-0"}),c.a.createElement("div",{className:"w-100 mb-2 d-flex justify-content-center align-items-center ".concat(da.a["start-over"]," user-select-none cursor-pointer"),onClick:J},c.a.createElement(_.c,{className:"mr-2"}),c.a.createElement("h4",{className:"m-0 d-inline-block"},"Reset")),c.a.createElement("div",{className:"w-100 d-flex justify-content-center align-items-center ".concat(da.a["start-over"]," ").concat(da.a.cancel," user-select-none cursor-pointer mb-3"),onClick:function(){I()}},c.a.createElement("h4",{className:"m-0 d-inline-block"},"Cancel")))),r&&c.a.createElement(y.a,{xs:3,lg:2,className:"d-flex flex-column justify-content-start pl-3 pr-0 options"},c.a.createElement(ma,{locale:v,setLocale:h,separator:m,setSeparator:p,thousandsSeparator:d,setThousandsSeparator:g,decimalsSeparator:b,setDecimalsSeparator:f,dimensions:k?i||k.dataTypes:[],stackDimension:O,setStackDimension:D,userDataType:o,dataSource:E,onDataRefreshed:function(e){return n(e,E)}}),c.a.createElement("div",{className:"divider mb-3 mt-0"}),c.a.createElement("div",{className:"w-100 mb-2 d-flex justify-content-center align-items-center ".concat(da.a["start-over"]," user-select-none cursor-pointer"),onClick:J},c.a.createElement(_.c,{className:"mr-2"}),c.a.createElement("h4",{className:"m-0 d-inline-block"},"Reset")),c.a.createElement("div",{className:"w-100 d-flex justify-content-center align-items-center ".concat(da.a["start-over"]," user-select-none cursor-pointer"),onClick:function(){H(0),R()}},c.a.createElement(_.a,{className:"mr-2"}),c.a.createElement("h4",{className:"m-0 d-inline-block"},"Change data"))),c.a.createElement(y.a,null,c.a.createElement(j.a,{className:"h-100"},c.a.createElement(y.a,{className:"h-100"},a,k&&!s&&0===Object(M.get)(k,"errors",[]).length&&c.a.createElement(Pa,{variant:"success",message:c.a.createElement("span",null,c.a.createElement("span",{className:"font-weight-bold"},k.dataset.length," rows")," ","(",k.dataset.length*Object.keys(k.dataTypes).length," ","cells) have been successfully parsed, now you can choose a chart!")}),s&&c.a.createElement(Pa,{variant:"danger",message:s}),Object(M.get)(k,"errors",[]).length>0&&c.a.createElement(Pa,{variant:"warning",message:function(e){var a=Object(M.get)(e,"errors",[]),t=e.dataset.length-a.length,n=a[0].row+1,r=Object.keys(a[0].error)[0];return c.a.createElement("span",null,"Ops, please check ",c.a.createElement("span",{className:"font-weight-bold"},"row ",n)," at column ",c.a.createElement("span",{className:"font-weight-bold"},r),"."," ",2===a.length&&c.a.createElement(c.a.Fragment,null," ","There's another issue at row"," ",c.a.createElement("span",{className:"font-weight-bold"},a[1].row+1),"."," "),a.length>2&&c.a.createElement(c.a.Fragment,null," ","There are issues in"," ",c.a.createElement("span",{className:"font-weight-bold"},a.length-1)," more rows."," "),t>0&&c.a.createElement(c.a.Fragment,null,"The remaining"," ",c.a.createElement("span",{className:"font-weight-bold"},t," row",t>1&&c.a.createElement(c.a.Fragment,null,"s"))," ","look",1===t&&c.a.createElement(c.a.Fragment,null,"s")," fine."))}(k)}),U&&c.a.createElement(Pa,{variant:"danger",message:U}))))),A&&c.a.createElement(Va,{replaceRequiresConfirmation:A,commitDataReplace:L,cancelDataReplace:I}))})),Ba=t(357),qa=t.n(Ba),za=t(135),Ga=t.n(za);function Wa(e,a){return"All charts"===a?e:e.filter((function(e){return-1!==e.metadata.categories.indexOf(a)}))}var Ha=c.a.memo((function(e){var a=e.availableCharts,t=e.currentChart,n=e.setCurrentChart,r=Object(l.useState)("All charts"),o=Object(u.a)(r,2),s=o[0],i=o[1],m=Object(l.useMemo)((function(){return Wa(a,s)}),[a,s]),p=Object(l.useCallback)((function(e){i(e);var r=Wa(a,e);-1===r.indexOf(t)&&n(r[0])}),[a,t,n]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,null,c.a.createElement(y.a,{className:"text-right"},"Show",c.a.createElement(na.a,{className:"d-inline-block ml-2 raw-dropdown"},c.a.createElement(na.a.Toggle,{variant:"white",className:"pr-5"},s.charAt(0).toUpperCase()+s.slice(1)),c.a.createElement(na.a.Menu,null,c.a.createElement(na.a.Item,{key:"All charts",onClick:function(){return p("All charts")}},"All charts"),qa()(a.map((function(e){return e.metadata.categories})).flat()).map((function(e){return c.a.createElement(na.a.Item,{key:e,onClick:function(){return p(e)}},e.charAt(0).toUpperCase()+e.slice(1))})))))),c.a.createElement(j.a,null,c.a.createElement(y.a,{xs:3,className:"pt-3"},t&&c.a.createElement(Ze.a,{className:Ga.a.currentChart},c.a.createElement(Ze.a.Img,{variant:"top",src:t.metadata.thumbnail}),c.a.createElement(Ze.a.Body,null,c.a.createElement(Ze.a.Title,{className:"m-0"},c.a.createElement("h2",{className:"m-0"},t.metadata.name)),c.a.createElement(Ze.a.Subtitle,{className:"m-0"},c.a.createElement("h4",{className:"mb-2"},t.metadata.category)),c.a.createElement(Ze.a.Text,null,t.metadata.description),c.a.createElement(Ze.a.Link,{className:"".concat(Ga.a.disabled," underlined"),href:t.metadata.code,target:"_blank"},c.a.createElement(_.n,{color:"black"})," Code"),c.a.createElement(Ze.a.Link,{className:"".concat(Ga.a.disabled," underlined"),href:t.metadata.tutorial,target:"_blank"},c.a.createElement(_.n,{color:"black"})," Tutorial")))),c.a.createElement(y.a,null,c.a.createElement(j.a,null,m.map((function(e,a){return c.a.createElement(y.a,{xs:4,key:"chart-"+a,className:"p-3"},c.a.createElement(Ze.a,{onClick:function(){n(e)},className:"flex-row h-100 cursor-pointer ".concat(e===t?"active":"")},c.a.createElement("div",{className:"h-100 w-25 ".concat(Ga.a.thumbnail),style:{backgroundImage:'url("'.concat(e.metadata.icon,'")')}}),c.a.createElement(Ze.a.Body,{className:"w-75 px-2 py-3"},c.a.createElement(Ze.a.Title,{className:"m-0"},c.a.createElement("h2",{className:"m-0",style:{whiteSpace:"nowrap"}},e.metadata.name)),c.a.createElement(Ze.a.Subtitle,{className:"m-0"},c.a.createElement("h4",{className:"m-0"},e.metadata.categories.join(", ").charAt(0).toUpperCase()+e.metadata.categories.join(", ").slice(1))))))}))))))})),Ka=t(47),Ja=t.n(Ka),Xa=t(362),Ya=t(734),Qa=t(745),Za=t(34),$a=t.n(Za),et=function(e){var a=e.dimensionName,t=e.dimensionType,n=e.commitLocalMapping,r=e.rollbackLocalMapping,l=Object(Qa.a)({item:{id:a,type:"column"},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,a){a.didDrop()?n():r()}}),o=Object(u.a)(l,2),s=o[0].isDragging,i=o[1],p=Object(m.q)(t),d=be[p];return c.a.createElement("div",{ref:i,className:"column-card ".concat($a.a["column-card"]," ").concat(s?"is-dragging":"")},c.a.createElement(d,{className:$a.a["data-type-icon"]}),c.a.createElement("span",{className:$a.a["column-title"]},a))},at=t(733);var tt=function(e){var a=e.type,t=be[a];return c.a.createElement("span",null,c.a.createElement(Ve.a,{key:"top",placement:"top",overlay:c.a.createElement(at.a,{id:"tooltip-top"},"Accepts ",a,"s")},c.a.createElement(t,{className:$a.a["accepted-type-icon"]})))};function nt(){return(nt=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function rt(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var lt=c.a.createElement("path",{d:"M8 0a1 1 0 0 1 1 1v5.268l4.562-2.634a1 1 0 1 1 1 1.732L10 8l4.562 2.634a1 1 0 1 1-1 1.732L9 9.732V15a1 1 0 1 1-2 0V9.732l-4.562 2.634a1 1 0 1 1-1-1.732L6 8 1.438 5.366a1 1 0 0 1 1-1.732L7 6.268V1a1 1 0 0 1 1-1z"}),ct=function(e){var a=e.svgRef,t=e.title,n=rt(e,["svgRef","title"]);return c.a.createElement("svg",nt({width:16,height:16,fill:"currentColor",className:"bi bi-asterisk",viewBox:"0 0 16 16",ref:a},n),t?c.a.createElement("title",null,t):null,lt)},ot=c.a.forwardRef((function(e,a){return c.a.createElement(ct,nt({svgRef:a},e))}));t.p;var st=function(){return c.a.createElement(Ve.a,{key:"top",placement:"top",overlay:c.a.createElement(at.a,{id:"tooltip-top"},"Mandatory")},c.a.createElement(ot,{width:"1rem",height:"1rem",style:{marginRight:"2px"}}))},it=t(746),ut=t(18),mt=t.n(ut),pt=t(130),dt=t.n(pt),gt=t(195),bt=t.n(gt),ft=t(106),vt=t.n(ft);function ht(e){var a=e.draggingColumn,t=e.index,n=e.isValid,r=e.DataTypeIcon,o=e.columnId,s=e.dimension,i=e.aggregators,m=e.relatedAggregation,p=e.onMove,d=e.onChangeAggregation,g=e.onDeleteItem,b=e.onChangeDimension,f=e.commitLocalMapping,v=e.rollbackLocalMapping,h=(e.onInsertColumn,e.replaceDimension),O=(e.localMappding,Object(l.useRef)(null)),E=Object(it.a)({accept:["column","card"],collect:function(e){return{isOver:e.isOver()&&"column"===e.getItem().type}},hover:function(e,a){if(s.multiple&&O.current){var n=t;if(e.dimensionId===s.id){var r,l=e.index;if(l!==n){var c=null===(r=O.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(c.bottom-c.top)/2,i=a.getClientOffset().y-c.top;l<n&&i<o||l>n&&i>o||(p(l,n),e.index=n)}}}},drop:function(e,a){s.multiple||("column"===e.type?b(t,e.id):h(e.dimensionId,s.id,e.index,t))}}),j=Object(u.a)(E,2),y=j[0].isOver,k=j[1],w=Object(Qa.a)({item:{type:"card",index:t,id:o,dimensionId:s.id},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,a){a.didDrop()?f():v()}}),C=Object(u.a)(w,2),N=C[0].isDragging;return(0,C[1])(k(O)),c.a.createElement("div",{ref:O,style:{opacity:N||a?.5:1},className:Be()("assigned-column",$a.a["column-card"],$a.a["assigned-column"],n?$a.a["column-valid"]:$a.a["column-invalid"],{"border border-danger":y})},c.a.createElement("span",null,!!r&&c.a.createElement(r,{className:$a.a["data-type-icon"]})),c.a.createElement("span",{className:$a.a["column-title"]},o),s.aggregation&&c.a.createElement(na.a,{className:"d-inline-block ml-2 raw-dropdown"},c.a.createElement(na.a.Toggle,{variant:n?"primary":"danger",className:"pr-5"},mt()(Oe,m,m)),c.a.createElement(na.a.Menu,null,i.map((function(e){return c.a.createElement(na.a.Item,{key:e,onClick:function(){return d(t,e)}},mt()(Oe,e,e))})))),c.a.createElement("button",{className:$a.a["remove-assigned"],type:"button",onClick:function(){return g(t)}},c.a.createElement(_.t,null)))}var Ot=Object(m.d)(),Et=[],jt=function(e){var a=e.dimension,t=e.dataTypes,n=e.mapping,r=e.setMapping,o=e.commitLocalMapping,s=e.rollbackLocalMapping,p=e.draggingId,d=e.setDraggingId,g=e.replaceDimension,b=e.localMappding,f=Object(it.a)({accept:["column","card"],collect:function(e){return{isOver:e.isOver()}},drop:function(e,l){if("column"===e.type){var c,o,s=a.aggregation?Object(m.j)(a,t[e.id]):null,u=Object(m.q)(t[e.id]),p=0===(null===(c=a.validTypes)||void 0===c?void 0:c.length)||(null===(o=a.validTypes)||void 0===o?void 0:o.includes(u));r(Object(i.a)(Object(i.a)({},n),{},{ids:(n.ids||[]).concat(dt()()),value:[].concat(Object(Me.a)(n.value||[]),[e.id]),isValid:p,mappedType:u,config:a.aggregation?{aggregation:[].concat(Object(Me.a)(mt()(n,"config.aggregation")||[]),[s])}:void 0}))}else e.dimensionId!==a.id&&g(e.dimensionId,a.id,e.index,n.value?n.value.length:0,!0)}}),v=Object(u.a)(f,2),h=v[0].isOver,O=v[1],E=Object(l.useCallback)((function(e){r(Object(i.a)(Object(i.a)({},n),{},{config:{aggregation:Object(Me.a)(e)}}))}),[n,r]),j=mt()(n,"ids",Et),k=mt()(n,"value",Et),w=mt()(n,"config.aggregation",Et),C=Object(l.useCallback)((function(e,a){var t=Object(Me.a)(w);t[e]=a,E(t)}),[w,E]),N=Object(l.useCallback)((function(e){var a;n.config&&(a=Object(i.a)(Object(i.a)({},n.config),{},{aggregation:n.config.aggregation.filter((function(a,t){return t!==e}))})),r(Object(i.a)(Object(i.a)({},n),{},{ids:n.ids.filter((function(a,t){return t!==e})),value:n.value.filter((function(a,t){return t!==e})),config:a}))}),[n,r]),_=Object(l.useCallback)((function(e,a){r(Object(i.a)(Object(i.a)({},n),{},{value:n.value.map((function(t,n){return n===e?a:t}))}))}),[n,r]),S=Object(l.useCallback)((function(e,a){var t;n.config&&(t=Object(i.a)(Object(i.a)({},n.config),{},{aggregation:bt()(n.config.aggregation,e,a)})),r(Object(i.a)(Object(i.a)({},n),{},{ids:bt()(n.ids,e,a),value:bt()(n.value,e,a),config:t}),!0)}),[n,r]),D=Object(l.useCallback)((function(e,l){var c,o,s=a.aggregation?Object(m.j)(a,t[l.id]):null,u=dt()();d(u),r(Object(i.a)(Object(i.a)({},n),{},{ids:vt()(null!==(c=n.ids)&&void 0!==c?c:[],e,u),value:vt()(null!==(o=n.value)&&void 0!==o?o:[],e,l.id),config:a.aggregation?{aggregation:vt()(mt()(n,"config.aggregation",[]),e,s)}:void 0}),!0)}),[t,a,n,d,r]);return c.a.createElement(y.a,{xs:6,lg:4,xl:4},c.a.createElement("div",{className:$a.a["chart-dimension"]+" user-select-none"},c.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center ".concat($a.a["chart-dimension-header"])},c.a.createElement("span",{className:"text-left"},a.validTypes.map((function(e){return c.a.createElement(tt,{key:e,type:e})}))),c.a.createElement("span",{className:"text-capitalize text-center"},a.name),c.a.createElement("span",{className:$a.a["dimension-required"]+" text-right",style:{opacity:a.required?1:0}},a.required&&c.a.createElement(st,null))),j.map((function(e,n){var r,l,i=k[n],u=Object(m.q)(t[i]),d=a.aggregation?w[n]||Object(m.j)(a,u):void 0,f=0===(null===(r=a.validTypes)||void 0===r?void 0:r.length)||(null===(l=a.validTypes)||void 0===l?void 0:l.includes(u)),v=be[Object(m.q)(t[i])];return c.a.createElement(ht,{id:e,key:e,index:n,onMove:S,onChangeDimension:_,onChangeAggregation:C,onDeleteItem:N,isValid:f,DataTypeIcon:v,columnId:i,dimension:a,aggregators:Ot,relatedAggregation:d,commitLocalMapping:o,rollbackLocalMapping:s,onInsertColumn:D,draggingColumn:p===e,replaceDimension:g,localMappding:b})})),(a.multiple||0===k.length)&&c.a.createElement("div",{className:Be()("dropzone",$a.a.dropzone,Object(De.a)({},$a.a.active,h)),ref:O},!a.multiple&&"Drop dimension here",a.multiple&&0===k.length&&"Drop dimensions here",a.multiple&&k.length>0&&"Drop another dimension here")))};function yt(e,a){var t;return e.config&&(t=Object(i.a)(Object(i.a)({},e.config),{},{aggregation:e.config.aggregation.filter((function(e,t){return t!==a}))})),Object(i.a)(Object(i.a)({},e),{},{ids:e.ids.filter((function(e,t){return t!==a})),value:e.value.filter((function(e,t){return t!==a})),config:t})}function kt(e,a,t){return e.map((function(e,n){return n===a?t:e}))}function wt(e,a,t,n,r,l,c,o){var s,u,p,d,g,b,f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],v={};v.aggregation=null===(s=a[t])||void 0===s||null===(u=s.config)||void 0===u||null===(p=u.aggregation)||void 0===p?void 0:p[r],v.value=a[t].value[r];var h,O=f?vt.a:kt,E=a[n]||{},j=Object(i.a)(Object(i.a)({},E),{},{ids:O(null!==(d=E.ids)&&void 0!==d?d:[],l,e),value:O(null!==(g=E.value)&&void 0!==g?g:[],l,v.value)}),y=c[n];c.aggregation&&(h=v.aggregation?v.aggregation:Object(m.j)(y,o[v.value]),j.config={aggregation:O(mt()(E,"config.aggregation",[]),l,h)});var k=Object(i.a)(Object(i.a)({},a),{},(b={},Object(De.a)(b,t,yt(a[t],r)),Object(De.a)(b,n,j),b));return k}var Ct=c.a.memo(c.a.forwardRef((function(e,a){var t=e.dataTypes,n=e.dimensions,r=e.mapping,o=e.setMapping,s=Object(l.useState)(r),m=Object(u.a)(s,2),p=m[0],d=m[1],g=Object(l.useCallback)((function(e,a,t){d((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(De.a)({},e,a))})),t||o((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(De.a)({},e,a))}))}),[o]),b=Object(l.useCallback)((function(e,a,r,l){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=dt()();c&&O(s),d((function(o){return wt(s,o,e,a,r,l,n,t,c)})),c||o((function(c){return wt(s,c,e,a,r,l,n,t)}))}),[t,n,o]),f=Object(l.useState)(null),v=Object(u.a)(f,2),h=v[0],O=v[1],E=Object(l.useCallback)((function(){d(r),O(null)}),[r]),k=function(){o(w.current),O(null)},w=Object(l.useRef)();return Object(l.useEffect)((function(){w.current=p})),Object(l.useImperativeHandle)(a,(function(){return{clearLocalMapping:function(){d({})}}})),c.a.createElement(Ya.a,{backend:Xa.a},c.a.createElement(j.a,null,c.a.createElement(y.a,{xs:3},c.a.createElement("h5",{className:"text-uppercase"},"Dimensions"),Ja()(t,(function(e,a){return c.a.createElement(et,{key:a,dimensionName:a,dimensionType:e,commitLocalMapping:k,rollbackLocalMapping:E})}))),c.a.createElement(y.a,null,c.a.createElement("h5",{className:"text-uppercase"},"Chart Variables"),c.a.createElement(j.a,{className:"sticky-top",style:{top:"calc(var(--header-height) + 16px)"}},n.map((function(e){return c.a.createElement(jt,{key:e.id,dimension:e,dataTypes:t,mapping:p[e.id]||{},setMapping:function(a){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return g(e.id,a,t)},commitLocalMapping:k,rollbackLocalMapping:E,draggingId:h,setDraggingId:O,replaceDimension:b,localMappding:p})}))))))}))),Nt=t(41),_t=t.n(Nt),St=c.a.memo((function(e){var a=e.options,t=void 0===a?[]:a,n=e.value,r=e.error,l=e.onChange,o=e.default,s=e.label,i=Object(Ae.a)(e,["options","value","error","onChange","default","label"]);return c.a.createElement(j.a,{className:i.className},c.a.createElement(y.a,{xs:6,className:"d-flex align-items-center nowrap"},s),c.a.createElement(y.a,{xs:6},c.a.createElement("select",{className:"custom-select raw-select",value:null!==n&&void 0!==n?n:o,onChange:function(e){var a=e.target.value,t="number"===i.type?Number(a):a;l(t)}},t.map((function(e){return _t()(e)?c.a.createElement("option",{key:e.value,value:e.value},e.label):c.a.createElement("option",{key:e,value:e},e)}))),r&&c.a.createElement("small",null,c.a.createElement("i",null,r))))})),Dt=c.a.memo((function(e){var a=e.value,t=e.error,n=e.onChange,r=e.default,l=e.label,o=e.isEnabled,s=Object(Ae.a)(e,["value","error","onChange","default","label","isEnabled"]);return s.options?c.a.createElement(St,Object.assign({value:a,error:t,onChange:n,default:r,disabled:!o,label:l},s)):c.a.createElement(j.a,{className:s.className},c.a.createElement(y.a,{xs:6,className:"d-flex align-items-center nowrap"},l),c.a.createElement(y.a,{xs:6},c.a.createElement("input",{className:"w-100 form-control text-field",type:"number",value:null!==a&&void 0!==a?a:"",step:s.step,min:s.min,max:s.max,disabled:!o,onChange:function(e){var a=e.target.value;if(""===a)n(void 0);else{var t=parseFloat(a);isNaN(t)?n(void 0):n(t)}},placeholder:r})),t&&c.a.createElement("small",null,c.a.createElement("i",null,t)))})),xt=c.a.memo((function(e){var a=e.value,t=e.error,n=e.onChange,r=e.default,l=e.label,o=e.isEnabled,s=Object(Ae.a)(e,["value","error","onChange","default","label","isEnabled"]);return s.options?c.a.createElement(St,Object.assign({value:a,error:t,onChange:n,default:r,label:l},s)):c.a.createElement("label",{className:"d-block"},c.a.createElement("b",null,l),c.a.createElement("br",null),c.a.createElement("input",{type:"text",value:null!==a&&void 0!==a?a:"",step:s.step,disabled:!o,onChange:function(e){n(e.target.value)},placeholder:r}),t&&c.a.createElement("small",null,c.a.createElement("i",null,t)))})),Tt=t(136),Rt=t.n(Tt),It=t(359);function Lt(e){var a=e.color,t=e.onChange,n=e.disabled,r=Object(l.useState)(!1),o=Object(u.a)(r,2),s=o[0],i=o[1],m=null!==a&&void 0!==a?a:"#000000";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Rt.a.swatch,onClick:function(){return i(!0)}},c.a.createElement("div",{className:Rt.a.color,style:{background:m}}),m.toUpperCase()),s&&c.a.createElement("div",{className:Rt.a.popover},c.a.createElement("div",{className:Rt.a.cover,onClick:function(){return i(!1)}}),c.a.createElement(It.SketchPicker,{disabled:n,disableAlpha:!0,color:m,onChangeComplete:function(e){return t(e.hex)}})))}var Mt=c.a.memo((function(e){var a=e.value,t=e.error,n=e.onChange,r=e.default,l=e.label,o=e.isEnabled,s=Object(Ae.a)(e,["value","error","onChange","default","label","isEnabled"]);return s.options?c.a.createElement(St,Object.assign({value:a,error:t,onChange:n,default:r,label:l},s)):c.a.createElement("label",{className:s.className+" row"},c.a.createElement(y.a,{xs:6,className:"d-flex align-items-center"},l),c.a.createElement(y.a,{xs:6},c.a.createElement(Lt,{disabled:!o,color:a,onChange:n})),t&&c.a.createElement("small",null,c.a.createElement("i",null,t)))})),At=t(32),Ft=t.n(At),Pt=c.a.memo((function(e){var a,t=e.label,n=e.scale,r=e.numSamples,l=void 0===r?150:r;return a=n.ticks?n.ticks(l):n.domain?n.domain():[],c.a.createElement("div",{className:Ft.a["scheme-preview"]},t&&c.a.createElement("div",{style:{marginBottom:2}},mt()(je,t,t)),c.a.createElement("div",{className:"d-flex"},a.map((function(e){return c.a.createElement("div",{key:"sample-"+e,style:{flex:1,height:10,background:n(e)}})}))))})),Vt=c.a.memo((function(e){var a=e.interpolators,t=e.interpolator,n=e.setInterpolator,r=e.colorDataset,l=e.colorDataType,o=e.scaleType,s=e.currentFinalScale;return c.a.createElement(na.a,{className:"d-inline-block raw-dropdown w-100"},c.a.createElement(na.a.Toggle,{variant:"white",className:"w-100",style:{paddingRight:24},disabled:!l},s&&c.a.createElement(Pt,{scale:s})),l&&c.a.createElement(na.a.Menu,{className:"w-100"},a.map((function(e){return c.a.createElement(na.a.Item,{key:e,onClick:function(){return n(e)},className:Ft.a["color-scheme-dropdown-item"]},r[0]&&m.b[o][t]&&c.a.createElement(Pt,{scale:Object(m.p)(o,Object(m.f)(r,l,o),e),label:e}))}))))}));function Ut(e){var a=e.resetScale;return c.a.createElement(Ve.a,{key:"bottom",placement:"bottom",overlay:c.a.createElement(at.a,{id:"tooltip-top"},"Reset domain")},c.a.createElement("span",{type:"button",className:"btn",onClick:a},c.a.createElement(_.a,{width:"16",height:"16"})))}function Bt(e){var a=e.invertScale;return c.a.createElement(Ve.a,{key:"bottom",placement:"bottom",overlay:c.a.createElement(at.a,{id:"tooltip-top"},"Invert")},c.a.createElement("span",{type:"button",className:"btn",onClick:a},c.a.createElement(_.b,{width:"16",height:"16"})))}function qt(e){var a=e.handleChangeLocked,t=e.locked;return c.a.createElement(Ve.a,{key:"bottom",placement:"bottom",overlay:c.a.createElement(at.a,{id:"tooltip-top"},t?"Unlock":"Lock"," scale")},c.a.createElement("span",{type:"button",className:"btn ".concat(t?"Xbtn-primary":""),onClick:function(){return a(!t)}},t?c.a.createElement(_.r,{width:"16",height:"16"}):c.a.createElement(_.o,{width:"16",height:"16"})))}var zt=t(360),Gt=t.n(zt);function Wt(e){var a=Object(l.useRef)();return Object(l.useEffect)((function(){a.current=e}),[e]),a.current}function Ht(e){return 0===e.userDomain?0:e.userDomain?"date"===Object(m.r)(e.userDomain)?e.userDomain.toISOString().substring(0,10):e.userDomain:""}var Kt=function(e){var a=e.value,t=(e.error,e.onChange),n=e.defaultValue,r=(e.label,e.dimension,e.dataset,e.mapping,e.dataTypes,e.chart,e.mappedData,e.mappingValue),o=e.colorDataset,s=e.colorDataType,p=e.hasAnyMapping,d=Object(Ae.a)(e,["value","error","onChange","defaultValue","label","dimension","dataset","mapping","dataTypes","chart","mappedData","mappingValue","colorDataset","colorDataType","hasAnyMapping"]),g=Object(l.useRef)(!!a.__loaded),b=Object(l.useState)(mt()(a,"scaleType")),f=Object(u.a)(b,2),v=f[0],h=f[1],O=Object(l.useMemo)((function(){var e=mt()(n,"defaultColor","#cccccc");return mt()(a,"defaultColor",e)}),[n,a]),E=Object(l.useState)(mt()(a,"locked")),k=Object(u.a)(E,2),w=k[0],C=k[1],N=Object(l.useMemo)((function(){return Object(m.e)(s,o)}),[s,o]),_=Object(l.useState)(mt()(a,"scaleType")?Object.keys(m.b[mt()(a,"scaleType")]):[]),S=Object(u.a)(_,2),D=S[0],x=S[1],T=Object(l.useState)(mt()(a,"interpolator")),R=Object(u.a)(T,2),I=R[0],L=R[1],M=Object(l.useState)(mt()(a,"userScaleValues",[]).map((function(e){return Object(i.a)(Object(i.a)({},e),{},{userDomain:e.domain,userRange:e.range})}))),A=Object(u.a)(M,2),F=A[0],P=A[1],V=Object(l.useCallback)((function(e,a,t,n){if(a&&e&&m.b[a][e]&&t&&t.length&&t.map((function(e){return e.domain})).filter((function(e){return void 0!==e})).length)return Object(m.g)(o,s,a,e,t)}),[s,o]),U=Object(l.useCallback)((function(e,a){if(!o.length||!s||!a)return[];if(!m.b[a][e])return[];var t=Object(m.f)(o,s,a);return Object(m.n)(t,a,e).map((function(e){return Object(i.a)(Object(i.a)({},e),{},{userRange:e.range,userDomain:e.domain})}))}),[s,o]),B=Object(l.useCallback)((function(e){return e.map((function(e){var a;return{range:e.userRange,domain:"date"===s?null===(a=e.userDomain)||void 0===a?void 0:a.toString():e.userDomain}}))}),[s]),q=Object(l.useMemo)((function(){if(v&&I){var e=F&&F.length?F:U(I,v),a=B(e);return V(I,v,a)}return Object(m.i)()}),[V,U,B,I,v,F]),z=Object(l.useCallback)((function(e){var a=B(e);t({scaleType:v,interpolator:I,userScaleValues:a,defaultColor:O,locked:w})}),[B,v,I,O,w,t]),G=Object(l.useCallback)((function(e,a){var t=Object(Me.a)(F);t[e].userRange=a,P(t),z(t)}),[z,F]),W=Object(l.useCallback)((function(e,a){var t=Object(Me.a)(F);t[e].userDomain=a,P(t),z(t)}),[z,F]),H=Object(l.useCallback)((function(e){h(e);var a=m.b[e]?Object.keys(m.b[e]):[];x(a);var n=a[0];L(n);var r=U(n,e);P(r);var l=B(r);t({scaleType:e,interpolator:n,userScaleValues:l,defaultColor:O,locked:w})}),[U,B,O,t,w]),K=Object(l.useCallback)((function(e,a){L(e);var n=U(e,v);P(n);var r=B(n);if(a){var l=Gt()(a,"domain");r=r.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{range:l[e.domain.toString()]?l[e.domain.toString()].userRange:e.range})}))}t({scaleType:v,interpolator:e,userScaleValues:r,defaultColor:O,locked:w})}),[U,B,t,v,O,w]),J=Object(l.useCallback)((function(e){C(e),g.current=!0,t({scaleType:v,interpolator:I,userScaleValues:F,defaultColor:O,locked:e})}),[v,I,F,O,t]),X=Object(l.useCallback)((function(){K(I,F)}),[K,I,F]),Y=Object(l.useCallback)((function(){var e=Object(Me.a)(F);e.reverse();var a=F.map((function(a,t){return Object(i.a)(Object(i.a)({},a),{},{userRange:e[t].userRange,range:e[t].range})}));P(a),z(a)}),[z,F]),Q=Wt(r);return Object(l.useEffect)((function(){Q&&r!==Q&&(g.current=!1)}),[r,Q]),Object(l.useEffect)((function(){if(!g.current&&!w){var e=N[0];H(e)}}),[N,H,w]),p?c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,{className:d.className,style:{marginTop:"8px",marginBottom:"8px"}},c.a.createElement(y.a,{xs:5,className:"d-flex align-items-center nowrap"},"Color scale"),c.a.createElement(y.a,{xs:7},c.a.createElement(na.a,{className:"d-inline-block raw-dropdown w-100"},c.a.createElement(na.a.Toggle,{variant:"white",className:"w-100",style:{paddingRight:24},disabled:!s},mt()(Ee,v,v)),c.a.createElement(na.a.Menu,{className:"w-100"},N.map((function(e){return c.a.createElement(na.a.Item,{key:e,onClick:function(){return H(e)}},mt()(Ee,e,e))})))))),c.a.createElement(j.a,{className:[d.className].join(" "),style:{marginTop:"8px",marginBottom:"8px"}},c.a.createElement(y.a,{xs:5,className:"d-flex align-items-center nowrap"},"Color scheme"),c.a.createElement(y.a,{xs:7},c.a.createElement(Vt,{interpolators:D,interpolator:I,setInterpolator:K,colorDataset:o,colorDataType:s,scaleType:v,currentFinalScale:q}))),s&&F&&c.a.createElement("div",{className:Ft.a["color-swatches-list"]},F.map((function(e,a){return c.a.createElement(j.a,{key:a,className:[Ft.a["chart-option"],Ft.a["color-swatch"],"ordinal"!==v?Ft.a["not-ordinal"]:Ft.a.ordinal].join(" ")},c.a.createElement(y.a,{xs:12},c.a.createElement("div",{className:Ft.a["color-scale-item"]},"ordinal"===v&&void 0!==mt()(e,"domain")&&c.a.createElement("span",{className:"nowrap text-truncate pr-2",title:e.domain&&e.domain.toString()},""===e.domain?"[empty string]":e.domain.toString()),"ordinal"!==v&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"nowrap"},0===a?"Start":a===F.length-1?"End":"Middle"),c.a.createElement("input",{disabled:w,type:Object(m.r)(e.userDomain),className:"form-control text-field",value:Ht(e),onChange:function(e){W(a,"date"===s?new Date(e.target.value):e.target.value)}})),c.a.createElement(Lt,{color:e.userRange,onChange:function(e){G(a,e)}}))))})),c.a.createElement(j.a,null,c.a.createElement(y.a,{className:"d-flex justify-content-end"},c.a.createElement(Ut,{resetScale:X}),c.a.createElement(Bt,{invertScale:Y}),"ordinal"!==v&&c.a.createElement(qt,{locked:w,handleChangeLocked:J}))))):null},Jt=function(e){var a=e.value,t=(e.error,e.onChange),n=e.default,r=(e.label,e.dimension,e.dataset,e.mapping,e.dataTypes,e.chart,e.mappedData,e.mappingValue,e.colorDataType,e.colorDataset,Object(Ae.a)(e,["value","error","onChange","default","label","dimension","dataset","mapping","dataTypes","chart","mappedData","mappingValue","colorDataType","colorDataset"]),Object(l.useMemo)((function(){var e=mt()(n,"defaultColor","#cccccc");return mt()(a,"defaultColor",e)}),[n,a])),o=Object(l.useState)(r),s=Object(u.a)(o,2),m=s[0],p=s[1],d=Object(l.useCallback)((function(e){p(e);var n=Object(i.a)(Object(i.a)({},a),{},{defaultColor:e});t(n)}),[a,t]);return Object(l.useEffect)((function(){n&&n.defaultColor!==m&&d(n.defaultColor)}),[m,n,d]),c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{className:[Ft.a["chart-option"],"row"].join(" ")},c.a.createElement(y.a,{xs:6,className:"d-flex align-items-center"},"Default"),c.a.createElement(y.a,{xs:6},c.a.createElement(Lt,{color:m,onChange:d}))))},Xt=function(e){var a=e.value,t=e.onChange,n=e.default,r=e.mappingValue,o=e.colorDataType,s=e.colorDataset,i=Object(l.useMemo)((function(){return s&&s.length>0}),[s]);return c.a.createElement(c.a.Fragment,null,!i&&c.a.createElement(Jt,{onChange:t,defaultValue:n,value:a}),i&&c.a.createElement(Kt,{hasAnyMapping:i,mappingValue:r,defaultValue:n,value:a,colorDataType:o,colorDataset:s,onChange:t}))},Yt=t(739),Qt=c.a.memo((function(e){var a=e.optionId,t=e.label,n=e.value,r=e.error,l=e.onChange,o=e.className,s=e.isEnabled;return c.a.createElement(j.a,{className:o},c.a.createElement(y.a,{xs:6,className:"d-flex align-items-center nowrap"},t),c.a.createElement(Yt.a,{className:"col-6 d-flex align-items-center"},c.a.createElement(Yt.a.Check,{type:"switch",checked:!!n,disabled:!s,onChange:function(e){l(e.target.checked)},id:a,label:n?"Yes":"No"})),r&&c.a.createElement("div",{className:"col-12"},c.a.createElement("small",null,c.a.createElement("i",null,r))))})),Zt=t(245),$t=t.n(Zt),en={number:Dt,text:xt,color:Mt,colorScale:Xt,boolean:Qt};function an(e,a,t){var n=mt()(e[a],"value[".concat(t,"]"));return Object(i.a)(Object(i.a)({},e),{},Object(De.a)({},a,Object(i.a)(Object(i.a)({},e[a]),{},{value:[n]})))}function tn(e,a,t){return Array.isArray(e)?e.map((function(e){var n=mt()(e[a],"[".concat(t,"]"));return Object(i.a)(Object(i.a)({},e),{},Object(De.a)({},a,n))})):e}function nn(e,a){return Array.isArray(e.repeatDefault)?mt()(e.repeatDefault,"[".concat(a,"]"),e.default):e.default}function rn(e){var a=e.type,t=e.optionId,n=e.setVisualOptions,r=e.label,o=e.repeatIndex,s=Object(Ae.a)(e,["type","optionId","setVisualOptions","label","repeatIndex"]),u=en[a],p=Object(l.useMemo)((function(){return"colorScale"!==a?null:Object.keys($t()(s.visualOptions,t)).map((function(e){return JSON.stringify(mt()(s.visualOptions,e,""))})).join("-")}),[a,s.visualOptions,t]),d=Object(l.useMemo)((function(){if("colorScale"!==a)return null;if(!s.domain||!s.chart[s.domain])return null;try{return s.chart[s.domain](s.mappedData,s.mapping,s.visualOptions)}catch(e){return null}}),[a,s.chart,s.domain,s.mappedData,s.mapping,p]),g=Object(l.useMemo)((function(){return"colorScale"!==a?null:d?"__custom__":mt()(s.mapping,"[".concat(s.dimension,"].value"))}),[d,s.dimension,s.mapping,a]),b=Object(l.useMemo)((function(){return"colorScale"!==a?null:d?d.type:s.dataTypes[g]?Object(m.q)(s.dataTypes[g]):"string"}),[a,s.dataTypes,d,g]),f=Object(l.useMemo)((function(){return"colorScale"!==a?null:d?d.domain:s.mappedData?s.mappedData.map((function(e){return mt()(e,s.dimension)})).filter((function(e){return void 0!==e&&!(Array.isArray(e)&&!e.length)})):[]}),[a,s.dimension,d,s.mappedData]),v=Object(l.useCallback)((function(e){n((function(a){var n=e;return void 0!==o&&((n=a[t]||[])[o]=e),Object(i.a)(Object(i.a)({},a),{},Object(De.a)({},t,n))}))}),[t,o,n]);return c.a.createElement(u,Object.assign({type:a,domainFromChart:d,mappingValue:g,colorDataType:b,colorDataset:f,optionId:t,label:void 0!==o?c.a.createElement(c.a.Fragment,null,r," (",o+1,")"):r},$t()(s,["mapping","visualOptions","chart","dataset","dataTypes","mappedData"]),{onChange:v}))}var ln=function(e){var a=e.chart,t=e.dataset,n=e.mapping,r=e.dataTypes,o=e.visualOptions,s=e.setVisualOptions,p=e.error,d=e.mappedData,g=Object(l.useMemo)((function(){return Object(m.o)(null===a||void 0===a?void 0:a.visualOptions)}),[a]),b=Object(l.useState)((function(){var e={};for(var a in g){var t=g[a].group;e.hasOwnProperty(t)||(e[t]=!0)}return e})),f=Object(u.a)(b,2),v=f[0],h=f[1],O=Object(l.useMemo)((function(){return Object(m.m)(g,o,n)}),[g,o,n]),E=Object(l.useMemo)((function(){var e={};for(var a in g){var t=g[a].group;e.hasOwnProperty(t)||(e[t]="artboard"!==t)}return h(e),Object.keys(g).reduce((function(e,a){var t=g[a],n=(null===t||void 0===t?void 0:t.group)||"";return e[n]||(e[n]={}),e[n][a]=t,e}),{})}),[g]),k=Object(l.useMemo)((function(){var e=Object(m.k)(g,n),a=Object(i.a)(Object(i.a)({},e),o);return Object(m.h)(g,a)}),[n,g,o]);return c.a.createElement("div",{className:[Ft.a["chart-options"],"col-4","col-xl-3"].join(" ")},Ja()(E,(function(e,l){return c.a.createElement("div",{key:l,groupname:l,className:[Ft.a["options-group"],v[l]?Ft.a.collapsed:""].join(" ")},c.a.createElement(j.a,{className:"sticky-top"},c.a.createElement(y.a,{className:"d-flex justify-content-between align-items-center ".concat(Ft.a["group-header"])},c.a.createElement("h5",{className:"text-uppercase m-0"},l),c.a.createElement("span",{className:[Ft.a["collapse-button"],"cursor-pointer"].join(" "),onClick:function(){return h(Object(i.a)(Object(i.a)({},v),{},Object(De.a)({},l,!v[l])))}}))),Ja()(e,(function(e,l){var i;return e.repeatFor?mt()(n,"[".concat(e.repeatFor,"].value"),[]).map((function(i,u){var m,g,b;return c.a.createElement(rn,Object.assign({className:Ft.a["chart-option"],key:l+u,repeatIndex:u},e,{optionId:l,error:null===p||void 0===p||null===(m=p.errors)||void 0===m?void 0:m[l+u],value:null!==(g=null===o||void 0===o||null===(b=o[l])||void 0===b?void 0:b[u])&&void 0!==g?g:nn(e,u),mapping:"colorScale"===e.type?an(n,e.repeatFor,u):void 0,chart:"colorScale"===e.type?a:void 0,dataset:"colorScale"===e.type?t:void 0,dataTypes:"colorScale"===e.type?r:void 0,visualOptions:"colorScale"===e.type?o:void 0,mappedData:tn(d,e.repeatFor,u),setVisualOptions:s,isEnabled:O[l]}))})):c.a.createElement(rn,Object.assign({className:Ft.a["chart-option"],key:l},e,{optionId:l,error:null===p||void 0===p||null===(i=p.errors)||void 0===i?void 0:i[l],value:null===o||void 0===o?void 0:o[l],mapping:"colorScale"===e.type?n:void 0,chart:"colorScale"===e.type?a:void 0,dataset:"colorScale"===e.type?t:void 0,dataTypes:"colorScale"===e.type?r:void 0,visualOptions:"colorScale"===e.type?o:void 0,mappedData:d,setVisualOptions:s,isEnabled:O[l]}))})),"artboard"===l&&o.showLegend&&c.a.createElement("p",{className:"small"},"The final output will be ",null===k||void 0===k?void 0:k.width,"px *"," ",null===k||void 0===k?void 0:k.height,"px including the legend."))})))};var cn=c.a.memo((function(e){var a=e.chart,t=e.dataset,n=e.dataTypes,r=e.mapping,o=e.visualOptions,s=e.error,i=e.setError,p=e.setRawViz,d=e.mappedData,g=Object(l.useRef)(null),b=function(e,a){var t=Object(l.useState)(e),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(l.useEffect)((function(){var t=setTimeout((function(){c(e)}),a);return function(){clearTimeout(t)}}),[e,a]),r}(o,200);return Object(l.useEffect)((function(){i(null);var e=[];for(var l in r)r[l].ids&&r[l].ids.length>0&&e.push(l);var o=a.dimensions.filter((function(a){return a.required&&-1===e.indexOf(a.id)}));if(o.length>0){var s=c.a.createElement("span",null,"Required chart variables: you need to map"," ",o.map((function(e,a){return c.a.createElement("span",{key:a,className:"font-weight-bold"},e.name)})).reduce((function(e,a){return[e," and ",a]})));for(i({variant:"secondary",message:s}),p(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild)}else{var u=a.dimensions.filter((function(e){return e.multiple&&e.required&&e.minValues&&r[e.id].ids.length<e.minValues}));if(u.length>0){var f=c.a.createElement("span",null,"Please map"," ",u.map((function(e){return c.a.createElement(c.a.Fragment,null,"at least ",c.a.createElement("span",{className:"font-weight-bold"},e.minValues)," ","dimensions on ",c.a.createElement("span",{className:"font-weight-bold"},e.name))})).reduce((function(e,a){return[e," and ",a]})),".");for(i({variant:"secondary",message:f}),p(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild)}else{var v=function(e){if(r[e].ids&&r[e].ids.length>0&&!r[e].isValid){var t=a.dimensions.find((function(a){return a.id===e})),n="Data-type mismatch: you can\u2019t map ".concat(r[e].mappedType,"s on ").concat(t.name,".");for(i({variant:"danger",message:n}),p(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild);return{v:void 0}}};for(var h in r){var O=v(h);if("object"===typeof O)return O.v}if(d)try{var E=Object(m.a)(a,{data:t,mapping:r,dataTypes:n,visualOptions:b});try{var j=E.renderToDOM(g.current,d);p(j),i(null)}catch(y){console.log("chart error",y),i({variant:"danger",message:"Chart error. "+y.message}),p(null)}}catch(y){for(;g.current.firstChild;)g.current.removeChild(g.current.firstChild);console.log({e:y}),i({variant:"danger",message:"Chart error. "+y.message}),p(null)}else for(p(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild)}}}),[i,b,p,d,a,r]),c.a.createElement("div",{className:"col-8 col-xl-9"},c.a.createElement("div",{className:["overflow-auto","position-sticky"].join(" "),style:{top:"calc(15px + var(--header-height))"}},s&&c.a.createElement(Pa,{variant:s.variant,message:s.message}),c.a.createElement("div",{ref:g})))})),on=function(e){var a=e.chart,t=e.dataset,n=e.dataTypes,r=e.mapping,o=e.visualOptions,s=e.setVisualOptions,i=e.setRawViz,m=e.setMappingLoading,p=Object(l.useState)({variant:"secondary",message:"Required chart variables"}),d=Object(u.a)(p,2),g=d[0],b=d[1],f=Object(l.useState)(null),v=Object(u.a)(f,2),h=v[0],O=v[1];return Object(l.useEffect)((function(){try{m(!0),function(e,a){var t=a.data,n=a.mapping,r=a.visualOptions,l=a.dataTypes;try{I.terminate()}catch(c){}return I=new ke,ye.a(I).mapData(e,{data:t,mapping:n,visualOptions:r,dataTypes:l})}(a.metadata.name,{data:t,mapping:r,dataTypes:n}).then((function(e){m(!1),O(e)})).catch((function(e){console.error(e),m(!1),O(null)}))}catch(e){console.error(e),m(!1),O(null)}}),[a,r,n,b,i,m,t]),c.a.createElement(j.a,null,c.a.createElement(ln,{chart:a,dataset:t,mapping:r,dataTypes:n,visualOptions:o,setVisualOptions:s,error:g,mappedData:h}),c.a.createElement(cn,{chart:a,dataset:t,dataTypes:n,mapping:r,visualOptions:o,error:g,setError:b,setRawViz:i,mappedData:h}))},sn=t(735),un=t(736);function mn(e,a){var t=document.createElement("a");return t.href=e,t.download=a||"download",t.click(),t}function pn(e){var a=e.rawViz,t=e.exportProject,n=Object(l.useCallback)((function(e){var t=(new XMLSerializer).serializeToString(a._node.firstChild),n=window.URL||window.webkitURL||window,r=new Blob([t],{type:"image/svg+xml;charset=utf-8"});mn(n.createObjectURL(r),e),n.revokeObjectURL(r)}),[a]),r=Object(l.useCallback)((function(e,t){var n=(new XMLSerializer).serializeToString(a._node.firstChild),r=window.URL||window.webkitURL||window,l=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),c=r.createObjectURL(l),o=document.createElement("canvas");o.height=a._node.firstChild.clientHeight,o.width=a._node.firstChild.clientWidth;var s=o.getContext("2d"),i=new Image;i.onload=function(){s.drawImage(i,0,0),mn(o.toDataURL(e),t),r.revokeObjectURL(l)},i.src=c}),[a]),o=Object(l.useCallback)((function(e){var a=t(),n=JSON.stringify(a),r=new Blob([n],{type:"application/json"}),l=window.URL||window.webkitURL||window,c=l.createObjectURL(r);mn(c,e),l.revokeObjectURL(c)}),[t]),s=Object(l.useState)("svg"),i=Object(u.a)(s,2),m=i[0],p=i[1],d=Object(l.useState)("viz"),g=Object(u.a)(d,2),b=g[0],f=g[1],v=Object(l.useCallback)((function(){switch(m){case"svg":n("".concat(b,".svg"));break;case"png":r("image/png","".concat(b,".png"));break;case"jpg":r("image/jpeg","".concat(b,".jpg"));break;case"rawgraphs":o("".concat(b,".rawgraphs"))}}),[b,m,r,o,n]);return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col col-sm-3"},c.a.createElement(sn.a,{className:"mb-3 raw-input-group"},c.a.createElement("input",{type:"text",className:"form-control text-field",value:b,onChange:function(e){return f(e.target.value)}}),c.a.createElement(un.a,{as:sn.a.Append,title:".".concat(m),id:"input-group-dropdown-1",className:"raw-dropdown"},["svg","png","jpg","rawgraphs"].map((function(e){return c.a.createElement(na.a.Item,{key:e,onClick:function(){return p(e)}},".",e)}))))),c.a.createElement("div",{className:"col col-sm-2"},c.a.createElement("button",{className:"btn btn-primary btn-block raw-btn",onClick:v},"Download")))}var dn=t(162),gn=t.n(dn),bn=t(361),fn=t.n(bn);var vn=function(){var e=Le(),a=e.userInput,t=e.userData,n=e.userDataType,r=e.parseError,o=e.unstackedData,s=e.unstackedColumns,d=e.data,g=e.separator,b=e.thousandsSeparator,f=e.decimalsSeparator,h=e.locale,O=e.stackDimension,E=e.dataSource,j=e.loading,y=e.hydrateFromSavedProject,k=Object(l.useState)(null),C=Object(u.a)(k,2),N=C[0],_=C[1],S=Object(l.useState)({}),x=Object(u.a)(S,2),T=x[0],R=x[1],I=Object(l.useState)({}),M=Object(u.a)(I,2),A=M[0],F=M[1],P=Object(l.useState)(null),V=Object(u.a)(P,2),U=V[0],B=V[1],q=Object(l.useState)(!1),z=Object(u.a)(q,2),G=z[0],W=z[1],H=Object(l.useRef)(null),K=Object(l.useMemo)((function(){if(mt()(d,"dataTypes"))return Object.keys(d.dataTypes)}),[d]),J=Wt(K),X=Object(l.useCallback)((function(){H.current&&H.current.clearLocalMapping()}),[]);Object(l.useEffect)((function(){J&&(K?J.join(".")!==K.join(".")&&(R({}),X()):(R({}),X()))}),[K,J,X]);var Y=Object(l.useCallback)((function(e){R({}),X(),_(e);var a=Object(m.o)(null===e||void 0===e?void 0:e.visualOptions);F(Object(m.k)(a)),B(null)}),[X]),Q=Object(l.useCallback)((function(){return wa(a,t,n,r,o,s,d,g,b,f,h,O,E,N,T,A)}),[N,d,E,f,h,T,r,g,O,b,t,n,a,A,s,o]),Z=Object(l.useCallback)((function(e){y(e),_(e.currentChart),R(e.mapping);var a=Object(i.a)({},e.visualOptions);Object.keys(a).forEach((function(e){gn()(a[e])&&(a[e].__loaded=!0)})),F(e.visualOptions)}),[y]);return Object(l.useEffect)((function(){var e;_(ha[0]);var a=Object(m.o)(null===(e=ha[0])||void 0===e?void 0:e.visualOptions);F(Object(m.k)(a))}),[]),c.a.createElement("div",{className:"App"},c.a.createElement(v,{menuItems:p}),c.a.createElement("div",{className:"app-sections"},c.a.createElement(w,{title:"1. Load your data",loading:j},c.a.createElement(Ua,Object.assign({},e,{hydrateFromProject:Z}))),d&&c.a.createElement(w,{title:"2. Choose a chart"},c.a.createElement(Ha,{availableCharts:ha,currentChart:N,setCurrentChart:Y})),d&&N&&c.a.createElement(w,{title:"3. Mapping",loading:G},c.a.createElement(Ct,{ref:H,dimensions:N.dimensions,dataTypes:d.dataTypes,mapping:T,setMapping:R})),d&&N&&c.a.createElement(w,{title:"4. Customize"},c.a.createElement(on,{chart:N,dataset:d.dataset,dataTypes:d.dataTypes,mapping:T,visualOptions:A,setVisualOptions:F,setRawViz:B,setMappingLoading:W})),d&&N&&U&&c.a.createElement(w,{title:"5. Export"},c.a.createElement(pn,{rawViz:U,exportProject:Q})),c.a.createElement(D,null),c.a.createElement(fn.a,{location:"bottom",buttonText:"Got it!",style:{background:"#f5f5f5",color:"#646467"},buttonStyle:{background:"#646467",color:"white",fontSize:"13px",borderRadius:"3px",padding:"5px 20px"},buttonClasses:"btn btn-default btn-grey",acceptOnScroll:!0},"This website uses Google Analytics to anonymously collect browsing data."," ",c.a.createElement("a",{href:"https://rawgraphs.io/privacy/",target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-body border-bottom border-dark"},"Learn More"))),c.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(vn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[385,1,2]]]);
//# sourceMappingURL=main.8c44d532.chunk.js.map