(this["webpackJsonprawgraphs-frontend"]=this["webpackJsonprawgraphs-frontend"]||[]).push([[0],{176:function(e,a,t){e.exports={parsingOptions:"ParsingOptions_parsingOptions__K4kyV","refresh-button":"ParsingOptions_refresh-button__3TkLa","separator-preview":"ParsingOptions_separator-preview__1UuQv"}},183:function(e,a,t){e.exports={dropzone:"LoadProject_dropzone__6a5Ft",reject:"LoadProject_reject__1NjN5",accept:"LoadProject_accept__1a3qM","browse-button":"LoadProject_browse-button__Kvg8t"}},184:function(e,a,t){e.exports={dropzone:"UploadFile_dropzone__1h-vB",reject:"UploadFile_reject__2Kpgt",accept:"UploadFile_accept__3mK1X","browse-button":"UploadFile_browse-button__2AUZ1"}},185:function(e,a,t){e.exports={thumbnail:"ChartSelector_thumbnail__1xQ_-",currentChart:"ChartSelector_currentChart__NKILM",disabled:"ChartSelector_disabled__MRXKu"}},186:function(e,a,t){e.exports={swatch:"InlineColorPicker_swatch__11WDP",color:"InlineColorPicker_color__12j-E",popover:"InlineColorPicker_popover__3Hchl",cover:"InlineColorPicker_cover__2KTIs"}},249:function(e,a,t){e.exports={"url-input":"SparqlFetch_url-input__1OTEr","query-input-here":"SparqlFetch_query-input-here__1GTNa","base-iri-input-here":"SparqlFetch_base-iri-input-here__1MbOa"}},45:function(e,a,t){e.exports={"chart-options":"ChartOptions_chart-options__3l80N","chart-option":"ChartOptions_chart-option__AxfdW","color-swatch":"ChartOptions_color-swatch__2yOSf","color-scale-item":"ChartOptions_color-scale-item__3Rhfd",ordinal:"ChartOptions_ordinal__2mFUI","not-ordinal":"ChartOptions_not-ordinal__3DrFs","color-swatches-list":"ChartOptions_color-swatches-list__2EQnZ","options-group":"ChartOptions_options-group__3Zauh","group-header":"ChartOptions_group-header__1X0bJ",collapsed:"ChartOptions_collapsed__pl7d6","collapse-button":"ChartOptions_collapse-button__rUqFX","color-scheme-dropdown-item":"ChartOptions_color-scheme-dropdown-item__1zRUD","scheme-preview":"ChartOptions_scheme-preview__f1lz2"}},468:function(e,a,t){e.exports={navbar:"Header_navbar__359Kr"}},469:function(e,a,t){e.exports={section:"Section_section__2mYr1"}},47:function(e,a,t){e.exports={"column-card":"DataMapping_column-card__2VBWp","column-title":"DataMapping_column-title__2yLXi","data-type-icon":"DataMapping_data-type-icon__fdfcN","chart-dimension":"DataMapping_chart-dimension__2tNga","chart-dimension-header":"DataMapping_chart-dimension-header__3FrwJ","accepted-type-icon":"DataMapping_accepted-type-icon__3XRr1","dimension-required":"DataMapping_dimension-required__1FreW","assigned-column":"DataMapping_assigned-column__3S8Vu","column-valid":"DataMapping_column-valid__1wlKa","column-invalid":"DataMapping_column-invalid__3g-BT","remove-assigned":"DataMapping_remove-assigned__3VE_f",dropzone:"DataMapping_dropzone__2L06t",active:"DataMapping_active__NdQHM"}},471:function(e,a,t){e.exports={footer:"Footer_footer__7dIj9"}},48:function(e,a,t){e.exports={"data-type-selector":"DataGrid_data-type-selector__2on-B","data-type-selector-item":"DataGrid_data-type-selector-item__3xB1K",selected:"DataGrid_selected__iVbJn","date-format-preview":"DataGrid_date-format-preview__f5V3s","data-type-selector-trigger":"DataGrid_data-type-selector-trigger__1yAyi","date-format-selector":"DataGrid_date-format-selector__19SHO","date-format-selector-entry":"DataGrid_date-format-selector-entry__3kPs-","parent-type-selector":"DataGrid_parent-type-selector__8RCk2","column-name":"DataGrid_column-name__q_QPq","has-error":"DataGrid_has-error__jgPR1","raw-col-header":"DataGrid_raw-col-header__2fXsy",unsorted:"DataGrid_unsorted__2dx3u",acs:"DataGrid_acs__-kgxx",desc:"DataGrid_desc__2WpaO"}},503:function(e,a,t){e.exports={"dataset-source":"DataSamples_dataset-source__1NwGz"}},504:function(e,a,t){e.exports={"url-input":"UrlFetch_url-input__3vKK2"}},539:function(e,a,t){e.exports=t(969)},544:function(e,a,t){},549:function(e,a,t){},579:function(e,a){},581:function(e,a){},590:function(e,a){},592:function(e,a){},609:function(e,a){},611:function(e,a){},617:function(e,a){},619:function(e,a){},626:function(e,a){},628:function(e,a){},63:function(e,a,t){e.exports={"loading-option":"DataLoader_loading-option__Spa1h",disabled:"DataLoader_disabled__3RVvn",active:"DataLoader_active__-mHU8","start-over":"DataLoader_start-over__3fWNA",cancel:"DataLoader_cancel__22q8c","loading-component":"DataLoader_loading-component__1zOap","bg-animated":"DataLoader_bg-animated__1j4Qa","bg-animation":"DataLoader_bg-animation__12elS"}},640:function(e,a){},642:function(e,a){},649:function(e,a){},651:function(e,a){},661:function(e,a){},663:function(e,a){},677:function(e,a){},679:function(e,a){},685:function(e,a){},686:function(e,a){},969:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(60),c=t.n(l),o=(t(544),t(11)),i=t(4),s=t(8),u=[{label:"About",slug:"about",href:"https://rawgraphs.io/about"},{label:"GitHub",slug:"github",href:"https://github.com/rawgraphs/rawgraphs-app"}],m=t(468),d=t.n(m),p=t(1035),g=t(1033);function b(e){var a=e.menuItems;return r.a.createElement(p.a,{bg:"white",expand:"lg",sticky:"top",className:d.a.navbar},r.a.createElement(p.a.Brand,{href:"/"},r.a.createElement("b",null,"RAW"),r.a.createElement("span",{className:"text-primary"},"Graphs")," 2.0 beta"),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(g.a,{className:"ml-auto"},a.map((function(e,a){return r.a.createElement(g.a.Link,{key:"item"+a,href:e.href},e.label)})),r.a.createElement("a",{role:"button",href:"https://github.com/rawgraphs/rawgraphs-app/issues",target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-primary ml-2 d-flex flex-column align-items-center justify-content-center"},"Report issue"))))}var f=t(469),v=t.n(f),h=t(1019),O=t(1020),E=t(470),j=t(1021);function y(e){return r.a.createElement(h.a,{fluid:!0,className:[v.a.section,e.className].join(" ")},r.a.createElement(O.a,null,r.a.createElement(E.a,null,r.a.createElement("div",{className:"d-flex align-items-center mb-3"},r.a.createElement("h1",null,e.title),e.loading&&r.a.createElement(j.a,{animation:"border",variant:"primary",style:{width:"2rem",height:"2rem",borderWidth:"2px",marginLeft:"2rem"}})),e.children)))}var w=t(471),k=t.n(w),C=t(29),N=t(311);function _(e){return r.a.createElement(h.a,{fluid:!0,style:{backgroundColor:"var(--dark)"}},r.a.createElement(h.a,{className:k.a.footer},r.a.createElement(O.a,null,r.a.createElement(E.a,{xs:6,sm:{span:5,order:1},lg:{span:3,order:1}},r.a.createElement("p",{className:"Xsmall"},"RAWGraphs is an open source project designed and developed by"," ",r.a.createElement("a",{href:"http://densitydesign.org/",target:"_blank",rel:"noopener noreferrer"},"DensityDesign"),","," ",r.a.createElement("a",{href:"https://calib.ro/",target:"_blank",rel:"noopener noreferrer"},"Calibro")," ","and"," ",r.a.createElement("a",{href:"https://inmagik.com/",target:"_blank",rel:"noopener noreferrer"},"Inmagik"),".",r.a.createElement("br",null),"\xa9 2013-2021"," ",r.a.createElement("a",{href:"https://raw.github.com/rawgraphs/rawgraphs-app/master/LICENSE"},"(Apache License 2.0)"))),r.a.createElement(E.a,{xs:6,sm:{span:5,order:3},lg:{span:3,order:1}},r.a.createElement("p",{className:"Xsmall"})),r.a.createElement(E.a,{xs:6,sm:{span:6,offset:1,order:2},md:{span:3},lg:{offset:0},xl:{span:2,offset:2}},r.a.createElement("p",null,r.a.createElement(C.j,null)," hello at rawgraphs.io"),r.a.createElement("p",null,r.a.createElement(N.b,null)," ",r.a.createElement("a",{href:"https://twitter.com/rawgraphs",target:"_blank",rel:"noopener noreferrer"},"@rawgraphs"))),r.a.createElement(E.a,{xs:6,sm:{span:6,offset:1,order:4},md:{span:2},lg:{offset:0},xl:{span:2,offset:0}},r.a.createElement("p",null,r.a.createElement(N.a,null)," ",r.a.createElement("a",{href:"https://github.com/rawgraphs",target:"_blank",rel:"noopener noreferrer"},"Github")),r.a.createElement("p",null,r.a.createElement(C.d,null)," ",r.a.createElement("a",{href:"https://old.rawgraphs.io",target:"_blank",rel:"noopener noreferrer"},"RAWGraphs v.1"))))))}var S=t(1029),D=t(472);var x,T,R=function(){var e=function(){var e=Object(n.useState)({width:void 0,height:void 0}),a=Object(i.a)(e,2),t=a[0],r=a[1];return Object(n.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}(),a=Object(n.useState)(e.width<992),t=Object(i.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=function(){c(!1),m(!0)};return Object(n.useEffect)((function(){!1===u&&c(e.width<992)}),[u,e]),r.a.createElement(S.a,{className:"raw-modal",show:l,onHide:d,backdrop:"static",keyboard:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(S.a.Header,{closeButton:!0},r.a.createElement(S.a.Title,{as:"h5"},r.a.createElement("span",{role:"img","aria-label":"Party icon"},"\ud83c\udf89")," ","Welcome to the new RAWGraphs!")),r.a.createElement(S.a.Body,null,r.a.createElement("p",{className:"big"},"RAWGraphs 2.0 is designed for ",e.width>=768?"slightly ":" ","bigger screens!"),r.a.createElement("p",null,"Resize your browser window or"," ",r.a.createElement("a",{href:"mailto:?subject=Visit+RAWGraphs+2.0&body=Hello%21%0D%0APlease+do+not+forget+to+take+a+look+at+the+new+version+of+RAWGraphs%21%0D%0A%0D%0AVisit%3A+https%3A%2F%2Fdev.rawgraphs.io%2F%0D%0A%0D%0ASee+you+later%2C%0D%0AThe+RAWGraphs+Team"},r.a.createElement(C.h,null)," send yourself a reminder")," ","to come back at a better time."),r.a.createElement("p",null,"Touch devices are not fully supported yet.")),r.a.createElement(S.a.Footer,null,r.a.createElement(D.a,{variant:"primary",onClick:d},"Got it!")))},L=t(37),A=t(473),F=t(474),M=t(475),I=t(476),P=t(477),U=t(478),q=t(479),V=t(480),B=t(481),G=t(482),W=t(483),z=t(484),H=t(485),K=t(486),Y=t(487),J=t(488),X=t(489),Q=t(490),$=t(491),Z=t(492),ee=t(493),ae=t(494),te=t(495),ne=t(496),re=t(497),le=t(498),ce=t(499),oe=t(500),ie=t(501),se=t(502),ue=C.f,me=C.m,de=C.q,pe={date:ue,number:me,string:de},ge={"ar-EG":A,"ca-ES":F,"cs-CZ":M,"da-DK":I,"de-CH":P,"de-DE":U,"en-CA":q,"en-GB":V,"en-US":B,"es-ES":G,"es-MX":W,"fa-IR":z,"fi-FI":H,"fr-CA":K,"fr-FR":Y,"he-IL":J,"hu-HU":X,"it-IT":Q,"ja-JP":$,"ko-KR":Z,"mk-MK":ee,"nb-NO":ae,"nl-NL":te,"pl-PL":ne,"pt-BR":re,"ru-RU":le,"sv-SE":ce,"uk-UA":oe,"zh-CN":ie,"zh-TW":se},be={"\\t":"Tab",";":"Semicolon",",":"Comma","|":"Pipe"},fe=Object.keys(be),ve={count:"Count",mean:"Average",median:"Median",max:"Max",min:"Min",countDistinct:"Count unique",sum:"Sum",csv:"CSV",csvDistinct:"CSV (unique)"},he={sequential:"Sequential",diverging:"Diverging",ordinal:"Ordinal"},Oe={interpolateBlues:"Blue sequential",interpolateGreens:"Green sequential",interpolateReds:"Red sequential",interpolateRdBu:"RdBu diverging",interpolateBrBG:"BrBG diverging",interpolatePiYG:"PiYG diverging",schemeCategory10:"Categorical 10",interpolateTurbo:"Turbo discrete",interpolateSpectral:"Spectral discrete"},Ee=t(312),je=function(){return new Worker(t.p+"static/js/worker.118fa766.worker.js")};var ye=t(3),we=t(2);var ke=Symbol("RawgraphsSparqlMarker");var Ce=[{dataType:"sparql",parse:function(e,a){if(!0===e[ke])return[e,{}];throw new Error("Not a sparql result")}},{dataType:"json",parse:function(e){var a=e.trim().replace(/^(?=\n)$|^\s*|\s*$|\n\n+/gm,"");return[JSON.parse(a),{}]}},{dataType:"csv",parse:function(e,a){var t=e.trim().replace(/^(?=\n)$|^\s*|\s*$|\n\n+/gm,"");if(a.separator)return[Object(we.dsvFormat)(a.separator).parse(t),{separator:a.separator}];var n,r=[],l=Object(ye.a)(fe);try{for(l.s();!(n=l.n()).done;){var c=n.value.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\t/g,"\t");try{var o=Object(we.dsvFormat)(c).parse(t);(o.length>0&&Object.keys(o[0]).length>1||","===c)&&r.push({separator:c,score:Object.keys(o[0]).length,parsed:o})}catch(i){}}}catch(s){l.e(s)}finally{l.f()}return r.sort((function(e,a){return a.score-e.score})),[r[0].parsed,{separator:r[0].separator}]}}];function Ne(e,a){var t=function(e,a){var t,n=Object(ye.a)(Ce);try{for(n.s();!(t=n.n()).done;){var r=t.value;try{var l=r.parse(e,a),c=Object(i.a)(l,2),o=c[0],s=c[1];return[r.dataType,o,s]}catch(u){}}}catch(m){n.e(m)}finally{n.f()}return[null,null]}(e,a),n=Object(i.a)(t,3),r=n[0],l=n[1],c=n[2];return null===r?[r,l,"Cannot parse dataset! (This should never happen)",{}]:"json"===r?["json",l,null,c]:l.length>0?[r,l,null,c]:[null,null,"We can't parse your data.",{}]}function _e(e){return["string","number","boolean"].includes(typeof e)}var Se=t(16);function De(e,a){return Object(L.flatMap)(e,(function(e){var t=e[a],n=Object(L.omit)(e,a);return Object(L.map)(n,(function(e,n){var r;return r={},Object(Se.a)(r,a,t),Object(Se.a)(r,"column",n),Object(Se.a)(r,"value",e),r}))}))}var xe="direct",Te="replace",Re={};function Le(){var e=Object(n.useState)(""),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(null),c=Object(i.a)(l,2),u=c[0],m=c[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),g=p[0],b=p[1],f=Object(n.useState)(null),v=Object(i.a)(f,2),h=v[0],O=v[1],E=Object(n.useState)(null),j=Object(i.a)(E,2),y=j[0],w=j[1],k=Object(n.useState)([null,null]),C=Object(i.a)(k,2),N=C[0],_=C[1],S=Object(n.useState)(","),D=Object(i.a)(S,2),T=D[0],R=D[1],A=Object(n.useState)(","),F=Object(i.a)(A,2),M=F[0],I=F[1],P=Object(n.useState)("."),U=Object(i.a)(P,2),q=U[0],V=U[1],B=Object(n.useState)(navigator.language||"en-US"),G=Object(i.a)(B,2),W=G[0],z=G[1],H=Object(n.useState)(),K=Object(i.a)(H,2),Y=K[0],J=K[1],X=Object(n.useState)(null),Q=Object(i.a)(X,2),$=Q[0],Z=Q[1],ee=Object(i.a)(N,2),ae=ee[0],te=ee[1],ne=Object(n.useState)(!1),re=Object(i.a)(ne,2),le=re[0],ce=re[1],oe=Object(n.useState)(xe),ie=Object(i.a)(oe,2),se=ie[0],ue=ie[1],me=Object(n.useState)(void 0),de=Object(i.a)(me,2),pe=de[0],be=de[1],fe=null!==te&&void 0!==te?te:null===$||void 0===$?void 0:$.dataTypes,ve=Object(n.useCallback)((function(e,a,t){return ce(!0),function(e,a,t){try{x.terminate()}catch(n){}return x=new je,Ee.a(x).parseDataset(e,a,t)}(e,a,Object(o.a)(Object(o.a)({},t),{},{dateLocale:Object(L.get)(ge,t.locale)})).then((function(e){return e})).catch((function(e){console.log("eee",e)})).finally((function(){ce(!1)}))}),[ce]),he=Object(n.useCallback)((function(e,a,t){return ce(!0),new Promise((function(n,r){try{n(Object(s.v)(e,a,Object(o.a)(Object(o.a)({},t),{},{dateLocale:Object(L.get)(ge,t.locale)})))}catch(l){r(l)}finally{ce(!1)}}))}),[ce]),Oe=Object(n.useCallback)((function(e,a,t){return ve(e,a,t)}),[ve,he]),ye=Object(n.useCallback)((function(e,a,t){return Oe(e,a,t).then((function(e){return Z(e)}))}),[Oe]),we=Object(n.useCallback)((function(){Z(null),b(null),O(null),r(""),m(null),w(null),J(null),_([null,null])}),[]),ke=Object(n.useCallback)((function(e){var a=e.userInput,t=e.userData,n=e.userDataType,l=e.parseError,c=e.unstackedColumns,o=e.unstackedData,i=e.dataTypes,s=e.separator,u=e.thousandsSeparator,d=e.decimalsSeparator,p=e.locale,g=e.stackDimension,f=e.dataSource;r(a),O(n),R(s),I(u),V(d),z(p),J(g),m(f),b(t),w(l),_([o,c]),ye(t,i,{thousandsSeparator:u,decimalsSeparator:d,locale:p})}),[ye]),Ce=Object(n.useCallback)((function(e){Oe(e,void 0,{locale:W,decimal:q,group:M}).then((function(a){if(a.errors.length>0)Re.replacedData=a,be("parse-error");else{var t=Object.keys(fe),n=Object.keys(a.dataTypes),r=Object(L.difference)(t,n);if(r.length>0)Re.replacedData=a,be("missing-column:"+r[0]);else{var l=Object(o.a)(Object(o.a)({},a.dataTypes),fe);Oe(e,l,{locale:W,decimal:q,group:M}).then((function(t){if(t.errors.length>0)Re.replacedData=a,be("type-mismatch");else if(Y){_([e,t.dataTypes]);var n=De(e,Y);b(n),Oe(n,$.dataTypes,{locale:W,decimal:q,group:M}).then((function(e){return Z(e)}))}else Z(t)}))}}}))}),[fe,$,q,W,Oe,Y,M]),Se=Object(n.useCallback)((function(e){b(e),se===xe?ye(e,void 0,{locale:W,decimal:q,group:M}):se===Te?Ce(e):console.error("Unknown data loader mode!")}),[q,Ce,W,se,ye,M]);function Le(e,a,t){var n,l=Ne(e,{separator:Object(L.get)(t,"separator",null)}),c=Object(i.a)(l,4),o=c[0],s=c[1],d=c[2],p=c[3];r(e),m(a),O(o),w(d),p&&"object"===typeof p&&"separator"in p&&R(p.separator),"json"===o||d||Se(s);var g=null!==(n=null===u||void 0===u?void 0:u.jsonPath)&&void 0!==n?n:void 0;if("json"===o&&!d&&void 0!==g){var b=Object(L.get)(s,g,null);Array.isArray(b)&&Se(b)}}var Ae=Object(n.useCallback)((function(e,a){var t=e.map((function(e){var a=e;if(Array.isArray(a)){var t={};a.forEach((function(e,a){t["Column ".concat(a+1)]=e})),a=t}(_e(a)||null===a)&&(a={value:a});var n={};for(var r in a){var l=a[r],c=typeof l;if(Array.isArray(l))n[r]=l.filter(_e).join(" ");else if("object"===c&&null!==c)for(var o in l){var i=l[o];_e(i)&&(n["".concat(r,".").concat(o)]=i)}else _e(l)&&(n[r]=l)}return n})).filter((function(e){return null!==e}));b(t),m(Object(o.a)(Object(o.a)({},u),{},{jsonPath:a})),Se(t)}),[u,Se]);var Fe=Object(n.useCallback)((function(){ue(Te),Re.userInput=t,Re.userDataType=h,Re.dataSource=u,Re.userData=g,r(null),O(null),m(null),b(null)}),[u,g,h,t]),Me=Object(n.useCallback)((function(){be(!1),ue(xe),r(Re.userInput),O(Re.userDataType),m(Re.dataSource),b(Re.userData)}),[]),Ie=Object(n.useCallback)((function(){be(!1),Z(Re.replacedData),w(null),J(null),_([null,null])}),[]);return{userInput:t,setUserInput:Le,userData:g,userDataType:h,parseError:y,unstackedData:ae,unstackedColumns:te,separator:T,setSeparator:function(e){var a=Ne(t,{separator:e}),n=Object(i.a)(a,3),r=n[0],l=n[1],c=n[2];R(e),O(r),w(c),"json"!==r&&!c&&e&&(b(l),ye(l,void 0,{locale:W,decimal:q,group:M}))},thousandsSeparator:M,setThousandsSeparator:function(e){var a=Ne(t,{separator:T}),n=Object(i.a)(a,3),r=n[0],l=n[1],c=n[2];I(e),O(r),w(c),"json"===r||c||(b(l),ye(l,void 0,{locale:W,decimal:q,group:e}))},decimalsSeparator:q,setDecimalsSeparator:function(e){var a=Ne(t,{separator:T}),n=Object(i.a)(a,3),r=n[0],l=n[1],c=n[2];V(e),O(r),w(c),"json"===r||c||(b(l),ce(!0),ye(l,void 0,{locale:W,decimal:e,group:M}))},locale:W,setLocale:function(e){$&&(ye($.dataset,$.dataTypes,{locale:e,decimal:q,group:M}),z(e))},stackDimension:Y,dataSource:u,data:$,loading:le,coerceTypes:function(e){ye(g,e,{locale:W,decimal:q,group:M})},loadSample:function(e,a){R(a),Le(e,{type:"sample"},{separator:a})},handleInlineEdit:function(e){b(e),ye(e,$.dataTypes,{locale:W,decimal:q,group:M})},handleStackOperation:function(e){if(J(e),null!==e){null===ae&&_([g,$.dataTypes]);var a=De(ae||g,e);b(a),ye(a,void 0,{locale:W,decimal:q,group:M})}else b(ae),ye(ae,te,{locale:W,decimal:q,group:M}),_([null,null])},setJsonData:Ae,resetDataLoader:we,hydrateFromSavedProject:ke,dataLoaderMode:se,startDataReplace:Fe,cancelDataReplace:Me,commitDataReplace:Ie,replaceRequiresConfirmation:pe}}var Ae=t(18),Fe=t(27),Me=t(1030),Ie=t(518),Pe=t(1036),Ue=t(7),qe=t.n(Ue),Ve=t(48),Be=t.n(Ve),Ge=Object.keys(s.c),We=r.a.forwardRef((function(e,a){var t=e.currentFormat,n=e.onChange,l=e.className,c=Object(Fe.a)(e,["currentFormat","onChange","className"]);return r.a.createElement("div",Object.assign({className:qe()(l,Be.a["date-format-selector"]),ref:a},c),Ge.map((function(e){return r.a.createElement("div",{key:e,className:qe()(Be.a["date-format-selector-entry"],Object(Se.a)({},Be.a.selected,Object(L.get)(t,"dateFormat","")===e)),onClick:function(a){a.stopPropagation(),a.preventDefault(),n&&n({type:"date",dateFormat:e})}},e)})))}));function ze(e){var a=e.currentType,t=e.onTypeChange,l=e.currentTypeComplete,c=Object(n.useRef)(null),o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(L.get)(a,"type",a),p=Object(n.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var n=e.target.dataset.datatype;"function"!==typeof t||Object(L.isEqual)(n,a)||t(n),m(!1)}),[a,t]),g=Object(n.useCallback)((function(e){"function"!==typeof t||Object(L.isEqual)(e,a)||t(e),m(!1)}),[a,t]),b=Object(n.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),m(!u)}),[u]),f=pe[d];return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{role:"button",className:Be.a["data-type-selector-trigger"],ref:c,onClick:b},r.a.createElement(f,null)),r.a.createElement(Ie.a,{target:c.current,show:u,placement:"bottom-start",rootClose:!0,rootCloseEvent:"click",onHide:function(){m(!1)},container:document.body},(function(e){e.placement,e.scheduleUpdate,e.arrowProps,e.outOfBoundaries,e.show;var t=Object(Fe.a)(e,["placement","scheduleUpdate","arrowProps","outOfBoundaries","show"]);return r.a.createElement("div",Object.assign({id:"data-type-selector",className:Be.a["data-type-selector"],onClick:function(e){return e.stopPropagation()}},t),r.a.createElement("div",{"data-datatype":"number",onClick:p,className:qe()(Be.a["data-type-selector-item"],Object(Se.a)({},Be.a.selected,"number"===d))},r.a.createElement(me,null)," Number"),r.a.createElement(Pe.a,{placement:"right-start",overlay:r.a.createElement(We,{currentType:a,onChange:g}),trigger:"click"},(function(e){var a=e.ref,t=Object(Fe.a)(e,["ref"]);return r.a.createElement("div",Object.assign({ref:a,"data-datatype":"date"},t,{className:qe()(Be.a["data-type-selector-item"],Be.a["parent-type-selector"],Object(Se.a)({},Be.a.selected,"date"===d))}),r.a.createElement("div",null,r.a.createElement(ue,null),"Date","date"===d&&r.a.createElement("span",{className:Be.a["date-format-preview"]}," ("+l.dateFormat+")  ")),r.a.createElement(C.i,{style:{marginRight:0,fill:"var(--gray-700)"}}))})),r.a.createElement("div",{"data-datatype":"string",onClick:p,className:qe()(Be.a["data-type-selector-item"],Object(Se.a)({},Be.a.selected,"string"===d))},r.a.createElement(de,null)," String"))})))}function He(e){var a=Object.assign({},e).column,t=a.key,n=a.sortColumn,l=a.sortDirection;return r.a.createElement("div",{className:qe()(Object(Se.a)({},Be.a["raw-col-header"],!0),Object(Se.a)({},Be.a.unsorted,t!==n||t===n&&"NONE"===l),Object(Se.a)({},Be.a.acs,t===n&&"ASC"===l),Object(Se.a)({},Be.a.desc,t===n&&"DESC"===l))},r.a.createElement(ze,{currentType:a._raw_datatype,onTypeChange:a._raw_coerceType,currentTypeComplete:a._raw_datatype}),r.a.createElement("span",{className:qe()(Be.a["column-name"],"text-truncate","d-block"),title:a.name},a.name))}function Ke(e){var a,t=e.userDataset,l=e.dataset,c=e.errors,u=e.dataTypes,m=e.coerceTypes,d=e.onDataUpdate,p=Object(n.useState)(["id","NONE"]),g=Object(i.a)(p,2),b=Object(i.a)(g[0],2),f=b[0],v=b[1],h=g[1],O=Object(n.useMemo)((function(){return Object(L.keyBy)(c,"row")}),[c]),E=Object(n.useRef)(),j=24+8*(Math.floor(Math.log10(t.length))+1),y=((null===(a=E.current)||void 0===a?void 0:a.getBoundingClientRect().width)-j-1)/Object.keys(u).length,w=y?Math.max(y,170):170,k=Object(n.useMemo)((function(){return t&&u?[{key:"_id",name:"",headerRenderer:function(){return null},frozen:!0,width:j,sortable:!0}].concat(Object(Ae.a)(Object.keys(u).map((function(e,a){return{key:e,name:e,sortColumn:f,sortDirection:v,headerRenderer:He,editable:!0,formatter:function(a){var t,n,l=a.row;return r.a.createElement("div",{className:qe()(Object(Se.a)({},Be.a["has-error"],null===l||void 0===l||null===(t=l._errors)||void 0===t?void 0:t[e]))},null===(n=l[e])||void 0===n?void 0:n.toString())},_raw_datatype:u[e],_raw_coerceType:function(a){return m(Object(o.a)(Object(o.a)({},u),{},Object(Se.a)({},e,a)))},sortable:!0,resizable:!0,width:w}})))):[]}),[m,u,t,j,w,f,v]),C=Object(n.useMemo)((function(){var e=t.map((function(e,a){var t;return Object(o.a)(Object(o.a)({},e),{},{_id:a+1,_stage3:l[a],_errors:null===(t=O[a])||void 0===t?void 0:t.error})}));if("NONE"===v)return e;var a=Object(s.r)(u[f]);if("number"===a)e=e.sort((function(e,a){return e._stage3[f]-a._stage3[f]}));else if("date"===a){var n;e=null!==(n=e.sort((function(e,a){var t,n,r;return null!==(t=null===(n=e._stage3[f])||void 0===n?void 0:n.valueOf())&&void 0!==t?t:0-(null===(r=a._stage3[f])||void 0===r?void 0:r.valueOf())})))&&void 0!==n?n:0}else e=e.sort((function(e,a){var t;return null===(t=e._stage3[f])||void 0===t?void 0:t.toString().localeCompare(a._stage3[f].toString())}));return"DESC"===v?e.reverse():e}),[t,v,u,f,l,O]),N=Object(n.useCallback)((function(e,a){h([e,a])}),[]);return r.a.createElement("div",{ref:E},r.a.createElement(Me.a,{minColumnWidth:j,columns:k,rows:C,rowHeight:48,sortColumn:f,sortDirection:v,onSort:N,height:432,onColumnResize:function(){},onRowsUpdate:function(e){if("CELL_UPDATE"===e.action){var a=Object(Ae.a)(t);a[e.fromRow]=Object(o.a)(Object(o.a)({},a[e.fromRow]),{},Object(Se.a)({},e.cellKey,e.updated[e.cellKey])),d&&d(a)}}}))}var Ye=t(9),Je=t.n(Ye),Xe=t(34),Qe=t(1039),$e=t(503),Ze=t.n($e),ea=[{name:"Hate crimes in New York",category:"Alluvial Diagram",url:"./sample-datasets/Alluvial diagram - Hate crimes in New York.tsv",delimiter:"\t",sourceName:"NYC Open Data",sourceURL:"https://data.cityofnewyork.us/Public-Safety/NYPD-Hate-Crimes/bqiq-cu78"},{name:"Lannister vs Starck relationships",category:"Arc diagrams",url:"./sample-datasets/Arc diagrams - Lannister vs Starck relationships.tsv",delimiter:"\t",sourceName:"T. Breid via Kaggle",sourceURL:"https://www.kaggle.com/theobreid/got-data"},{name:"EU Index of consumer prices",category:"Horizon Graph",url:"./sample-datasets/Horizon Graph - EU Index of consumer prices.tsv",delimiter:"\t",sourceName:"Eurostat",sourceURL:"https://ec.europa.eu/eurostat/databrowser/bookmark/d84c6140-ed7e-443e-baf9-918679862d58?lang=en"},{name:"New York mean wage per occupation",category:"Beeswarm plot",url:"./sample-datasets/Beeswarm plot - NY mean wages.tsv",delimiter:"\t",sourceName:"NYC Open Data",sourceURL:"https://data.ny.gov/w/gkgz-nw24/caer-yrtv?cur=S3JXBWlXCbs&from=SAa8_R9mOdD"},{name:"Temperature in Paris during the World War II",category:"Contour plot",url:"./sample-datasets/Contour plot - Mean temperature in Paris 1944-1945.tsv",delimiter:"\t",sourceName:"NOAA",sourceURL:"https://www.ncdc.noaa.gov/data-access/land-based-station-data/land-based-datasets/world-war-ii-era-data"},{name:"Highest grossing movies in history",category:"Bubble chart",url:"./sample-datasets/Bubble Chart - TOP 50 Groossing Movies.tsv",delimiter:"\t",sourceName:"Wikipedia",sourceURL:"https://en.wikipedia.org/w/index.php?title=List_of_highest-grossing_films&oldid=1023491946"},{name:"Foreign residents in Milan",category:"Bumpchart",url:"./sample-datasets/Bump chart - Foreign residents in Milan.tsv",delimiter:"\t",sourceName:"Comune di Milano",sourceURL:"https://dati.comune.milano.it/dataset/ds74-popolazione-residenti-stranieri-cittadinanza"},{name:"Most populated cities per continent",category:"Circle packing",url:"./sample-datasets/Circle Packing - Most populated cities.tsv",delimiter:"\t",sourceName:"Wikidata",sourceURL:"https://query.wikidata.org/#SELECT%20%3Fitem%20%3FitemLabel%20%3Fpopulation%20%3Fcountry%20%3FcountryLabel%20%3Fcontinent%20%3FcontinentLabel%0AWHERE%20%7B%0A%20%20%3Fitem%20wdt%3AP31%20wd%3AQ1637706%20.%20%23%20get%20things%20that%20are%20bands%0A%20%20%3Fitem%20wdt%3AP1082%20%3Fpopulation%20.%0A%20%20%23%3Fitems%20wdt%3AP571%20%3Fdate%20.%20%23%20get%20the%20date%20when%20the%20band%20was%20founded%0A%20%20%3Fitem%20wdt%3AP17%20%3Fcountry%20.%0A%20%20%3Fcountry%20wdt%3AP30%20%3Fcontinent%20.%0A%20%20%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D%0A"},{name:"Kobe Bryant shoots",category:"Hexagonal Binning, Voronoi diagram",url:"./sample-datasets/Hexbin - basketball shots.tsv",delimiter:"\t",sourceName:"Kaggle",sourceURL:"https://www.kaggle.com/c/kobe-bryant-shot-selection/"},{name:"Orchestras by musical instrument",category:"Treemap",url:"./sample-datasets/Treemap - Orchestra.tsv",delimiter:"\t",sourceName:"Wikipedia",sourceURL:"https://en.wikipedia.org/w/index.php?title=Orchestra&oldid=1022472978"},{name:"Italians PMs and Presidents",category:"Gantt chart",url:"./sample-datasets/Gantt chart - Italian PMs and presidents.tsv",delimiter:"\t",sourceName:"Wikidata",sourceURL:"https://query.wikidata.org/#%23Primi%20ministri%0ASELECT%20%3Fitem%20%3FitemLabel%20%3Fstart%20%3Fend%0AWHERE%20%0A%7B%0A%20%20%3Fitem%20p%3AP39%20%3Fposition.%0A%20%20%3Fposition%20ps%3AP39%20wd%3AQ332711%3B%0A%20%20%20%20%20%20%20%20pq%3AP580%20%3Fstart%3B%0A%20%20%20%20%20%20%20%20pq%3AP582%20%3Fend%0A%20%20%23%3Fstart%20wdt%3AP580%20%3Fitem.%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D"},{name:"Revenues per Music format",category:"Line chart",url:"./sample-datasets/Line chart - RIAA Music format revenues.tsv",delimiter:"\t",sourceName:"RIAA",sourceURL:"https://www.riaa.com/u-s-sales-database/"},{name:"Energy flows in UK (2050)",category:"Sankey diagram",url:"./sample-datasets/Sankey diagram - Energy flows.tsv",delimiter:"\t",sourceName:"gov.uk",sourceURL:"https://www.gov.uk/government/publications/2050-pathways-calculator-with-costs"},{name:"Aromas of wine and frequency",category:"Sunburst Diagram",url:"./sample-datasets/Sunburst - Wine Aromas.tsv",delimiter:"\t",sourceName:"Own work",sourceURL:""},{name:"Happiness index",category:"Multiset Barchart",url:"./sample-datasets/Multiset Barchart - Happiness Index.tsv",delimiter:"\t",sourceName:"World Happiness Report",sourceURL:"https://worldhappiness.report/"},{name:"GDP sector composition",category:"Stacked barchart",url:"./sample-datasets/Stacked barchart - GDP sector composition.tsv",delimiter:"\t",sourceName:"Wikipedia",sourceURL:"https://en.wikipedia.org/w/index.php?title=List_of_countries_by_GDP_sector_composition&oldid=1022131842"},{name:"Felidae classification (cats and friends)",category:"Dendrogram, Circular dendrogram",url:"./sample-datasets/Dendrogram - Felidae classification.tsv",delimiter:"\t",sourceName:"Special thanks to interns",sourceURL:""},{name:"Iris flowers",category:"Convex hull, Parallel Coordinates",url:"./sample-datasets/Convex hull - Iris flowers.tsv",delimiter:"\t",sourceName:"R. Fisher",sourceURL:"https://en.wikipedia.org/wiki/Iris_flower_data_set"},{name:"Letter Frequency by Language",category:"Matrix plot (Heatmap)",url:"./sample-datasets/Matrix Plot - Letters frequencies by language.tsv",delimiter:"\t",sourceName:"Wikipedia",sourceURL:"https://en.wikipedia.org/wiki/Letter_frequency"},{name:"FIFA players statistics",category:"Radar Chart",url:"./sample-datasets/Radar Chart - Fifa players.tsv",delimiter:"\t",sourceName:"K. Gadiya via Kaggle",sourceURL:"https://www.kaggle.com/karangadiya/fifa19"},{name:"Olympics Medals",category:"Streamgraph",url:"./sample-datasets/Streamgraph - Olympics Medals.tsv",delimiter:"\t",sourceName:"D. Agrawal via Kaggle",sourceURL:"https://www.kaggle.com/divyansh22/summer-olympics-medals"},{name:"Weather in New York, 2012-2015",category:"Violin plot, Boxplot",url:"./sample-datasets/Violin plot - Weather in New York.tsv",delimiter:"\t",sourceName:"NOAA via Vega Dataset",sourceURL:"https://github.com/vega/vega-datasets/blob/master/SOURCES.md#seattle-weathercsv"},{name:"Netflix Original Series 2013/2017",category:"Bar chart",url:"./sample-datasets/Bar chart - Netflix Original Series.tsv",delimiter:"\t",sourceName:"M. Schroyer via Data World",sourceURL:"https://data.world/mattschroyer/netflix-original-series"}];function aa(e){var a=e.onSampleReady,t=e.setLoadingError,n=function(){var e=Object(Xe.a)(Je.a.mark((function e(n){var r,l,c,o;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.delimiter,l=n.url,e.prev=1,e.next=4,fetch(l);case 4:c=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),t("Loading error. "+e.t0.message),e.abrupt("return");case 11:return e.next=13,c.text();case 13:o=e.sent,a(o,r),t(null);case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(O.a,null,ea.sort((function(e,a){return e.name.localeCompare(a.name)})).map((function(e,a){return r.a.createElement(E.a,{xs:6,lg:4,xl:3,key:a,style:{marginBottom:15}},r.a.createElement(Qe.a,{className:"cursor-pointer h-100"},r.a.createElement(Qe.a.Body,{onClick:function(){n(e)},className:"d-flex flex-column"},r.a.createElement(Qe.a.Title,{className:""},r.a.createElement("h2",{className:""},e.name),r.a.createElement("h4",{className:"m-0"},e.category))),r.a.createElement("a",{href:e.sourceURL,className:[Ze.a["dataset-source"]].join(" ")},"Source: ",e.sourceName)))})))}t(549);var ta=function e(a){var t=a.contextName,l=a.nestingLevel,c=a.context,o=a.selectFilter,s=a.onSelect,u=a.path,m=o(c),d=typeof c,p=Object(n.useState)(!1),g=Object(i.a)(p,2),b=g[0],f=g[1],v=["json-nested",m?"selectable":null,b?"hover":null].filter((function(e){return null!==e})).join(" "),h=Object(n.useCallback)((function(e){m&&(e.stopPropagation(),e.preventDefault(),s&&s(c,u.join(".")))}),[c,m,s,u]),O=Object(n.useCallback)((function(e){m&&(e.stopPropagation(),e.preventDefault(),f(!0))}),[m]),E=Object(n.useCallback)((function(e){m&&(e.stopPropagation(),e.preventDefault(),f(!1))}),[m]);return"object"===d&&null!==d?r.a.createElement("div",{className:v,onClick:h,onMouseOver:O,onMouseOut:E},t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"property-name"},t),r.a.createElement("span",{className:"colon"},": ")),!Array.isArray(c)&&r.a.createElement("span",{className:"curly-bracket open-bracket"},"{"),Array.isArray(c)&&r.a.createElement("span",{className:"square-bracket open-bracket"},"["),Object(L.map)(c,(function(a,t){return r.a.createElement(e,{key:t,contextName:Array.isArray(c)?null:t,nestingLevel:l+1,context:a,selectFilter:o,onSelect:s,path:[].concat(Object(Ae.a)(u),[t])})})),!Array.isArray(c)&&r.a.createElement("span",{className:"curly-bracket close-bracket"},"}"),Array.isArray(c)&&r.a.createElement("span",{className:"square-bracket close-bracket"},"]")):r.a.createElement("div",{className:v,onClick:h,onMouseOver:O,onMouseOut:E},t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"property-name"},t),r.a.createElement("span",{className:"colon"},": ")),null===c&&r.a.createElement("span",{className:"scalar-value"},"null"),null!==c&&r.a.createElement(r.a.Fragment,null,("bigint"===d||"number"===d)&&r.a.createElement("span",{className:"scalar-value scalar-value-numeric"},c.toString()),"string"===d&&r.a.createElement("span",{className:"scalar-value scalar-value-string"},'"',c.toString(),'"'),"boolean"===d&&r.a.createElement("span",{className:"scalar-value scalar-value-bool"},'"',c?"true":"false",'"'),"undefined"===d&&r.a.createElement("span",{className:"scalar-value scalar-value-undefined"},"undefined")))},na=function(e){var a=e.context,t=e.selectFilter,n=e.onSelect;return r.a.createElement("pre",{className:"json-viewer"},r.a.createElement(ta,{contextName:null,nestingLevel:0,context:a,selectFilter:t,onSelect:n,path:[]}))},ra=t(517),la=t(176),ca=t.n(la);function oa(e){var a=e.title,t=e.value,l=e.onChange,c=(Object(Fe.a)(e,["title","value","onChange"]),t.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")),o=Object(n.useCallback)((function(e){if(l){var a=e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\t/g,"\t");l(a)}}),[l]),i=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:["small",ca.a["separator-preview"]].join(" ")},e)," ",r.a.createElement("span",null,be[e]))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"option"},a,r.a.createElement(ra.a,{className:"d-inline-block raw-dropdown"},r.a.createElement(ra.a.Toggle,{variant:"white",className:"d-flex justify-content-start align-items-center text-truncate"},i(c)),r.a.createElement(ra.a.Menu,null,Object.keys(be).map((function(e){return r.a.createElement(ra.a.Item,{key:be[e],onSelect:function(){return o(e)}},i(e))}))))))}function ia(e){var a=e.title,t=e.value,l=e.onChange,c=Object(Fe.a)(e,["title","value","onChange"]),o=t,i=Object(n.useCallback)((function(e){if(l){var a=e.target.value;l(a)}}),[l]);return r.a.createElement("div",{className:"option"},a,r.a.createElement("input",Object.assign({type:"text",className:"form-control text-field d-inline-block",value:o,onChange:i},c)))}function sa(e){var a=e.title,t=e.value,l=e.onChange,c=Object(Fe.a)(e,["title","value","onChange"]),o=t,i=Object(n.useCallback)((function(e){if(l){var a=e.target.value;l(a)}}),[l]);return r.a.createElement("div",{className:"option"},a,r.a.createElement("input",Object.assign({type:"text",className:"form-control text-field d-inline-block",value:o,onChange:i},c)))}function ua(e){var a=e.title,t=e.value,l=e.onChange,c=(Object(Fe.a)(e,["title","value","onChange"]),Object(n.useCallback)((function(e){l&&l(e)}),[l]));return r.a.createElement("div",{className:"option"},a,r.a.createElement(ra.a,{className:"d-inline-block raw-dropdown"},r.a.createElement(ra.a.Toggle,{variant:"white",className:""},t),r.a.createElement(ra.a.Menu,null,r.a.createElement(ra.a.Header,null,r.a.createElement("span",null,"from"," ",r.a.createElement("a",{href:"https://github.com/d3/d3-time-format/tree/master/locale",target:"_blank",rel:"noopener noreferrer"},"d3-time-format"))),Object.keys(ge).map((function(e){return r.a.createElement(ra.a.Item,{key:e,onSelect:function(){return c(e)}},e)})))))}function ma(e){var a=e.title,t=e.value,l=e.list,c=e.onChange,o=(Object(Fe.a)(e,["title","value","list","onChange"]),Object(n.useCallback)((function(e){c&&c(e)}),[c]));return r.a.createElement("div",{className:"option"},a,r.a.createElement(ra.a,{className:"d-inline-block raw-dropdown"},r.a.createElement(ra.a.Toggle,{variant:"white",className:"truncate-160px",disabled:0===l.length},t||"Column"),r.a.createElement(ra.a.Menu,null,t&&r.a.createElement(ra.a.Item,{onSelect:function(){return o(null)}},"Do not stack"),Object.keys(l).map((function(e){return r.a.createElement(ra.a.Item,{key:e,onSelect:function(){return o(e)}},e)})))))}var da=t(504),pa=t.n(da);function ga(e){return ba.apply(this,arguments)}function ba(){return(ba=Object(Xe.a)(Je.a.mark((function e(a){var t,n;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a.url);case 2:return t=e.sent,e.next=5,t.text();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(e){e.userInput;var a=e.setUserInput,t=e.setLoadingError,l=Object(n.useState)(""),c=Object(i.a)(l,2),o=c[0],s=c[1],u=function(){var e=Object(Xe.a)(Je.a.mark((function e(n){var r,l;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={type:"url",url:n},e.prev=1,e.next=4,ga(r);case 4:l=e.sent,a(l,r),t(null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t("Loading error. "+e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("input",{className:qe()("w-100",pa.a["url-input"]),value:o,onChange:function(e){s(e.target.value),u(e.target.value)}})}var va=t(178),ha=t(12),Oa=t(13),Ea=t(40),ja=t(32),ya=t(24),wa=t(25),ka=t(249),Ca=t.n(ka),Na=t(66),_a=t(505),Sa=t.n(_a),Da=t(179),xa=t(507);function Ta(){var e=Object(va.a)(["<sparql-editor\n        ?auto-parse=","\n        @parsed=","\n        @parsing-failed=","\n      ></sparql-editor>"]);return Ta=function(){return e},e}var Ra=function(e){Object(ya.a)(t,e);var a=Object(wa.a)(t);function t(){return Object(ha.a)(this,t),a.apply(this,arguments)}return Object(Oa.a)(t,[{key:"updated",value:function(){var e=Object(Xe.a)(Je.a.mark((function e(a){var n;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ea.a)(Object(ja.a)(t.prototype),"updated",this).call(this,a);case 3:if(n=!1,!a.has("value")){e.next=8;break}return n=!0,e.next=8,this._updateValue(this.value);case 8:a.has("prefixes")&&(n=!0),n&&this.parse(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(a){return e.apply(this,arguments)}}()}]),t}(t(516).a);function La(e){return Aa.apply(this,arguments)}function Aa(){return(Aa=Object(Xe.a)(Je.a.mark((function e(a){var t,n,r,l;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Da.Generator,n=new Sa.a({endpointUrl:a.url}),e.next=4,n.query.select(t.stringify(a.query));case 4:return r=e.sent,e.next=7,Ma(r,a.query.variables);case 7:return(l=e.sent)[ke]=!0,e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e){e.userInput;var a=e.setUserInput,t=e.setLoadingError,l=Object(n.useState)(""),c=Object(i.a)(l,2),o=c[0],s=c[1],u=Object(n.useState)(null),m=Object(i.a)(u,2),d=m[0],p=m[1],g=Object(n.useRef)(),b=Object(n.useCallback)((function(e){var a=e.target.query;"SELECT"===a.queryType?p(a):p(null)}),[]),f=Object(n.useCallback)((function(){console.log("parser failed"),p(null)}),[]),v=Object(n.useCallback)((function(){La({type:"sparql",url:o,query:d}).then((function(e){a(e,{type:"sparql",url:o,query:d})})).catch((function(e){t("It was not possible to execute the query on the given endpoint")}))}),[d,t,a,o]);return Object(n.useEffect)((function(){var e=g.current;Object(Na.b)(Object(Na.a)(Ta(),!0,b,f),e)}),[b,f]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:qe()(Ca.a["base-iri-input-here"])},r.a.createElement("span",null,"Write your base IRI here")),r.a.createElement("input",{className:qe()("w-100",Ca.a["url-input"]),value:o,onChange:function(e){s(e.target.value)}}),r.a.createElement("div",{className:qe()(Ca.a["query-input-here"])},r.a.createElement("span",null,"Write your query here")),r.a.createElement("div",{ref:g}),r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{className:"btn btn-sm btn-success mt-3",disabled:!d||!o,onClick:v},"Run query")))}function Ma(e,a){return new Promise((function(t,n){var r=[];e.on("data",(function(e){var t,n={},l=Object(ye.a)(a);try{for(l.s();!(t=l.n()).done;){var c=t.value,o=e[c.value];o||(n[c.value]=""),"Literal"===o.termType&&(n[c.value]=Object(xa.fromRdf)(o)),"NamedNode"===o.termType&&(n[c.value]=o.value)}}catch(i){l.e(i)}finally{l.f()}r.push(n)})),e.on("end",(function(){t(r)})),e.on("error",(function(e){n(e)}))}))}window.customElements.define("sparql-editor",Ra);var Ia={url:ga,sparql:La},Pa={url:"Refresh data from url",sparql:"Refresh data from query"};function Ua(e){var a=function(){var a=Object(Xe.a)(Je.a.mark((function a(){var t,n;return Je.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Ia[Object(L.get)(e.dataSource,"type","")],a.next=3,t(e.dataSource);case 3:n=a.sent,e.onDataRefreshed(n);case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(O.a,null,r.a.createElement(E.a,{className:ca.a.parsingOptions},r.a.createElement("b",null,"DATA PARSING OPTIONS"),"csv"===e.userDataType&&r.a.createElement(oa,{title:"Column separator",value:e.separator,onChange:function(a){return e.setSeparator(a)}}),r.a.createElement(ia,{title:"Thousands separator",value:e.thousandsSeparator,onChange:function(a){return e.setThousandsSeparator(a)}}),r.a.createElement(sa,{title:"Decimals separator",value:e.decimalsSeparator,onChange:function(a){return e.setDecimalsSeparator(a)}}),r.a.createElement(ua,{title:"Date Locale",value:e.locale,onChange:function(a){return e.setLocale(a)}}),Object(L.get)(Ia,Object(L.get)(e.dataSource,"type",""),null)&&r.a.createElement(D.a,{color:"primary",className:ca.a["refresh-button"],onClick:function(){return a()}},r.a.createElement(C.c,{className:"mr-2"}),Object(L.get)(Pa,Object(L.get)(e.dataSource,"type",""),"Refresh data")),r.a.createElement("div",{className:"divider mb-3 mt-0"}),r.a.createElement("b",null,"DATA TRANSFORMATION"),r.a.createElement(ma,{title:"Stack on",value:e.stackDimension,list:e.dimensions,onChange:function(a){return e.setStackDimension(a)}})))}var qa=t(63),Va=t.n(qa),Ba=t(236),Ga=t(183),Wa=t.n(Ga),za=t(38),Ha=[za.a,za.b,za.c,za.d,za.e,za.f,za.g,za.h,za.i,za.j,za.k,za.l,za.m,za.n,za.o,za.p,za.q,za.r,za.s,za.t,za.u,za.v,za.w,za.x,za.y,za.z,za.A];function Ka(e){var a,t=e.onProjectSelected,l=e.setLoadingError,c=Object(n.useCallback)((function(e){var a=new FileReader;a.addEventListener("load",(function(e){try{var a=Object(s.d)(e.target.result,Ha);l(null),t(a)}catch(e){l(e.message)}})),e.length&&a.readAsText(e[0])}),[t,l]),o=Object(Ba.a)({onDrop:c,accept:".rawgraphs",maxFiles:1}),i=o.getRootProps,u=o.getInputProps,m=o.isDragReject,d=o.isDragAccept;return r.a.createElement("div",Object.assign({className:qe()(Wa.a.dropzone,(a={},Object(Se.a)(a,Wa.a.reject,m),Object(Se.a)(a,Wa.a.accept,d),a))},i()),r.a.createElement("input",u()),r.a.createElement("span",null,"Drag a file here or "),r.a.createElement(D.a,{className:Wa.a["browse-button"],color:"primary"},"Browse"),r.a.createElement("span",null,"a file from your computer"),d&&r.a.createElement("p",null,"All files will be accepted"),m&&r.a.createElement("p",null,"Some files will be rejected"))}function Ya(e){var a=e.userInput,t=e.setUserInput,n=e.setLoadingError;return r.a.createElement("textarea",{value:a,onChange:function(e){var a=e.target.value;t(a),n(null)},style:{backgroundColor:"white",border:"1px solid lightgrey",borderRadius:4,width:"100%",padding:"1rem",minHeight:"250px",height:"40vh"}})}var Ja=t(184),Xa=t.n(Ja);function Qa(e){var a,t=e.setUserInput,l=e.setLoadingError,c=Object(n.useCallback)((function(e){var a=new FileReader;a.addEventListener("load",(function(e){t(e.target.result),l(null)})),e.length&&a.readAsText(e[0])}),[l,t]),o=Object(Ba.a)({onDrop:c,accept:"text/csv,text/plain,application/json,application/vnd.ms-excel,text/tsv,text/tab-separated-values",maxFiles:1}),i=o.getRootProps,s=o.getInputProps,u=o.isDragReject,m=o.isDragAccept;return r.a.createElement("div",Object.assign({className:qe()(Xa.a.dropzone,(a={},Object(Se.a)(a,Xa.a.reject,u),Object(Se.a)(a,Xa.a.accept,m),a))},i()),r.a.createElement("input",s()),r.a.createElement("span",null,"Drag a file here or "),r.a.createElement(D.a,{className:Xa.a["browse-button"],color:"primary"},"Browse"),r.a.createElement("span",null,"a file from your computer"),m&&r.a.createElement("p",null,"All files will be accepted"),u&&r.a.createElement("p",null,"Some files will be rejected"))}function $a(){return r.a.createElement("div",{className:Va.a["loading-component"]},r.a.createElement("div",{className:Va.a["bg-animated"]}),r.a.createElement("p",null,"loading..."))}var Za=t(1024);var et=function(e){var a=e.variant,t=void 0===a?"warning":a,n=e.message,l=void 0===n?"A default warning message.":n;return r.a.createElement(Za.a,{variant:t,className:"my-2"},l)};var at=function(e){var a=e.replaceRequiresConfirmation,t=e.commitDataReplace,l=e.cancelDataReplace,c=Object(n.useState)(!0),o=Object(i.a)(c,2),s=o[0],u=o[1];return r.a.createElement(S.a,{className:"raw-modal",show:s,onHide:function(){u(!1)},backdrop:"static",keyboard:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(S.a.Header,null,r.a.createElement(S.a.Title,{as:"h5"},"Warning:"," ","parse-error"===a&&r.a.createElement(r.a.Fragment,null,"parsing error"),a.startsWith("missing-column:")&&r.a.createElement(r.a.Fragment,null,"missing column"),"type-mismatch"===a&&r.a.createElement(r.a.Fragment,null,"data-type mismatch"))),r.a.createElement(S.a.Body,null,"parse-error"===a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"There was an error while parsing new data."),r.a.createElement("p",null,"You can load the new data and try to fix the error or return to the data previously loaded.")),a.startsWith("missing-column:")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The data mapping of this project requires the dimension"," ",r.a.createElement("span",{className:"font-weight-bold"},a.split(":")[1]),", that we can't find in the new data."),r.a.createElement("p",null,"You can create a new data mapping with the new data or return to the data previously loaded.")),"type-mismatch"===a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The data-types previously set for this project can't be applied to the new data."),r.a.createElement("p",null,"You can use the new data and re-set data-types or return to the data previously loaded."))),r.a.createElement(S.a.Footer,null,r.a.createElement(D.a,{variant:"warning",onClick:function(){t()}},"Load new data"),r.a.createElement(D.a,{variant:"secondary",onClick:function(){l()}},"Cancel")))};var tt=r.a.memo((function(e){var a,t=e.userInput,l=e.setUserInput,c=e.userData,o=e.userDataType,s=e.parseError,u=e.unstackedColumns,m=e.separator,d=e.setSeparator,p=e.thousandsSeparator,g=e.setThousandsSeparator,b=e.decimalsSeparator,f=e.setDecimalsSeparator,v=e.locale,h=e.setLocale,j=e.stackDimension,y=e.dataSource,w=e.data,k=e.loading,N=e.coerceTypes,_=e.loadSample,S=e.handleInlineEdit,D=e.handleStackOperation,x=e.setJsonData,T=(e.resetDataLoader,e.dataLoaderMode),R=e.startDataReplace,A=e.cancelDataReplace,F=e.commitDataReplace,M=e.replaceRequiresConfirmation,I=e.hydrateFromProject,P=Object(n.useState)(),U=Object(i.a)(P,2),q=U[0],V=U[1],B=[{id:"paste",name:"Paste your data",loader:r.a.createElement(Ya,{userInput:t,setUserInput:function(e){return l(e,{type:"paste"})},setLoadingError:V}),message:"Copy and paste your data from other applications or websites. You can use tabular (TSV, CSV, DSV) or JSON data.",icon:C.e,allowedForReplace:!0},{id:"upload",name:"Upload your data",loader:r.a.createElement(Qa,{userInput:t,setUserInput:function(e){return l(e,{type:"file"})},setLoadingError:V}),message:"You can load tabular (TSV, CSV, DSV) or JSON data.",icon:C.s,allowedForReplace:!0},{id:"samples",name:"Try our data samples",message:"",loader:r.a.createElement(aa,{onSampleReady:_,setLoadingError:V}),icon:C.l,allowedForReplace:!0},{id:"sparql",name:"SPARQL query",message:"Load data with a SparQL query",loader:r.a.createElement(Fa,{userInput:t,setUserInput:function(e,a){return l(e,a)},setLoadingError:V}),icon:C.g,disabled:!1,allowedForReplace:!0},{id:"url",name:"From URL",message:"Enter a web address (URL) pointing to the data (e.g. a public Dropbox file, a public API, ...). Please, be sure the server is CORS-enabled.",loader:r.a.createElement(fa,{userInput:t,setUserInput:function(e,a){return l(e,a)},setLoadingError:V}),icon:C.p,disabled:!1,allowedForReplace:!0},{id:"project",name:"Open your project",message:"Load a .rawgraphs project.",loader:r.a.createElement(Ka,{onProjectSelected:I,setLoadingError:V}),icon:C.k,allowedForReplace:!1}],G=Object(n.useState)(0),W=Object(i.a)(G,2),z=W[0],H=W[1],K=B[z];a=c&&w?r.a.createElement(Ke,{userDataset:c,dataset:w.dataset,errors:w.errors,dataTypes:w.dataTypes,coerceTypes:N,onDataUpdate:S}):"json"===o&&null===c?r.a.createElement(na,{context:JSON.parse(t),selectFilter:function(e){return Array.isArray(e)},onSelect:function(e,a){x(e,a)}}):k&&!w?r.a.createElement($a,null):r.a.createElement(r.a.Fragment,null,K.loader,r.a.createElement("p",{className:"mt-3"},K.message));var Y=Object(n.useCallback)((function(){window.location.replace(window.location.pathname)}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,!c&&r.a.createElement(E.a,{xs:3,lg:2,className:"d-flex flex-column justify-content-start pl-3 pr-0 options"},B.filter((function(e){return T!==Te||e.allowedForReplace})).map((function(e,a){var t=["w-100","d-flex","align-items-center","user-select-none","cursor-pointer",Va.a["loading-option"],e.disabled?Va.a.disabled:null,e.id!==K.id||o?null:Va.a.active,o?Va.a.disabled:null].filter((function(e){return null!==e})).join(" ");return r.a.createElement("div",{key:e.id,className:t,onClick:function(){return H(a)}},r.a.createElement(e.icon,{className:"w-25"}),r.a.createElement("h4",{className:"m-0 d-inline-block"},e.name))})),T===Te&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"divider mb-3 mt-0"}),r.a.createElement("div",{className:"w-100 mb-2 d-flex justify-content-center align-items-center ".concat(Va.a["start-over"]," user-select-none cursor-pointer"),onClick:Y},r.a.createElement(C.c,{className:"mr-2"}),r.a.createElement("h4",{className:"m-0 d-inline-block"},"Reset")),r.a.createElement("div",{className:"w-100 d-flex justify-content-center align-items-center ".concat(Va.a["start-over"]," ").concat(Va.a.cancel," user-select-none cursor-pointer mb-3"),onClick:function(){A()}},r.a.createElement("h4",{className:"m-0 d-inline-block"},"Cancel")))),c&&r.a.createElement(E.a,{xs:3,lg:2,className:"d-flex flex-column justify-content-start pl-3 pr-0 options"},r.a.createElement(Ua,{locale:v,setLocale:h,separator:m,setSeparator:d,thousandsSeparator:p,setThousandsSeparator:g,decimalsSeparator:b,setDecimalsSeparator:f,dimensions:w?u||w.dataTypes:[],stackDimension:j,setStackDimension:D,userDataType:o,dataSource:y,onDataRefreshed:function(e){return l(e,y)}}),r.a.createElement("div",{className:"divider mb-3 mt-0"}),r.a.createElement("div",{className:"w-100 mb-2 d-flex justify-content-center align-items-center ".concat(Va.a["start-over"]," user-select-none cursor-pointer"),onClick:Y},r.a.createElement(C.c,{className:"mr-2"}),r.a.createElement("h4",{className:"m-0 d-inline-block"},"Reset")),r.a.createElement("div",{className:"w-100 d-flex justify-content-center align-items-center ".concat(Va.a["start-over"]," user-select-none cursor-pointer"),onClick:function(){H(0),R()}},r.a.createElement(C.a,{className:"mr-2"}),r.a.createElement("h4",{className:"m-0 d-inline-block"},"Change data"))),r.a.createElement(E.a,null,r.a.createElement(O.a,{className:"h-100"},r.a.createElement(E.a,{className:"h-100"},a,w&&!s&&0===Object(L.get)(w,"errors",[]).length&&r.a.createElement(et,{variant:"success",message:r.a.createElement("span",null,r.a.createElement("span",{className:"font-weight-bold"},w.dataset.length," rows")," ","(",w.dataset.length*Object.keys(w.dataTypes).length," ","cells) have been successfully parsed, now you can choose a chart!")}),s&&r.a.createElement(et,{variant:"danger",message:s}),Object(L.get)(w,"errors",[]).length>0&&r.a.createElement(et,{variant:"warning",message:function(e){var a=Object(L.get)(e,"errors",[]),t=e.dataset.length-a.length,n=a[0].row+1,l=Object.keys(a[0].error)[0];return r.a.createElement("span",null,"Ops, please check ",r.a.createElement("span",{className:"font-weight-bold"},"row ",n)," at column ",r.a.createElement("span",{className:"font-weight-bold"},l),"."," ",2===a.length&&r.a.createElement(r.a.Fragment,null," ","There's another issue at row"," ",r.a.createElement("span",{className:"font-weight-bold"},a[1].row+1),"."," "),a.length>2&&r.a.createElement(r.a.Fragment,null," ","There are issues in"," ",r.a.createElement("span",{className:"font-weight-bold"},a.length-1)," more rows."," "),t>0&&r.a.createElement(r.a.Fragment,null,"The remaining"," ",r.a.createElement("span",{className:"font-weight-bold"},t," row",t>1&&r.a.createElement(r.a.Fragment,null,"s"))," ","look",1===t&&r.a.createElement(r.a.Fragment,null,"s")," fine."))}(w)}),q&&r.a.createElement(et,{variant:"danger",message:q}))))),M&&r.a.createElement(at,{replaceRequiresConfirmation:M,commitDataReplace:F,cancelDataReplace:A}))})),nt=t(510),rt=t.n(nt),lt=t(185),ct=t.n(lt);function ot(e,a){return"All charts"===a?e:e.filter((function(e){return-1!==e.metadata.categories.indexOf(a)}))}var it=r.a.memo((function(e){var a,t,l=e.availableCharts,c=e.currentChart,o=e.setCurrentChart,s=Object(n.useState)("All charts"),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useMemo)((function(){return ot(l,m)}),[l,m]),g=Object(n.useCallback)((function(e){d(e);var a=ot(l,e);-1===a.indexOf(c)&&o(a[0])}),[l,c,o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(E.a,{className:"text-right"},"Show",r.a.createElement(ra.a,{className:"d-inline-block ml-2 raw-dropdown"},r.a.createElement(ra.a.Toggle,{variant:"white",className:"pr-5"},m.charAt(0).toUpperCase()+m.slice(1)),r.a.createElement(ra.a.Menu,null,r.a.createElement(ra.a.Item,{key:"All charts",onClick:function(){return g("All charts")}},"All charts"),rt()(l.map((function(e){return e.metadata.categories})).flat()).map((function(e){return r.a.createElement(ra.a.Item,{key:e,onClick:function(){return g(e)}},e.charAt(0).toUpperCase()+e.slice(1))})))))),r.a.createElement(O.a,null,r.a.createElement(E.a,{xs:3,className:"pt-3"},c&&r.a.createElement(Qe.a,{className:ct.a.currentChart},r.a.createElement(Qe.a.Img,{variant:"top",src:c.metadata.thumbnail}),r.a.createElement(Qe.a.Body,null,r.a.createElement(Qe.a.Title,{className:"m-0"},r.a.createElement("h2",{className:"m-0"},c.metadata.name)),r.a.createElement(Qe.a.Subtitle,{className:"m-0"},r.a.createElement("h4",{className:"mb-2"},c.metadata.category)),r.a.createElement(Qe.a.Text,null,c.metadata.description),r.a.createElement(Qe.a.Link,{className:qe()((a={},Object(Se.a)(a,ct.a.disabled,!c.metadata.code),Object(Se.a)(a,"underlined",!0),a)),href:c.metadata.code,target:"_blank"},r.a.createElement(C.n,{color:"black"})," Code"),r.a.createElement(Qe.a.Link,{className:qe()((t={},Object(Se.a)(t,ct.a.disabled,!c.metadata.tutorial),Object(Se.a)(t,"underlined",!0),t)),href:c.metadata.tutorial,target:"_blank"},r.a.createElement(C.n,{color:"black"})," Tutorial")))),r.a.createElement(E.a,null,r.a.createElement(O.a,null,p.map((function(e,a){return r.a.createElement(E.a,{xs:4,key:"chart-"+a,className:"p-3"},r.a.createElement(Qe.a,{onClick:function(){o(e)},className:"flex-row h-100 cursor-pointer ".concat(e===c?"active":"")},r.a.createElement("div",{className:"h-100 w-25 ".concat(ct.a.thumbnail),style:{backgroundImage:'url("'.concat(e.metadata.icon,'")')}}),r.a.createElement(Qe.a.Body,{className:"w-75 px-2 py-3"},r.a.createElement(Qe.a.Title,{className:"m-0"},r.a.createElement("h2",{className:"m-0",style:{whiteSpace:"nowrap"}},e.metadata.name)),r.a.createElement(Qe.a.Subtitle,{className:"m-0"},r.a.createElement("h4",{className:"m-0"},e.metadata.categories.join(", ").charAt(0).toUpperCase()+e.metadata.categories.join(", ").slice(1))))))}))))))})),st=t(67),ut=t.n(st),mt=t(515),dt=t(1026),pt=t(1037),gt=t(47),bt=t.n(gt),ft=function(e){var a=e.dimensionName,t=e.dimensionType,n=e.commitLocalMapping,l=e.rollbackLocalMapping,c=Object(pt.a)({item:{id:a,type:"column"},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,a){a.didDrop()?n():l()}}),o=Object(i.a)(c,2),u=o[0].isDragging,m=o[1],d=Object(s.r)(t),p=pe[d];return r.a.createElement("div",{ref:m,className:"column-card ".concat(bt.a["column-card"]," ").concat(u?"is-dragging":"")},r.a.createElement(p,{className:bt.a["data-type-icon"]}),r.a.createElement("span",{className:bt.a["column-title"]},a))},vt=t(1025);var ht=function(e){var a=e.type,t=pe[a];return r.a.createElement("span",null,r.a.createElement(Pe.a,{key:"top",placement:"top",overlay:r.a.createElement(vt.a,{id:"tooltip-top"},"Accepts ",a,"s")},r.a.createElement(t,{className:bt.a["accepted-type-icon"]})))};function Ot(){return(Ot=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function Et(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var jt=r.a.createElement("path",{d:"M8 0a1 1 0 0 1 1 1v5.268l4.562-2.634a1 1 0 1 1 1 1.732L10 8l4.562 2.634a1 1 0 1 1-1 1.732L9 9.732V15a1 1 0 1 1-2 0V9.732l-4.562 2.634a1 1 0 1 1-1-1.732L6 8 1.438 5.366a1 1 0 0 1 1-1.732L7 6.268V1a1 1 0 0 1 1-1z"}),yt=function(e){var a=e.svgRef,t=e.title,n=Et(e,["svgRef","title"]);return r.a.createElement("svg",Ot({width:16,height:16,fill:"currentColor",className:"bi bi-asterisk",viewBox:"0 0 16 16",ref:a},n),t?r.a.createElement("title",null,t):null,jt)},wt=r.a.forwardRef((function(e,a){return r.a.createElement(yt,Ot({svgRef:a},e))}));t.p;var kt=function(){return r.a.createElement(Pe.a,{key:"top",placement:"top",overlay:r.a.createElement(vt.a,{id:"tooltip-top"},"Mandatory")},r.a.createElement(wt,{width:"1rem",height:"1rem",style:{marginRight:"2px"}}))},Ct=t(1038),Nt=t(22),_t=t.n(Nt),St=t(181),Dt=t.n(St),xt=t(250),Tt=t.n(xt),Rt=t(156),Lt=t.n(Rt);function At(e){var a=e.draggingColumn,t=e.index,l=e.isValid,c=e.DataTypeIcon,o=e.columnId,s=e.dimension,u=e.aggregators,m=e.relatedAggregation,d=e.onMove,p=e.onChangeAggregation,g=e.onDeleteItem,b=e.onChangeDimension,f=e.commitLocalMapping,v=e.rollbackLocalMapping,h=(e.onInsertColumn,e.replaceDimension),O=(e.localMappding,Object(n.useRef)(null)),E=Object(Ct.a)({accept:["column","card"],collect:function(e){return{isOver:e.isOver()&&"column"===e.getItem().type}},hover:function(e,a){if(s.multiple&&O.current){var n=t;if(e.dimensionId===s.id){var r,l=e.index;if(l!==n){var c=null===(r=O.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(c.bottom-c.top)/2,i=a.getClientOffset().y-c.top;l<n&&i<o||l>n&&i>o||(d(l,n),e.index=n)}}}},drop:function(e,a){s.multiple||("column"===e.type?b(t,e.id):h(e.dimensionId,s.id,e.index,t))}}),j=Object(i.a)(E,2),y=j[0].isOver,w=j[1],k=Object(pt.a)({item:{type:"card",index:t,id:o,dimensionId:s.id},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,a){a.didDrop()?f():v()}}),N=Object(i.a)(k,2),_=N[0].isDragging;return(0,N[1])(w(O)),r.a.createElement("div",{ref:O,style:{opacity:_||a?.5:1},className:qe()("assigned-column",bt.a["column-card"],bt.a["assigned-column"],l?bt.a["column-valid"]:bt.a["column-invalid"],{"border border-danger":y})},r.a.createElement("span",null,!!c&&r.a.createElement(c,{className:bt.a["data-type-icon"]})),r.a.createElement("span",{className:bt.a["column-title"]},o),s.aggregation&&r.a.createElement(ra.a,{className:"d-inline-block ml-2 raw-dropdown"},r.a.createElement(ra.a.Toggle,{variant:l?"primary":"danger",className:"pr-5"},_t()(ve,m,m)),r.a.createElement(ra.a.Menu,null,u.map((function(e){return r.a.createElement(ra.a.Item,{key:e,onClick:function(){return p(t,e)}},_t()(ve,e,e))})))),r.a.createElement("button",{className:bt.a["remove-assigned"],type:"button",onClick:function(){return g(t)}},r.a.createElement(C.t,null)))}var Ft=Object(s.e)(),Mt=[],It=function(e){var a=e.dimension,t=e.dataTypes,l=e.mapping,c=e.setMapping,u=e.commitLocalMapping,m=e.rollbackLocalMapping,d=e.draggingId,p=e.setDraggingId,g=e.replaceDimension,b=e.localMappding,f=Object(Ct.a)({accept:["column","card"],collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if("column"===e.type){var r,i,u=a.aggregation?Object(s.k)(a,t[e.id]):null,m=Object(s.r)(t[e.id]),d=0===(null===(r=a.validTypes)||void 0===r?void 0:r.length)||(null===(i=a.validTypes)||void 0===i?void 0:i.includes(m));c(Object(o.a)(Object(o.a)({},l),{},{ids:(l.ids||[]).concat(Dt()()),value:[].concat(Object(Ae.a)(l.value||[]),[e.id]),isValid:d,mappedType:m,config:a.aggregation?{aggregation:[].concat(Object(Ae.a)(_t()(l,"config.aggregation")||[]),[u])}:void 0}))}else e.dimensionId!==a.id&&g(e.dimensionId,a.id,e.index,l.value?l.value.length:0,!0)}}),v=Object(i.a)(f,2),h=v[0].isOver,O=v[1],j=Object(n.useCallback)((function(e){c(Object(o.a)(Object(o.a)({},l),{},{config:{aggregation:Object(Ae.a)(e)}}))}),[l,c]),y=_t()(l,"ids",Mt),w=_t()(l,"value",Mt),k=_t()(l,"config.aggregation",Mt),C=Object(n.useCallback)((function(e,a){var t=Object(Ae.a)(k);t[e]=a,j(t)}),[k,j]),N=Object(n.useCallback)((function(e){var a;l.config&&(a=Object(o.a)(Object(o.a)({},l.config),{},{aggregation:l.config.aggregation.filter((function(a,t){return t!==e}))})),c(Object(o.a)(Object(o.a)({},l),{},{ids:l.ids.filter((function(a,t){return t!==e})),value:l.value.filter((function(a,t){return t!==e})),config:a}))}),[l,c]),_=Object(n.useCallback)((function(e,a){c(Object(o.a)(Object(o.a)({},l),{},{value:l.value.map((function(t,n){return n===e?a:t}))}))}),[l,c]),S=Object(n.useCallback)((function(e,a){var t;l.config&&(t=Object(o.a)(Object(o.a)({},l.config),{},{aggregation:Tt()(l.config.aggregation,e,a)})),c(Object(o.a)(Object(o.a)({},l),{},{ids:Tt()(l.ids,e,a),value:Tt()(l.value,e,a),config:t}),!0)}),[l,c]),D=Object(n.useCallback)((function(e,n){var r,i,u=a.aggregation?Object(s.k)(a,t[n.id]):null,m=Dt()();p(m),c(Object(o.a)(Object(o.a)({},l),{},{ids:Lt()(null!==(r=l.ids)&&void 0!==r?r:[],e,m),value:Lt()(null!==(i=l.value)&&void 0!==i?i:[],e,n.id),config:a.aggregation?{aggregation:Lt()(_t()(l,"config.aggregation",[]),e,u)}:void 0}),!0)}),[t,a,l,p,c]);return r.a.createElement(E.a,{xs:6,lg:4,xl:4},r.a.createElement("div",{className:bt.a["chart-dimension"]+" user-select-none"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center ".concat(bt.a["chart-dimension-header"])},r.a.createElement("span",{className:"text-left"},a.validTypes.map((function(e){return r.a.createElement(ht,{key:e,type:e})}))),r.a.createElement("span",{className:"text-capitalize text-center"},a.name),r.a.createElement("span",{className:bt.a["dimension-required"]+" text-right",style:{opacity:a.required?1:0}},a.required&&r.a.createElement(kt,null))),y.map((function(e,n){var l,c,o=w[n],i=Object(s.r)(t[o]),p=a.aggregation?k[n]||Object(s.k)(a,i):void 0,f=0===(null===(l=a.validTypes)||void 0===l?void 0:l.length)||(null===(c=a.validTypes)||void 0===c?void 0:c.includes(i)),v=pe[Object(s.r)(t[o])];return r.a.createElement(At,{id:e,key:e,index:n,onMove:S,onChangeDimension:_,onChangeAggregation:C,onDeleteItem:N,isValid:f,DataTypeIcon:v,columnId:o,dimension:a,aggregators:Ft,relatedAggregation:p,commitLocalMapping:u,rollbackLocalMapping:m,onInsertColumn:D,draggingColumn:d===e,replaceDimension:g,localMappding:b})})),(a.multiple||0===w.length)&&r.a.createElement("div",{className:qe()("dropzone",bt.a.dropzone,Object(Se.a)({},bt.a.active,h)),ref:O},!a.multiple&&"Drop dimension here",a.multiple&&0===w.length&&"Drop dimensions here",a.multiple&&w.length>0&&"Drop another dimension here")))};function Pt(e,a){var t;return e.config&&(t=Object(o.a)(Object(o.a)({},e.config),{},{aggregation:e.config.aggregation.filter((function(e,t){return t!==a}))})),Object(o.a)(Object(o.a)({},e),{},{ids:e.ids.filter((function(e,t){return t!==a})),value:e.value.filter((function(e,t){return t!==a})),config:t})}function Ut(e,a,t){return e.map((function(e,n){return n===a?t:e}))}function qt(e,a,t,n,r,l,c,i){var u,m,d,p,g,b,f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],v={};v.aggregation=null===(u=a[t])||void 0===u||null===(m=u.config)||void 0===m||null===(d=m.aggregation)||void 0===d?void 0:d[r],v.value=a[t].value[r];var h,O=f?Lt.a:Ut,E=a[n]||{},j=Object(o.a)(Object(o.a)({},E),{},{ids:O(null!==(p=E.ids)&&void 0!==p?p:[],l,e),value:O(null!==(g=E.value)&&void 0!==g?g:[],l,v.value)}),y=c[n];c.aggregation&&(h=v.aggregation?v.aggregation:Object(s.k)(y,i[v.value]),j.config={aggregation:O(_t()(E,"config.aggregation",[]),l,h)});var w=Object(o.a)(Object(o.a)({},a),{},(b={},Object(Se.a)(b,t,Pt(a[t],r)),Object(Se.a)(b,n,j),b));return w}var Vt=r.a.memo(r.a.forwardRef((function(e,a){var t=e.dataTypes,l=e.dimensions,c=e.mapping,s=e.setMapping,u=Object(n.useState)(c),m=Object(i.a)(u,2),d=m[0],p=m[1],g=Object(n.useCallback)((function(e,a,t){p((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(Se.a)({},e,a))})),t||s((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(Se.a)({},e,a))}))}),[s]),b=Object(n.useCallback)((function(e,a,n,r){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=Dt()();c&&j(o),p((function(i){return qt(o,i,e,a,n,r,l,t,c)})),c||s((function(c){return qt(o,c,e,a,n,r,l,t)}))}),[t,l,s]),f=Object(n.useState)(null),v=Object(i.a)(f,2),h=v[0],j=v[1],y=Object(n.useCallback)((function(){p(c),j(null)}),[c]),w=function(){s(k.current),j(null)},k=Object(n.useRef)();return Object(n.useEffect)((function(){k.current=d})),Object(n.useImperativeHandle)(a,(function(){return{clearLocalMapping:function(){p({})}}})),r.a.createElement(dt.a,{backend:mt.a},r.a.createElement(O.a,null,r.a.createElement(E.a,{xs:3},r.a.createElement("h5",{className:"text-uppercase"},"Dimensions"),ut()(t,(function(e,a){return r.a.createElement(ft,{key:a,dimensionName:a,dimensionType:e,commitLocalMapping:w,rollbackLocalMapping:y})}))),r.a.createElement(E.a,null,r.a.createElement("h5",{className:"text-uppercase"},"Chart Variables"),r.a.createElement(O.a,{className:"sticky-top",style:{top:"calc(var(--header-height) + 16px)"}},l.map((function(e){return r.a.createElement(It,{key:e.id,dimension:e,dataTypes:t,mapping:d[e.id]||{},setMapping:function(a){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return g(e.id,a,t)},commitLocalMapping:w,rollbackLocalMapping:y,draggingId:h,setDraggingId:j,replaceDimension:b,localMappding:d})}))))))}))),Bt=t(57),Gt=t.n(Bt),Wt=r.a.memo((function(e){var a=e.options,t=void 0===a?[]:a,n=e.value,l=e.error,c=e.onChange,o=e.default,i=e.label,s=Object(Fe.a)(e,["options","value","error","onChange","default","label"]);return r.a.createElement(O.a,{className:s.className},r.a.createElement(E.a,{xs:6,className:"d-flex align-items-center nowrap"},i),r.a.createElement(E.a,{xs:6},r.a.createElement("select",{className:"custom-select raw-select",value:null!==n&&void 0!==n?n:o,onChange:function(e){var a=e.target.value,t="number"===s.type?Number(a):a;c(t)}},t.map((function(e){return Gt()(e)?r.a.createElement("option",{key:e.value,value:e.value},e.label):r.a.createElement("option",{key:e,value:e},e)}))),l&&r.a.createElement("small",null,r.a.createElement("i",null,l))))})),zt=r.a.memo((function(e){var a=e.value,t=e.error,n=e.onChange,l=e.default,c=e.label,o=e.isEnabled,i=Object(Fe.a)(e,["value","error","onChange","default","label","isEnabled"]);return i.options?r.a.createElement(Wt,Object.assign({value:a,error:t,onChange:n,default:l,disabled:!o,label:c},i)):r.a.createElement(O.a,{className:i.className},r.a.createElement(E.a,{xs:6,className:"d-flex align-items-center nowrap"},c),r.a.createElement(E.a,{xs:6},r.a.createElement("input",{className:"w-100 form-control text-field",type:"number",value:null!==a&&void 0!==a?a:"",step:i.step,min:i.min,max:i.max,disabled:!o,onChange:function(e){var a=e.target.value;if(""===a)n(void 0);else{var t=parseFloat(a);isNaN(t)?n(void 0):n(t)}},placeholder:l})),t&&r.a.createElement("small",null,r.a.createElement("i",null,t)))})),Ht=r.a.memo((function(e){var a=e.value,t=e.error,n=e.onChange,l=e.default,c=e.label,o=e.isEnabled,i=Object(Fe.a)(e,["value","error","onChange","default","label","isEnabled"]);return i.options?r.a.createElement(Wt,Object.assign({value:a,error:t,onChange:n,default:l,label:c},i)):r.a.createElement("label",{className:"d-block"},r.a.createElement("b",null,c),r.a.createElement("br",null),r.a.createElement("input",{type:"text",value:null!==a&&void 0!==a?a:"",step:i.step,disabled:!o,onChange:function(e){n(e.target.value)},placeholder:l}),t&&r.a.createElement("small",null,r.a.createElement("i",null,t)))})),Kt=t(186),Yt=t.n(Kt),Jt=t(512);function Xt(e){var a=e.color,t=e.onChange,l=e.disabled,c=Object(n.useState)(!1),o=Object(i.a)(c,2),s=o[0],u=o[1],m=null!==a&&void 0!==a?a:"#000000";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Yt.a.swatch,onClick:function(){return u(!0)}},r.a.createElement("div",{className:Yt.a.color,style:{background:m}}),m.toUpperCase()),s&&r.a.createElement("div",{className:Yt.a.popover},r.a.createElement("div",{className:Yt.a.cover,onClick:function(){return u(!1)}}),r.a.createElement(Jt.SketchPicker,{disabled:l,disableAlpha:!0,color:m,onChangeComplete:function(e){return t(e.hex)}})))}var Qt=r.a.memo((function(e){var a=e.value,t=e.error,n=e.onChange,l=e.default,c=e.label,o=e.isEnabled,i=Object(Fe.a)(e,["value","error","onChange","default","label","isEnabled"]);return i.options?r.a.createElement(Wt,Object.assign({value:a,error:t,onChange:n,default:l,label:c},i)):r.a.createElement("label",{className:i.className+" row"},r.a.createElement(E.a,{xs:6,className:"d-flex align-items-center"},c),r.a.createElement(E.a,{xs:6},r.a.createElement(Xt,{disabled:!o,color:a,onChange:n})),t&&r.a.createElement("small",null,r.a.createElement("i",null,t)))})),$t=t(45),Zt=t.n($t),en=r.a.memo((function(e){var a,t=e.label,n=e.scale,l=e.numSamples,c=void 0===l?150:l;return a=n.ticks?n.ticks(c):n.domain?n.domain():[],r.a.createElement("div",{className:Zt.a["scheme-preview"]},t&&r.a.createElement("div",{style:{marginBottom:2}},_t()(Oe,t,t)),r.a.createElement("div",{className:"d-flex"},a.map((function(e){return r.a.createElement("div",{key:"sample-"+e,style:{flex:1,height:10,background:n(e)}})}))))})),an=r.a.memo((function(e){var a=e.interpolators,t=e.interpolator,n=e.setInterpolator,l=e.colorDataset,c=e.colorDataType,o=e.scaleType,i=e.currentFinalScale;return r.a.createElement(ra.a,{className:"d-inline-block raw-dropdown w-100"},r.a.createElement(ra.a.Toggle,{variant:"white",className:"w-100",style:{paddingRight:24},disabled:!c},i&&r.a.createElement(en,{scale:i})),c&&r.a.createElement(ra.a.Menu,{className:"w-100"},a.map((function(e){return r.a.createElement(ra.a.Item,{key:e,onClick:function(){return n(e)},className:Zt.a["color-scheme-dropdown-item"]},l[0]&&s.b[o][t]&&r.a.createElement(en,{scale:Object(s.q)(o,Object(s.g)(l,c,o),e),label:e}))}))))}));function tn(e){var a=e.resetScale;return r.a.createElement(Pe.a,{key:"bottom",placement:"bottom",overlay:r.a.createElement(vt.a,{id:"tooltip-top"},"Reset domain")},r.a.createElement("span",{type:"button",className:"btn",onClick:a},r.a.createElement(C.a,{width:"16",height:"16"})))}function nn(e){var a=e.invertScale;return r.a.createElement(Pe.a,{key:"bottom",placement:"bottom",overlay:r.a.createElement(vt.a,{id:"tooltip-top"},"Invert")},r.a.createElement("span",{type:"button",className:"btn",onClick:a},r.a.createElement(C.b,{width:"16",height:"16"})))}function rn(e){var a=e.handleChangeLocked,t=e.locked;return r.a.createElement(Pe.a,{key:"bottom",placement:"bottom",overlay:r.a.createElement(vt.a,{id:"tooltip-top"},t?"Unlock":"Lock"," scale")},r.a.createElement("span",{type:"button",className:"btn ".concat(t?"Xbtn-primary":""),onClick:function(){return a(!t)}},t?r.a.createElement(C.r,{width:"16",height:"16"}):r.a.createElement(C.o,{width:"16",height:"16"})))}var ln=t(513),cn=t.n(ln);function on(e){var a=Object(n.useRef)();return Object(n.useEffect)((function(){a.current=e}),[e]),a.current}function sn(e){return 0===e.userDomain?0:e.userDomain?"date"===Object(s.s)(e.userDomain)?e.userDomain.toISOString().substring(0,10):e.userDomain:""}var un=function(e){var a=e.value,t=(e.error,e.onChange),l=e.defaultValue,c=(e.label,e.dimension,e.dataset,e.mapping,e.dataTypes,e.chart,e.mappedData,e.mappingValue),u=e.colorDataset,m=e.colorDataType,d=e.hasAnyMapping,p=Object(Fe.a)(e,["value","error","onChange","defaultValue","label","dimension","dataset","mapping","dataTypes","chart","mappedData","mappingValue","colorDataset","colorDataType","hasAnyMapping"]),g=Object(n.useRef)(!!a.__loaded),b=Object(n.useState)(_t()(a,"scaleType")),f=Object(i.a)(b,2),v=f[0],h=f[1],j=Object(n.useMemo)((function(){var e=_t()(l,"defaultColor","#cccccc");return _t()(a,"defaultColor",e)}),[l,a]),y=Object(n.useState)(_t()(a,"locked")),w=Object(i.a)(y,2),k=w[0],C=w[1],N=Object(n.useMemo)((function(){return Object(s.f)(m,u)}),[m,u]),_=Object(n.useState)(_t()(a,"scaleType")?Object.keys(s.b[_t()(a,"scaleType")]):[]),S=Object(i.a)(_,2),D=S[0],x=S[1],T=Object(n.useState)(_t()(a,"interpolator")),R=Object(i.a)(T,2),L=R[0],A=R[1],F=Object(n.useState)(_t()(a,"userScaleValues",[]).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{userDomain:e.domain,userRange:e.range})}))),M=Object(i.a)(F,2),I=M[0],P=M[1],U=Object(n.useCallback)((function(e,a,t,n){if(a&&e&&s.b[a][e]&&t&&t.length&&t.map((function(e){return e.domain})).filter((function(e){return void 0!==e})).length)return Object(s.h)(u,m,a,e,t)}),[m,u]),q=Object(n.useCallback)((function(e,a){if(!u.length||!m||!a)return[];if(!s.b[a][e])return[];var t=Object(s.g)(u,m,a);return Object(s.o)(t,a,e).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{userRange:e.range,userDomain:e.domain})}))}),[m,u]),V=Object(n.useCallback)((function(e){return e.map((function(e){var a;return{range:e.userRange,domain:"date"===m?null===(a=e.userDomain)||void 0===a?void 0:a.toString():e.userDomain}}))}),[m]),B=Object(n.useMemo)((function(){if(v&&L){var e=I&&I.length?I:q(L,v),a=V(e);return U(L,v,a)}return Object(s.j)()}),[U,q,V,L,v,I]),G=Object(n.useCallback)((function(e){var a=V(e);t({scaleType:v,interpolator:L,userScaleValues:a,defaultColor:j,locked:k})}),[V,v,L,j,k,t]),W=Object(n.useCallback)((function(e,a){var t=Object(Ae.a)(I);t[e].userRange=a,P(t),G(t)}),[G,I]),z=Object(n.useCallback)((function(e,a){var t=Object(Ae.a)(I);t[e].userDomain=a,P(t),G(t)}),[G,I]),H=Object(n.useCallback)((function(e){h(e);var a=s.b[e]?Object.keys(s.b[e]):[];x(a);var n=a[0];A(n);var r=q(n,e);P(r);var l=V(r);t({scaleType:e,interpolator:n,userScaleValues:l,defaultColor:j,locked:k})}),[q,V,j,t,k]),K=Object(n.useCallback)((function(e,a){A(e);var n=q(e,v);P(n);var r=V(n);if(a){var l=cn()(a,"domain");r=r.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{range:l[e.domain.toString()]?l[e.domain.toString()].userRange:e.range})}))}t({scaleType:v,interpolator:e,userScaleValues:r,defaultColor:j,locked:k})}),[q,V,t,v,j,k]),Y=Object(n.useCallback)((function(e){C(e),g.current=!0,t({scaleType:v,interpolator:L,userScaleValues:I,defaultColor:j,locked:e})}),[v,L,I,j,t]),J=Object(n.useCallback)((function(){K(L,I)}),[K,L,I]),X=Object(n.useCallback)((function(){var e=Object(Ae.a)(I);e.reverse();var a=I.map((function(a,t){return Object(o.a)(Object(o.a)({},a),{},{userRange:e[t].userRange,range:e[t].range})}));P(a),G(a)}),[G,I]),Q=on(c);return Object(n.useEffect)((function(){Q&&c!==Q&&(g.current=!1)}),[c,Q]),Object(n.useEffect)((function(){if(!g.current&&!k){var e=N[0];H(e)}}),[N,H,k]),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{className:p.className,style:{marginTop:"8px",marginBottom:"8px"}},r.a.createElement(E.a,{xs:5,className:"d-flex align-items-center nowrap"},"Color scale"),r.a.createElement(E.a,{xs:7},r.a.createElement(ra.a,{className:"d-inline-block raw-dropdown w-100"},r.a.createElement(ra.a.Toggle,{variant:"white",className:"w-100",style:{paddingRight:24},disabled:!m},_t()(he,v,v)),r.a.createElement(ra.a.Menu,{className:"w-100"},N.map((function(e){return r.a.createElement(ra.a.Item,{key:e,onClick:function(){return H(e)}},_t()(he,e,e))})))))),r.a.createElement(O.a,{className:[p.className].join(" "),style:{marginTop:"8px",marginBottom:"8px"}},r.a.createElement(E.a,{xs:5,className:"d-flex align-items-center nowrap"},"Color scheme"),r.a.createElement(E.a,{xs:7},r.a.createElement(an,{interpolators:D,interpolator:L,setInterpolator:K,colorDataset:u,colorDataType:m,scaleType:v,currentFinalScale:B}))),m&&I&&r.a.createElement("div",{className:Zt.a["color-swatches-list"]},I.map((function(e,a){return r.a.createElement(O.a,{key:a,className:[Zt.a["chart-option"],Zt.a["color-swatch"],"ordinal"!==v?Zt.a["not-ordinal"]:Zt.a.ordinal].join(" ")},r.a.createElement(E.a,{xs:12},r.a.createElement("div",{className:Zt.a["color-scale-item"]},"ordinal"===v&&void 0!==_t()(e,"domain")&&r.a.createElement("span",{className:"nowrap text-truncate pr-2",title:e.domain&&e.domain.toString()},""===e.domain?"[empty string]":e.domain.toString()),"ordinal"!==v&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"nowrap"},0===a?"Start":a===I.length-1?"End":"Middle"),r.a.createElement("input",{disabled:k,type:Object(s.s)(e.userDomain),className:"form-control text-field",value:sn(e),onChange:function(e){z(a,"date"===m?new Date(e.target.value):e.target.value)}})),r.a.createElement(Xt,{color:e.userRange,onChange:function(e){W(a,e)}}))))})),r.a.createElement(O.a,null,r.a.createElement(E.a,{className:"d-flex justify-content-end"},r.a.createElement(tn,{resetScale:J}),r.a.createElement(nn,{invertScale:X}),"ordinal"!==v&&r.a.createElement(rn,{locked:k,handleChangeLocked:Y}))))):null},mn=function(e){var a=e.value,t=(e.error,e.onChange),l=e.default,c=(e.label,e.dimension,e.dataset,e.mapping,e.dataTypes,e.chart,e.mappedData,e.mappingValue,e.colorDataType,e.colorDataset,Object(Fe.a)(e,["value","error","onChange","default","label","dimension","dataset","mapping","dataTypes","chart","mappedData","mappingValue","colorDataType","colorDataset"]),Object(n.useMemo)((function(){var e=_t()(l,"defaultColor","#cccccc");return _t()(a,"defaultColor",e)}),[l,a])),s=Object(n.useState)(c),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useCallback)((function(e){d(e);var n=Object(o.a)(Object(o.a)({},a),{},{defaultColor:e});t(n)}),[a,t]);return Object(n.useEffect)((function(){l&&l.defaultColor!==m&&p(l.defaultColor)}),[m,l,p]),r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:[Zt.a["chart-option"],"row"].join(" ")},r.a.createElement(E.a,{xs:6,className:"d-flex align-items-center"},"Default"),r.a.createElement(E.a,{xs:6},r.a.createElement(Xt,{color:m,onChange:p}))))},dn=function(e){var a=e.value,t=e.onChange,l=e.default,c=e.mappingValue,o=e.colorDataType,i=e.colorDataset,s=Object(n.useMemo)((function(){return i&&i.length>0}),[i]);return r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(mn,{onChange:t,defaultValue:l,value:a}),s&&r.a.createElement(un,{hasAnyMapping:s,mappingValue:c,defaultValue:l,value:a,colorDataType:o,colorDataset:i,onChange:t}))},pn=t(1031),gn=r.a.memo((function(e){var a=e.optionId,t=e.label,n=e.value,l=e.error,c=e.onChange,o=e.className,i=e.isEnabled;return r.a.createElement(O.a,{className:o},r.a.createElement(E.a,{xs:6,className:"d-flex align-items-center nowrap"},t),r.a.createElement(pn.a,{className:"col-6 d-flex align-items-center"},r.a.createElement(pn.a.Check,{type:"switch",checked:!!n,disabled:!i,onChange:function(e){c(e.target.checked)},id:a,label:n?"Yes":"No"})),l&&r.a.createElement("div",{className:"col-12"},r.a.createElement("small",null,r.a.createElement("i",null,l))))})),bn=t(315),fn=t.n(bn),vn={number:zt,text:Ht,color:Qt,colorScale:dn,boolean:gn};function hn(e,a,t){var n=_t()(e[a],"value[".concat(t,"]"));return Object(o.a)(Object(o.a)({},e),{},Object(Se.a)({},a,Object(o.a)(Object(o.a)({},e[a]),{},{value:[n]})))}function On(e,a,t){return Array.isArray(e)?e.map((function(e){var n=_t()(e[a],"[".concat(t,"]"));return Object(o.a)(Object(o.a)({},e),{},Object(Se.a)({},a,n))})):e}function En(e,a){return Array.isArray(e.repeatDefault)?_t()(e.repeatDefault,"[".concat(a,"]"),e.default):e.default}function jn(e){var a=e.type,t=e.optionId,l=e.setVisualOptions,c=e.label,i=e.repeatIndex,u=Object(Fe.a)(e,["type","optionId","setVisualOptions","label","repeatIndex"]),m=vn[a],d=Object(n.useMemo)((function(){return"colorScale"!==a?null:Object.keys(fn()(u.visualOptions,t)).map((function(e){return JSON.stringify(_t()(u.visualOptions,e,""))})).join("-")}),[a,u.visualOptions,t]),p=Object(n.useMemo)((function(){if("colorScale"!==a)return null;if(!u.domain||!u.chart[u.domain])return null;try{return u.chart[u.domain](u.mappedData,u.mapping,u.visualOptions)}catch(e){return null}}),[a,u.chart,u.domain,u.mappedData,u.mapping,d]),g=Object(n.useMemo)((function(){return"colorScale"!==a?null:p?"__custom__":_t()(u.mapping,"[".concat(u.dimension,"].value"))}),[p,u.dimension,u.mapping,a]),b=Object(n.useMemo)((function(){return"colorScale"!==a?null:p?p.type:u.dataTypes[g]?Object(s.r)(u.dataTypes[g]):"string"}),[a,u.dataTypes,p,g]),f=Object(n.useMemo)((function(){return"colorScale"!==a?null:p?p.domain:u.mappedData?u.mappedData.map((function(e){return _t()(e,u.dimension)})).filter((function(e){return void 0!==e&&!(Array.isArray(e)&&!e.length)})):[]}),[a,u.dimension,p,u.mappedData]),v=Object(n.useCallback)((function(e){l((function(a){var n=e;return void 0!==i&&((n=a[t]||[])[i]=e),Object(o.a)(Object(o.a)({},a),{},Object(Se.a)({},t,n))}))}),[t,i,l]);return r.a.createElement(m,Object.assign({type:a,domainFromChart:p,mappingValue:g,colorDataType:b,colorDataset:f,optionId:t,label:void 0!==i?r.a.createElement(r.a.Fragment,null,c," (",i+1,")"):c},fn()(u,["mapping","visualOptions","chart","dataset","dataTypes","mappedData"]),{onChange:v}))}var yn=function(e){var a=e.chart,t=e.dataset,l=e.mapping,c=e.dataTypes,u=e.visualOptions,m=e.setVisualOptions,d=e.error,p=e.mappedData,g=Object(n.useMemo)((function(){return Object(s.p)(null===a||void 0===a?void 0:a.visualOptions)}),[a]),b=Object(n.useState)((function(){var e={};for(var a in g){var t=g[a].group;e.hasOwnProperty(t)||(e[t]=!0)}return e})),f=Object(i.a)(b,2),v=f[0],h=f[1],j=Object(n.useMemo)((function(){return Object(s.n)(g,u,l)}),[g,u,l]),y=Object(n.useMemo)((function(){var e={};for(var a in g){var t=g[a].group;e.hasOwnProperty(t)||(e[t]="artboard"!==t)}return h(e),Object.keys(g).reduce((function(e,a){var t=g[a],n=(null===t||void 0===t?void 0:t.group)||"";return e[n]||(e[n]={}),e[n][a]=t,e}),{})}),[g]),w=Object(n.useMemo)((function(){var e=Object(s.l)(g,l),a=Object(o.a)(Object(o.a)({},e),u);return Object(s.i)(g,a)}),[l,g,u]);return r.a.createElement("div",{className:[Zt.a["chart-options"],"col-4","col-xl-3"].join(" ")},ut()(y,(function(e,n){return r.a.createElement("div",{key:n,groupname:n,className:[Zt.a["options-group"],v[n]?Zt.a.collapsed:""].join(" ")},r.a.createElement(O.a,{className:"sticky-top"},r.a.createElement(E.a,{className:"d-flex justify-content-between align-items-center ".concat(Zt.a["group-header"])},r.a.createElement("h5",{className:"text-uppercase m-0"},n),r.a.createElement("span",{className:[Zt.a["collapse-button"],"cursor-pointer"].join(" "),onClick:function(){return h(Object(o.a)(Object(o.a)({},v),{},Object(Se.a)({},n,!v[n])))}}))),ut()(e,(function(e,n){var o;return e.repeatFor?_t()(l,"[".concat(e.repeatFor,"].value"),[]).map((function(o,i){var s,g,b;return r.a.createElement(jn,Object.assign({className:Zt.a["chart-option"],key:n+i,repeatIndex:i},e,{optionId:n,error:null===d||void 0===d||null===(s=d.errors)||void 0===s?void 0:s[n+i],value:null!==(g=null===u||void 0===u||null===(b=u[n])||void 0===b?void 0:b[i])&&void 0!==g?g:En(e,i),mapping:"colorScale"===e.type?hn(l,e.repeatFor,i):void 0,chart:"colorScale"===e.type?a:void 0,dataset:"colorScale"===e.type?t:void 0,dataTypes:"colorScale"===e.type?c:void 0,visualOptions:"colorScale"===e.type?u:void 0,mappedData:On(p,e.repeatFor,i),setVisualOptions:m,isEnabled:j[n]}))})):r.a.createElement(jn,Object.assign({className:Zt.a["chart-option"],key:n},e,{optionId:n,error:null===d||void 0===d||null===(o=d.errors)||void 0===o?void 0:o[n],value:null===u||void 0===u?void 0:u[n],mapping:"colorScale"===e.type?l:void 0,chart:"colorScale"===e.type?a:void 0,dataset:"colorScale"===e.type?t:void 0,dataTypes:"colorScale"===e.type?c:void 0,visualOptions:"colorScale"===e.type?u:void 0,mappedData:p,setVisualOptions:m,isEnabled:j[n]}))})),"artboard"===n&&u.showLegend&&r.a.createElement("p",{className:"small"},"The final output will be ",null===w||void 0===w?void 0:w.width,"px *"," ",null===w||void 0===w?void 0:w.height,"px including the legend."))})))};var wn=r.a.memo((function(e){var a=e.chart,t=e.dataset,l=e.dataTypes,c=e.mapping,o=e.visualOptions,u=e.error,m=e.setError,d=e.setRawViz,p=e.mappedData,g=Object(n.useRef)(null),b=function(e,a){var t=Object(n.useState)(e),r=Object(i.a)(t,2),l=r[0],c=r[1];return Object(n.useEffect)((function(){var t=setTimeout((function(){c(e)}),a);return function(){clearTimeout(t)}}),[e,a]),l}(o,200);return Object(n.useEffect)((function(){m(null);var e=[];for(var n in c)c[n].ids&&c[n].ids.length>0&&e.push(n);var o=a.dimensions.filter((function(a){return a.required&&-1===e.indexOf(a.id)}));if(o.length>0){var i=r.a.createElement("span",null,"Required chart variables: you need to map"," ",o.map((function(e,a){return r.a.createElement("span",{key:a,className:"font-weight-bold"},e.name)})).reduce((function(e,a){return[e," and ",a]})));for(m({variant:"secondary",message:i}),d(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild)}else{var u=a.dimensions.filter((function(e){return e.multiple&&e.required&&e.minValues&&c[e.id].ids.length<e.minValues}));if(u.length>0){var f=r.a.createElement("span",null,"Please map"," ",u.map((function(e){return r.a.createElement(r.a.Fragment,null,"at least ",r.a.createElement("span",{className:"font-weight-bold"},e.minValues)," ","dimensions on ",r.a.createElement("span",{className:"font-weight-bold"},e.name))})).reduce((function(e,a){return[e," and ",a]})),".");for(m({variant:"secondary",message:f}),d(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild)}else{var v=function(e){if(c[e].ids&&c[e].ids.length>0&&!c[e].isValid){var t=a.dimensions.find((function(a){return a.id===e})),n="Data-type mismatch: you can\u2019t map ".concat(c[e].mappedType,"s on ").concat(t.name,".");for(m({variant:"danger",message:n}),d(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild);return{v:void 0}}};for(var h in c){var O=v(h);if("object"===typeof O)return O.v}if(p)try{var E=Object(s.a)(a,{data:t,mapping:c,dataTypes:l,visualOptions:b});try{var j=E.renderToDOM(g.current,p);d(j),m(null)}catch(y){console.log("chart error",y),m({variant:"danger",message:"Chart error. "+y.message}),d(null)}}catch(y){for(;g.current.firstChild;)g.current.removeChild(g.current.firstChild);console.log({e:y}),m({variant:"danger",message:"Chart error. "+y.message}),d(null)}else for(d(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild)}}}),[m,b,d,p,a,c]),r.a.createElement("div",{className:"col-8 col-xl-9"},r.a.createElement("div",{className:["overflow-auto","position-sticky"].join(" "),style:{top:"calc(15px + var(--header-height))"}},u&&r.a.createElement(et,{variant:u.variant,message:u.message}),r.a.createElement("div",{ref:g})))})),kn=function(e){var a=e.chart,t=e.dataset,l=e.dataTypes,c=e.mapping,o=e.visualOptions,s=e.setVisualOptions,u=e.setRawViz,m=e.setMappingLoading,d=Object(n.useState)({variant:"secondary",message:"Required chart variables"}),p=Object(i.a)(d,2),g=p[0],b=p[1],f=Object(n.useState)(null),v=Object(i.a)(f,2),h=v[0],E=v[1];return Object(n.useEffect)((function(){try{m(!0),function(e,a){var t=a.data,n=a.mapping,r=a.visualOptions,l=a.dataTypes;try{T.terminate()}catch(c){}return T=new je,Ee.a(T).mapData(e,{data:t,mapping:n,visualOptions:r,dataTypes:l})}(a.metadata.name,{data:t,mapping:c,dataTypes:l}).then((function(e){m(!1),E(e)})).catch((function(e){console.error(e),m(!1),E(null)}))}catch(e){console.error(e),m(!1),E(null)}}),[a,c,l,b,u,m,t]),r.a.createElement(O.a,null,r.a.createElement(yn,{chart:a,dataset:t,mapping:c,dataTypes:l,visualOptions:o,setVisualOptions:s,error:g,mappedData:h}),r.a.createElement(wn,{chart:a,dataset:t,dataTypes:l,mapping:c,visualOptions:o,error:g,setError:b,setRawViz:u,mappedData:h}))},Cn=t(1027),Nn=t(1028);function _n(e,a){var t=document.createElement("a");return t.href=e,t.download=a||"download",t.click(),t}function Sn(e){var a=e.rawViz,t=e.exportProject,l=Object(n.useCallback)((function(e){var t=(new XMLSerializer).serializeToString(a._node.firstChild),n=window.URL||window.webkitURL||window,r=new Blob([t],{type:"image/svg+xml;charset=utf-8"});_n(n.createObjectURL(r),e),n.revokeObjectURL(r)}),[a]),c=Object(n.useCallback)((function(e,t){var n=(new XMLSerializer).serializeToString(a._node.firstChild),r=window.URL||window.webkitURL||window,l=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),c=r.createObjectURL(l),o=document.createElement("canvas");o.height=a._node.firstChild.clientHeight,o.width=a._node.firstChild.clientWidth;var i=o.getContext("2d"),s=new Image;s.onload=function(){i.drawImage(s,0,0),_n(o.toDataURL(e),t),r.revokeObjectURL(l)},s.src=c}),[a]),o=Object(n.useCallback)((function(e){var a=t(),n=JSON.stringify(a),r=new Blob([n],{type:"application/json"}),l=window.URL||window.webkitURL||window,c=l.createObjectURL(r);_n(c,e),l.revokeObjectURL(c)}),[t]),s=Object(n.useState)("svg"),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)("viz"),g=Object(i.a)(p,2),b=g[0],f=g[1],v=Object(n.useCallback)((function(){switch(m){case"svg":l("".concat(b,".svg"));break;case"png":c("image/png","".concat(b,".png"));break;case"jpg":c("image/jpeg","".concat(b,".jpg"));break;case"rawgraphs":o("".concat(b,".rawgraphs"))}}),[b,m,c,o,l]);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-sm-3"},r.a.createElement(Cn.a,{className:"mb-3 raw-input-group"},r.a.createElement("input",{type:"text",className:"form-control text-field",value:b,onChange:function(e){return f(e.target.value)}}),r.a.createElement(Nn.a,{as:Cn.a.Append,title:".".concat(m),id:"input-group-dropdown-1",className:"raw-dropdown"},["svg","png","jpg","rawgraphs"].map((function(e){return r.a.createElement(ra.a.Item,{key:e,onClick:function(){return d(e)}},".",e)}))))),r.a.createElement("div",{className:"col col-sm-2"},r.a.createElement("button",{className:"btn btn-primary btn-block raw-btn",onClick:v},"Download")))}var Dn=t(215),xn=t.n(Dn),Tn=t(514),Rn=t.n(Tn);var Ln=function(){var e=Le(),a=e.userInput,t=e.userData,l=e.userDataType,c=e.parseError,m=e.unstackedData,d=e.unstackedColumns,p=e.data,g=e.separator,f=e.thousandsSeparator,v=e.decimalsSeparator,h=e.locale,O=e.stackDimension,E=e.dataSource,j=e.loading,w=e.hydrateFromSavedProject,k=Object(n.useState)(null),C=Object(i.a)(k,2),N=C[0],S=C[1],D=Object(n.useState)({}),x=Object(i.a)(D,2),T=x[0],L=x[1],A=Object(n.useState)({}),F=Object(i.a)(A,2),M=F[0],I=F[1],P=Object(n.useState)(null),U=Object(i.a)(P,2),q=U[0],V=U[1],B=Object(n.useState)(!1),G=Object(i.a)(B,2),W=G[0],z=G[1],H=Object(n.useRef)(null),K=Object(n.useMemo)((function(){if(_t()(p,"dataTypes"))return Object.keys(p.dataTypes)}),[p]),Y=on(K),J=Object(n.useCallback)((function(){H.current&&H.current.clearLocalMapping()}),[]);Object(n.useEffect)((function(){Y&&(K?Y.join(".")!==K.join(".")&&(L({}),J()):(L({}),J()))}),[K,Y,J]);var X=Object(n.useCallback)((function(e){L({}),J(),S(e);var a=Object(s.p)(null===e||void 0===e?void 0:e.visualOptions);I(Object(s.l)(a)),V(null)}),[J]),Q=Object(n.useCallback)((function(){return Object(s.w)({userInput:a,userData:t,userDataType:l,parseError:c,unstackedData:m,unstackedColumns:d,data:p,separator:g,thousandsSeparator:f,decimalsSeparator:v,locale:h,stackDimension:O,dataSource:E,currentChart:N,mapping:T,visualOptions:M})}),[N,p,E,v,h,T,c,g,O,f,t,l,a,M,d,m]),$=Object(n.useCallback)((function(e){w(e),S(e.currentChart),L(e.mapping);var a=Object(o.a)({},e.visualOptions);Object.keys(a).forEach((function(e){xn()(a[e])&&(a[e].__loaded=!0)})),I(e.visualOptions)}),[w]);return Object(n.useEffect)((function(){var e;S(Ha[0]);var a=Object(s.p)(null===(e=Ha[0])||void 0===e?void 0:e.visualOptions);I(Object(s.l)(a))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(b,{menuItems:u}),r.a.createElement("div",{className:"app-sections"},r.a.createElement(y,{title:"1. Load your data",loading:j},r.a.createElement(tt,Object.assign({},e,{hydrateFromProject:$}))),p&&r.a.createElement(y,{title:"2. Choose a chart"},r.a.createElement(it,{availableCharts:Ha,currentChart:N,setCurrentChart:X})),p&&N&&r.a.createElement(y,{title:"3. Mapping",loading:W},r.a.createElement(Vt,{ref:H,dimensions:N.dimensions,dataTypes:p.dataTypes,mapping:T,setMapping:L})),p&&N&&r.a.createElement(y,{title:"4. Customize"},r.a.createElement(kn,{chart:N,dataset:p.dataset,dataTypes:p.dataTypes,mapping:T,visualOptions:M,setVisualOptions:I,setRawViz:V,setMappingLoading:z})),p&&N&&q&&r.a.createElement(y,{title:"5. Export"},r.a.createElement(Sn,{rawViz:q,exportProject:Q})),r.a.createElement(_,null),r.a.createElement(Rn.a,{location:"bottom",buttonText:"Got it!",style:{background:"#f5f5f5",color:"#646467"},buttonStyle:{background:"#646467",color:"white",fontSize:"13px",borderRadius:"3px",padding:"5px 20px"},buttonClasses:"btn btn-default btn-grey",acceptOnScroll:!0},"This website uses Google Analytics to anonymously collect browsing data."," ",r.a.createElement("a",{href:"https://rawgraphs.io/privacy/",target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-body border-bottom border-dark"},"Learn More"))),r.a.createElement(R,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ln,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[539,1,2]]]);
//# sourceMappingURL=main.0b44fb8a.chunk.js.map